    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::NYTProf version 6.14
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en-us" />
    <meta name="robots" content="noindex,nofollow" />
    <title>Profile of Math/BigInt.pm</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="js/jquery-min.js"></script>

    <script type="text/javascript" src="js/jquery.floatThead.min.js"></script>
    <script type="text/javascript" src="js/jquery.tablesorter.min.js"></script>
    <link rel="stylesheet" type="text/css" href="js/style-tablesorter.css" />
    <script type="text/javascript">
    // when a column is first clicked on to sort it, use descending order
    // XXX doesn't seem to work (and not just because the tablesorter formatSortingOrder() is broken)
    $.tablesorter.defaults.sortInitialOrder = "desc";
    // add parser through the tablesorter addParser method
    $.tablesorter.addParser({
        id: 'fmt_time',   // name of this parser
        is: function(s) {
            return false; // return false so this parser is not auto detected
        },
        format: function(orig) { // format data for normalization
            // console.log(orig);
            var val = orig.replace(/ns/,'');
            if (val != orig) { return val / (1000*1000*1000); }
            val = orig.replace(/[Âµ\xB5]s/,''); /* micro */
            if (val != orig) { return val / (1000*1000); }
            val = orig.replace(/ms/,'');
            if (val != orig) { return val / (1000); }
            val = orig.replace(/([0-9])s/,"$1");
            if (val != orig) { return val; }
            if (orig == '0') { return orig; }
            var non_number = orig.replace(/^[-+]?[0-9.]+/, '', 'g');
            console.log('no match for fmt_time of '+orig+' (units:'+non_number+' charCodeAt0:'+non_number.charCodeAt(0)+')');
            return orig;
        },
        type: 'numeric' // set type, either numeric or text
    });

    function show_fragment_target() {
        var tgt = $(':target');
        var table = tgt.closest('table.floatHeaders');
        if( tgt.is('a') && table.is('table.floatHeaders') )
        {
            var cury     = $(window).scrollTop();
            var fhYPos   = table.prev('.floatThead-container').offset().top;
            var thHeight = table.find('thead').first().height();
            var tYPos    = parseInt($(':target').closest('tr').position().top);
            if( tYPos < (fhYPos + thHeight) )
            {
                $(window).scrollTop(
                    tYPos - (thHeight)
                );
            }
        }
    }
    </script>
</head>

<body > 
<div class="header" style="position: relative; overflow-x: hidden; overflow-y: hidden; z-index: 0; ">
<div class="header_back">
            <a href="index.html">&larr; Index</a>
        </div>
<div class="headerForeground" style="float: left">
    <span class="siteTitle">NYTProf Performance Profile</span>
    <span class="siteSubtitle">&emsp;&emsp;<span>&laquo;&emsp;<span class="mode_btn mode_btn_selected">line view</span>&emsp;&raquo;</span><br />
            For run.pl
        </span>
</div>
<div class="headerForeground" style="float: right; text-align: right">
    <span class="siteTitle">&nbsp;</span>
    <span class="siteSubtitle">Run on Tue Dec 12 08:34:39 2023<br />Reported on Tue Dec 12 08:34:54 2023</span>
</div>
<div style="position: absolute; left: 0px; top: 0%; width: 100%; height: 101%; z-index: -1; background-color: rgb(17, 136, 255); "></div>
<div style="position: absolute; left: 0px; top: 2%; width: 100%; height: 99%; z-index: -1; background-color: rgb(16, 134, 253); "></div>
<div style="position: absolute; left: 0px; top: 4%; width: 100%; height: 97%; z-index: -1; background-color: rgb(16, 133, 252); "></div>
<div style="position: absolute; left: 0px; top: 6%; width: 100%; height: 95%; z-index: -1; background-color: rgb(15, 131, 250); "></div>
<div style="position: absolute; left: 0px; top: 8%; width: 100%; height: 93%; z-index: -1; background-color: rgb(15, 130, 249); "></div>
<div style="position: absolute; left: 0px; top: 10%; width: 100%; height: 91%; z-index: -1; background-color: rgb(15, 129, 248); "></div>
<div style="position: absolute; left: 0px; top: 12%; width: 100%; height: 89%; z-index: -1; background-color: rgb(14, 127, 246); "></div>
<div style="position: absolute; left: 0px; top: 14%; width: 100%; height: 87%; z-index: -1; background-color: rgb(14, 126, 245); "></div>
<div style="position: absolute; left: 0px; top: 16%; width: 100%; height: 85%; z-index: -1; background-color: rgb(14, 125, 244); "></div>
<div style="position: absolute; left: 0px; top: 18%; width: 100%; height: 83%; z-index: -1; background-color: rgb(13, 123, 242); "></div>
<div style="position: absolute; left: 0px; top: 20%; width: 100%; height: 81%; z-index: -1; background-color: rgb(13, 122, 241); "></div>
<div style="position: absolute; left: 0px; top: 22%; width: 100%; height: 79%; z-index: -1; background-color: rgb(13, 121, 240); "></div>
<div style="position: absolute; left: 0px; top: 24%; width: 100%; height: 77%; z-index: -1; background-color: rgb(12, 119, 238); "></div>
<div style="position: absolute; left: 0px; top: 26%; width: 100%; height: 75%; z-index: -1; background-color: rgb(12, 118, 237); "></div>
<div style="position: absolute; left: 0px; top: 28%; width: 100%; height: 73%; z-index: -1; background-color: rgb(12, 116, 235); "></div>
<div style="position: absolute; left: 0px; top: 30%; width: 100%; height: 71%; z-index: -1; background-color: rgb(11, 115, 234); "></div>
<div style="position: absolute; left: 0px; top: 32%; width: 100%; height: 69%; z-index: -1; background-color: rgb(11, 114, 233); "></div>
<div style="position: absolute; left: 0px; top: 34%; width: 100%; height: 67%; z-index: -1; background-color: rgb(11, 112, 231); "></div>
<div style="position: absolute; left: 0px; top: 36%; width: 100%; height: 65%; z-index: -1; background-color: rgb(10, 111, 230); "></div>
<div style="position: absolute; left: 0px; top: 38%; width: 100%; height: 63%; z-index: -1; background-color: rgb(10, 110, 229); "></div>
<div style="position: absolute; left: 0px; top: 40%; width: 100%; height: 61%; z-index: -1; background-color: rgb(10, 108, 227); "></div>
<div style="position: absolute; left: 0px; top: 42%; width: 100%; height: 59%; z-index: -1; background-color: rgb(9, 107, 226); "></div>
<div style="position: absolute; left: 0px; top: 44%; width: 100%; height: 57%; z-index: -1; background-color: rgb(9, 106, 225); "></div>
<div style="position: absolute; left: 0px; top: 46%; width: 100%; height: 55%; z-index: -1; background-color: rgb(9, 104, 223); "></div>
<div style="position: absolute; left: 0px; top: 48%; width: 100%; height: 53%; z-index: -1; background-color: rgb(8, 103, 222); "></div>
<div style="position: absolute; left: 0px; top: 50%; width: 100%; height: 51%; z-index: -1; background-color: rgb(8, 102, 221); "></div>
<div style="position: absolute; left: 0px; top: 52%; width: 100%; height: 49%; z-index: -1; background-color: rgb(8, 100, 219); "></div>
<div style="position: absolute; left: 0px; top: 54%; width: 100%; height: 47%; z-index: -1; background-color: rgb(7, 99, 218); "></div>
<div style="position: absolute; left: 0px; top: 56%; width: 100%; height: 45%; z-index: -1; background-color: rgb(7, 97, 216); "></div>
<div style="position: absolute; left: 0px; top: 58%; width: 100%; height: 43%; z-index: -1; background-color: rgb(7, 96, 215); "></div>
<div style="position: absolute; left: 0px; top: 60%; width: 100%; height: 41%; z-index: -1; background-color: rgb(6, 95, 214); "></div>
<div style="position: absolute; left: 0px; top: 62%; width: 100%; height: 39%; z-index: -1; background-color: rgb(6, 93, 212); "></div>
<div style="position: absolute; left: 0px; top: 64%; width: 100%; height: 37%; z-index: -1; background-color: rgb(6, 92, 211); "></div>
<div style="position: absolute; left: 0px; top: 66%; width: 100%; height: 35%; z-index: -1; background-color: rgb(5, 91, 210); "></div>
<div style="position: absolute; left: 0px; top: 68%; width: 100%; height: 33%; z-index: -1; background-color: rgb(5, 89, 208); "></div>
<div style="position: absolute; left: 0px; top: 70%; width: 100%; height: 31%; z-index: -1; background-color: rgb(5, 88, 207); "></div>
<div style="position: absolute; left: 0px; top: 72%; width: 100%; height: 29%; z-index: -1; background-color: rgb(4, 87, 206); "></div>
<div style="position: absolute; left: 0px; top: 74%; width: 100%; height: 27%; z-index: -1; background-color: rgb(4, 85, 204); "></div>
<div style="position: absolute; left: 0px; top: 76%; width: 100%; height: 25%; z-index: -1; background-color: rgb(4, 84, 203); "></div>
<div style="position: absolute; left: 0px; top: 78%; width: 100%; height: 23%; z-index: -1; background-color: rgb(3, 82, 201); "></div>
<div style="position: absolute; left: 0px; top: 80%; width: 100%; height: 21%; z-index: -1; background-color: rgb(3, 81, 200); "></div>
<div style="position: absolute; left: 0px; top: 82%; width: 100%; height: 19%; z-index: -1; background-color: rgb(3, 80, 199); "></div>
<div style="position: absolute; left: 0px; top: 84%; width: 100%; height: 17%; z-index: -1; background-color: rgb(2, 78, 197); "></div>
<div style="position: absolute; left: 0px; top: 86%; width: 100%; height: 15%; z-index: -1; background-color: rgb(2, 77, 196); "></div>
<div style="position: absolute; left: 0px; top: 88%; width: 100%; height: 13%; z-index: -1; background-color: rgb(2, 76, 195); "></div>
<div style="position: absolute; left: 0px; top: 90%; width: 100%; height: 11%; z-index: -1; background-color: rgb(1, 74, 193); "></div>
<div style="position: absolute; left: 0px; top: 92%; width: 100%; height: 9%; z-index: -1; background-color: rgb(1, 73, 192); "></div>
<div style="position: absolute; left: 0px; top: 94%; width: 100%; height: 7%; z-index: -1; background-color: rgb(1, 72, 191); "></div>
<div style="position: absolute; left: 0px; top: 96%; width: 100%; height: 5%; z-index: -1; background-color: rgb(0, 70, 189); "></div>
<div style="position: absolute; left: 0px; top: 98%; width: 100%; height: 3%; z-index: -1; background-color: rgb(0, 69, 188); "></div>
<div style="position: absolute; left: 0px; top: 100%; width: 100%; height: 1%; z-index: -1; background-color: rgb(0, 68, 187); "></div>
</div>

<div class="body_content"><br />
<table class="file_summary"><tr><td class="h">Filename</td><td align="left"><a href="file:///Users/gbuck/perl5/perlbrew/perls/perl-5.38.2/lib/5.38.2/Math/BigInt.pm">/Users/gbuck/perl5/perlbrew/perls/perl-5.38.2/lib/5.38.2/Math/BigInt.pm</a></td></tr>
<tr><td class="h">Statements</td><td align="left">Executed 89 statements in 29.1ms</td></tr></table>
        
        <table id="subs_table" border="1" cellpadding="0" class="tablesorter floatHeaders">
        <caption>Subroutines</caption>
        <thead>
        <tr>
        <th>Calls</th>
        <th><span title="Number of Places sub is called from">P</span></th>
        <th><span title="Number of Files sub is called from">F</span></th>
        <th>Exclusive<br />Time</th>
        <th>Inclusive<br />Time</th>
        <th>Subroutine</th>
        </tr>
        </thead>
    <tbody>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="8.9%">9.92ms</span></td><td class="c0"><span title="17.6%">19.7ms</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::import</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4843">import</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="1.5%">1.65ms</span></td><td class="c0"><span title="1.7%">1.93ms</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@48</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#48">BEGIN@48</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="1.4%">1.59ms</span></td><td class="c0"><span title="2.5%">2.79ms</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@24</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#24">BEGIN@24</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.0%">28Âµs</span></td><td class="c2"><span title="0.0%">28Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@19</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#19">BEGIN@19</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.0%">20Âµs</span></td><td class="c3"><span title="0.0%">23Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@260</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#260">BEGIN@260</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.0%">19Âµs</span></td><td class="c1"><span title="0.0%">29Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@4738</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4738">BEGIN@4738</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c1"><span title="0.0%">17Âµs</span></td><td class="c2"><span title="0.0%">27Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@1085</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1085">BEGIN@1085</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c1"><span title="0.0%">17Âµs</span></td><td class="c3"><span title="0.0%">22Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::round_mode</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#274">round_mode</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c1"><span title="0.0%">16Âµs</span></td><td class="c2"><span title="0.0%">27Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@3622</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3622">BEGIN@3622</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c2"><span title="0.0%">14Âµs</span></td><td class="c0"><span title="0.0%">53Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@5128</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5128">BEGIN@5128</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">13Âµs</span></td><td class="c3"><span title="0.0%">16Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@309</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#309">BEGIN@309</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">12Âµs</span></td><td class="c3"><span title="0.0%">21Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@284</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#284">BEGIN@284</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">12Âµs</span></td><td class="c3"><span title="0.0%">20Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@5075</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5075">BEGIN@5075</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">11Âµs</span></td><td class="c3"><span title="0.0%">15Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@1150</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1150">BEGIN@1150</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">11Âµs</span></td><td class="c3"><span title="0.0%">14Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@334</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#334">BEGIN@334</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">10Âµs</span></td><td class="c3"><span title="0.0%">14Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@432</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#432">BEGIN@432</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">9Âµs</span></td><td class="c3"><span title="0.0%">12Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@20</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#20">BEGIN@20</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">9Âµs</span></td><td class="c3"><span title="0.0%">12Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@289</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#289">BEGIN@289</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">9Âµs</span></td><td class="c3"><span title="0.0%">14Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@498</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#498">BEGIN@498</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">8Âµs</span></td><td class="c0"><span title="0.0%">38Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@21</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#21">BEGIN@21</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">8Âµs</span></td><td class="c0"><span title="0.1%">58Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@23</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#23">BEGIN@23</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">8Âµs</span></td><td class="c3"><span title="0.0%">12Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@329</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#329">BEGIN@329</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">8Âµs</span></td><td class="c3"><span title="0.0%">11Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@349</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#349">BEGIN@349</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">7Âµs</span></td><td class="c3"><span title="0.0%">11Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@296</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#296">BEGIN@296</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">7Âµs</span></td><td class="c3"><span title="0.0%">11Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@395</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#395">BEGIN@395</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">7Âµs</span></td><td class="c3"><span title="0.0%">11Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::BEGIN@520</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#520">BEGIN@520</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">7Âµs</span></td><td class="c1"><span title="0.0%">29Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::STORE</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#256">STORE</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">5Âµs</span></td><td class="c3"><span title="0.0%">5Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::CORE:match</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#Math__BigInt__CORE_match">CORE:match</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">3Âµs</span></td><td class="c3"><span title="0.0%">3Âµs</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::TIESCALAR</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#247">TIESCALAR</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::FETCH</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#252">FETCH</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:101]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#100">__ANON__[:101]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:104]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#103">__ANON__[:104]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:106]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#106">__ANON__[:106]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:108]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#108">__ANON__[:108]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:113]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#112">__ANON__[:113]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:116]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#115">__ANON__[:116]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:139]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#138">__ANON__[:139]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:141]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#141">__ANON__[:141]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:144]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#143">__ANON__[:144]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:146]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#146">__ANON__[:146]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:149]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#148">__ANON__[:149]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:151]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#151">__ANON__[:151]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:167]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#167">__ANON__[:167]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:171]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#171">__ANON__[:171]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:177]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#177">__ANON__[:177]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:179]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#179">__ANON__[:179]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:184]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#183">__ANON__[:184]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:186]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#186">__ANON__[:186]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:188]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#188">__ANON__[:188]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:190]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#190">__ANON__[:190]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:192]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#192">__ANON__[:192]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:194]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#194">__ANON__[:194]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:196]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#196">__ANON__[:196]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:198]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#198">__ANON__[:198]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:202]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#202">__ANON__[:202]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:204]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#204">__ANON__[:204]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:206]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#206">__ANON__[:206]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:208]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#208">__ANON__[:208]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:4858]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4856">__ANON__[:4858]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:4862]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4860">__ANON__[:4862]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:4869]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4864">__ANON__[:4869]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:48]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#48">__ANON__[:48]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:52]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#50">__ANON__[:52]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:54]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#54">__ANON__[:54]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:57]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#56">__ANON__[:57]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:60]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#59">__ANON__[:60]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:62]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#61">__ANON__[:62]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:65]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#64">__ANON__[:65]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:68]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#67">__ANON__[:68]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:72]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#72">__ANON__[:72]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:74]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#74">__ANON__[:74]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:76]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#76">__ANON__[:76]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:78]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#78">__ANON__[:78]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:80]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#80">__ANON__[:80]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:82]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#82">__ANON__[:82]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:84]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#84">__ANON__[:84]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:86]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#86">__ANON__[:86]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:95]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#94">__ANON__[:95]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::__ANON__[:98]</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#97">__ANON__[:98]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_bin_str_parts_to_flt_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5477">_bin_str_parts_to_flt_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_bin_str_to_bin_str_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5354">_bin_str_to_bin_str_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_bin_str_to_flt_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5622">_bin_str_to_flt_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_dec_str_parts_to_flt_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5408">_dec_str_parts_to_flt_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_dec_str_to_dec_str_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5183">_dec_str_to_dec_str_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_dec_str_to_flt_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5635">_dec_str_to_flt_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_find_round_parameters</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5055">_find_round_parameters</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_flt_lib_parts_to_dec_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5739">_flt_lib_parts_to_dec_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_flt_lib_parts_to_flt_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5732">_flt_lib_parts_to_flt_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_flt_lib_parts_to_rat_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5787">_flt_lib_parts_to_rat_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_hex_str_to_flt_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5594">_hex_str_to_flt_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_hex_str_to_hex_str_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5246">_hex_str_to_hex_str_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_is_numeric</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5125">_is_numeric</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_oct_str_to_flt_lib_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5608">_oct_str_to_flt_lib_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_oct_str_to_oct_str_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5300">_oct_str_to_oct_str_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_register_callback</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5814">_register_callback</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_scale_a</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#491">_scale_a</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_scale_p</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#513">_scale_p</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_scan_for_nonzero</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5043">_scan_for_nonzero</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_trailing_zeros</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5033">_trailing_zeros</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::_trim_split_parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5144">_trim_split_parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::accuracy</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#340">accuracy</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::ackermann</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2944">ackermann</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::as_bin</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4633">as_bin</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::as_float</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1285">as_float</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::as_hex</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4601">as_hex</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::as_int</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1259">as_int</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::as_oct</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4617">as_oct</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::as_rat</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1307">as_rat</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::babs</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1591">babs</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::backermann</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2937">backermann</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bacmp</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1479">bacmp</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::badd</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1767">badd</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::band</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3478">band</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::batan</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3030">batan</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::batan2</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3048">batan2</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bceil</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3796">bceil</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bcmp</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1437">bcmp</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bcos</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3012">bcos</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bdec</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1653">bdec</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bdfac</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3155">bdfac</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bdigitsum</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3931">bdigitsum</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bdiv</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2020">bdiv</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bdstr</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4389">bdstr</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::beq</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1504">beq</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bestr</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4350">bestr</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bexp</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2766">bexp</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bfac</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3139">bfac</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bfib</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3219">bfib</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bfloor</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3786">bfloor</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bfround</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3760">bfround</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bfstr</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4414">bfstr</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bgcd</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3820">bgcd</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bge</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1559">bge</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bgt</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1548">bgt</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bin_str_to_dec_flt_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5668">bin_str_to_dec_flt_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bin_str_to_dec_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5712">bin_str_to_dec_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::binc</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1633">binc</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::binf</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1068">binf</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bint</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3806">bint</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bior</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3504">bior</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::blcm</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3865">blcm</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::ble</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1537">ble</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::blog</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2696">blog</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::blsft</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3337">blsft</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::blt</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1526">blt</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::blucas</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3278">blucas</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bmfac</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3197">bmfac</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bmod</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2335">bmod</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bmodinv</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2440">bmodinv</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bmodpow</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2521">bmodpow</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bmul</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1839">bmul</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bmuladd</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1876">bmuladd</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bnan</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1133">bnan</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bne</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1515">bne</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bneg</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1574">bneg</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bnok</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2787">bnok</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bnorm</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1619">bnorm</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bnot</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3556">bnot</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bnstr</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4316">bnstr</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bone</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1011">bone</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bpi</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1188">bpi</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bpow</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2627">bpow</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::broot</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3114">broot</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bround</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3657">bround</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::brsft</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3389">brsft</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bsgn</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1605">bsgn</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bsin</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2991">bsin</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bsqrt</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3099">bsqrt</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bsstr</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4288">bsstr</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bstr</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4262">bstr</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bsub</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1806">bsub</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::btdiv</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2191">btdiv</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::btfac</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3174">btfac</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::btmod</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2392">btmod</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::buparrow</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2871">buparrow</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bxor</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3530">bxor</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::bzero</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#961">bzero</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::config</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#428">config</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::copy</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1237">copy</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::dec_str_to_dec_flt_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5679">dec_str_to_dec_flt_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::dec_str_to_dec_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5723">dec_str_to_dec_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::denominator</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4247">denominator</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::digit</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3921">digit</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::digitsum</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3945">digitsum</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::div_scale</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#320">div_scale</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::downgrade</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#308">downgrade</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::dparts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4162">dparts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::eparts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4117">eparts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::exponent</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3968">exponent</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::fparts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4202">fparts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_base</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#875">from_base</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_base_num</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#919">from_base_num</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_bin</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#816">from_bin</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_bytes</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#852">from_bytes</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_dec</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#708">from_dec</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_hex</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#744">from_hex</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::from_oct</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#780">from_oct</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::fround</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3778">fround</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::hex_str_to_dec_flt_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5646">hex_str_to_dec_flt_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::hex_str_to_dec_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5690">hex_str_to_dec_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_even</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1418">is_even</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_finite</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1351">is_finite</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_inf</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1356">is_inf</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_int</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1426">is_int</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_nan</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1368">is_nan</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_negative</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1385">is_negative</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_non_negative</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1392">is_non_negative</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_non_positive</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1401">is_non_positive</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_odd</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1410">is_odd</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_one</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1341">is_one</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_positive</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1375">is_positive</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::is_zero</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#1333">is_zero</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::length</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3959">length</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::mantissa</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3990">mantissa</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::new</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#539">new</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::nparts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4079">nparts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::numerator</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4236">numerator</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::numify</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4655">numify</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::objectify</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4684">objectify</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::oct_str_to_dec_flt_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5657">oct_str_to_dec_flt_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::oct_str_to_dec_str</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#5701">oct_str_to_dec_str</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::parts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4015">parts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::precision</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#386">precision</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::round</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3573">round</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::sign</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#3912">sign</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::sparts</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4033">sparts</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::to_base</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4530">to_base</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::to_base_num</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4565">to_base_num</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::to_bin</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4486">to_bin</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::to_bytes</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4511">to_bytes</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::to_hex</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4436">to_hex</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::to_oct</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#4461">to_oct</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::uparrow</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#2878">uparrow</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">Math::BigInt::::upgrade</span>Math::BigInt::<a href="Math-BigInt-pm-25-line.html#295">upgrade</a></td></tr>
</tbody></table>
                Call graph for these subroutines as a
                <a href="http://en.wikipedia.org/wiki/Graphviz">Graphviz</a>
                <a href="Users-gbuck-perl5-perlbrew-perls-perl-5-38-2-lib-5-38-2-Math-BigInt-pm.dot">dot language file</a>.
            
      <table border="1" cellpadding="0" class="floatHeaders">
      <thead>
      <tr><th>Line</th>
      <th><span title="Number of statements executed">State<br />ments</span></th>
      <th><span title="Time spent executing statements on the line,
        excluding time spent executing statements in any called subroutines">Time<br />on line</span></th>
      <th><span title="Number of subroutines calls">Calls</span></th>
      <th><span title="Time spent in subroutines called (inclusive)">Time<br />in subs</span></th>
      <th class="left_indent_header">Code</th>
      </tr>

      </thead>
      <tbody>
    <tr><td class="h"><a name="1"></a>1</td><td></td><td></td><td></td><td></td><td class="s"># -*- coding: utf-8-unix -*-</td></tr>
<tr><td class="h"><a name="2"></a>2</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3"></a>3</td><td></td><td></td><td></td><td></td><td class="s">package Math::BigInt;</td></tr>
<tr><td class="h"><a name="4"></a>4</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5"></a>5</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="6"></a>6</td><td></td><td></td><td></td><td></td><td class="s"># &quot;Mike had an infinite amount to do and a negative amount of time in which</td></tr>
<tr><td class="h"><a name="7"></a>7</td><td></td><td></td><td></td><td></td><td class="s"># to do it.&quot; - Before and After</td></tr>
<tr><td class="h"><a name="8"></a>8</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="9"></a>9</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="10"></a>10</td><td></td><td></td><td></td><td></td><td class="s"># The following hash values are used:</td></tr>
<tr><td class="h"><a name="11"></a>11</td><td></td><td></td><td></td><td></td><td class="s">#   value: unsigned int with actual value (as a Math::BigInt::Calc or similar)</td></tr>
<tr><td class="h"><a name="12"></a>12</td><td></td><td></td><td></td><td></td><td class="s">#   sign : +, -, NaN, +inf, -inf</td></tr>
<tr><td class="h"><a name="13"></a>13</td><td></td><td></td><td></td><td></td><td class="s">#   _a   : accuracy</td></tr>
<tr><td class="h"><a name="14"></a>14</td><td></td><td></td><td></td><td></td><td class="s">#   _p   : precision</td></tr>
<tr><td class="h"><a name="15"></a>15</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="16"></a>16</td><td></td><td></td><td></td><td></td><td class="s"># Remember not to take shortcuts ala $xs = $x-&gt;{value}; $LIB-&gt;foo($xs); since</td></tr>
<tr><td class="h"><a name="17"></a>17</td><td></td><td></td><td></td><td></td><td class="s"># underlying lib might change the reference!</td></tr>
<tr><td class="h"><a name="18"></a>18</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="19"></a>19</td><td class="c1">2</td><td class="c0"><span title="Avg 25Âµs">50Âµs</span></td><td class="c3">1</td><td class="c2">28Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 28Âµs within Math::BigInt::BEGIN@19 which was called:
#    once (28Âµs+0s) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#19">line 19</a></div></div>use 5.006001;<div class="calls"><div class="calls_out"># spent    28Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#19">Math::BigInt::BEGIN@19</a></div></div></td></tr>
<tr><td class="h"><a name="20"></a>20</td><td class="c1">2</td><td class="c0"><span title="Avg 17Âµs">34Âµs</span></td><td class="c3">2</td><td class="c3">15Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 12Âµs (9+3) within Math::BigInt::BEGIN@20 which was called:
#    once (9Âµs+3Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#20">line 20</a></div></div>use strict;<div class="calls"><div class="calls_out"># spent    12Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#20">Math::BigInt::BEGIN@20</a>
# spent     3Âµs making 1 call to <a href="strict-pm-34-line.html#60">strict::import</a></div></div></td></tr>
<tr><td class="h"><a name="21"></a>21</td><td class="c1">2</td><td class="c0"><span title="Avg 14Âµs">28Âµs</span></td><td class="c3">2</td><td class="c0">68Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 38Âµs (8+30) within Math::BigInt::BEGIN@21 which was called:
#    once (8Âµs+30Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#21">line 21</a></div></div>use warnings;<div class="calls"><div class="calls_out"># spent    38Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#21">Math::BigInt::BEGIN@21</a>
# spent    30Âµs making 1 call to <a href="warnings-pm-2-line.html#383">warnings::import</a></div></div></td></tr>
<tr><td class="h"><a name="22"></a>22</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="23"></a>23</td><td class="c1">2</td><td class="c0"><span title="Avg 19Âµs">38Âµs</span></td><td class="c3">2</td><td class="c0">108Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 58Âµs (8+50) within Math::BigInt::BEGIN@23 which was called:
#    once (8Âµs+50Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#23">line 23</a></div></div>use Carp          qw&lt; carp croak &gt;;<div class="calls"><div class="calls_out"># spent    58Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#23">Math::BigInt::BEGIN@23</a>
# spent    50Âµs making 1 call to <a href="Exporter-pm-12-line.html#25">Exporter::import</a></div></div></td></tr>
<tr><td class="h"><a name="24"></a>24</td><td class="c1">2</td><td class="c0"><span title="Avg 778Âµs">1.56ms</span></td><td class="c3">2</td><td class="c0">2.86ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 2.79ms (1.59+1.21) within Math::BigInt::BEGIN@24 which was called:
#    once (1.59ms+1.21ms) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#24">line 24</a></div></div>use Scalar::Util  qw&lt; blessed refaddr &gt;;<div class="calls"><div class="calls_out"># spent  2.79ms making 1 call to <a href="Math-BigInt-pm-25-line.html#24">Math::BigInt::BEGIN@24</a>
# spent    63Âµs making 1 call to <a href="Exporter-pm-12-line.html#25">Exporter::import</a></div></div></td></tr>
<tr><td class="h"><a name="25"></a>25</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="26"></a>26</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">our $VERSION = '1.999837';</td></tr>
<tr><td class="h"><a name="27"></a>27</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">$VERSION =~ tr/_//d;</td></tr>
<tr><td class="h"><a name="28"></a>28</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="29"></a>29</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">require Exporter;</td></tr>
<tr><td class="h"><a name="30"></a>30</td><td class="c3">1</td><td class="c1"><span title="Avg 12Âµs">12Âµs</span></td><td></td><td></td><td class="s">our @ISA = qw(Exporter);</td></tr>
<tr><td class="h"><a name="31"></a>31</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">our @EXPORT_OK = qw(objectify bgcd blcm);</td></tr>
<tr><td class="h"><a name="32"></a>32</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="33"></a>33</td><td></td><td></td><td></td><td></td><td class="s"># Inside overload, the first arg is always an object. If the original code had</td></tr>
<tr><td class="h"><a name="34"></a>34</td><td></td><td></td><td></td><td></td><td class="s"># it reversed (like $x = 2 * $y), then the third parameter is true.</td></tr>
<tr><td class="h"><a name="35"></a>35</td><td></td><td></td><td></td><td></td><td class="s"># In some cases (like add, $x = $x + 2 is the same as $x = 2 + $x) this makes</td></tr>
<tr><td class="h"><a name="36"></a>36</td><td></td><td></td><td></td><td></td><td class="s"># no difference, but in some cases it does.</td></tr>
<tr><td class="h"><a name="37"></a>37</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="38"></a>38</td><td></td><td></td><td></td><td></td><td class="s"># For overloaded ops with only one argument we simple use $_[0]-&gt;copy() to</td></tr>
<tr><td class="h"><a name="39"></a>39</td><td></td><td></td><td></td><td></td><td class="s"># preserve the argument.</td></tr>
<tr><td class="h"><a name="40"></a>40</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="41"></a>41</td><td></td><td></td><td></td><td></td><td class="s"># Thus inheritance of overload operators becomes possible and transparent for</td></tr>
<tr><td class="h"><a name="42"></a>42</td><td></td><td></td><td></td><td></td><td class="s"># our subclasses without the need to repeat the entire overload section there.</td></tr>
<tr><td class="h"><a name="43"></a>43</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="44"></a>44</td><td></td><td></td><td></td><td></td><td class="s">use overload</td></tr>
<tr><td class="h"><a name="45"></a>45</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="46"></a>46</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: with_assign</td></tr>
<tr><td class="h"><a name="47"></a>47</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="48"></a>48</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 1.93ms (1.65+279Âµs) within Math::BigInt::BEGIN@48 which was called:
#    once (1.65ms+279Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#210">line 210</a></div></div>  '+'     =&gt;      sub { $_[0] -&gt; copy() -&gt; badd($_[1]); },</td></tr>
<tr><td class="h"><a name="49"></a>49</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="50"></a>50</td><td></td><td></td><td></td><td></td><td class="s">  '-'     =&gt;      sub { my $c = $_[0] -&gt; copy();</td></tr>
<tr><td class="h"><a name="51"></a>51</td><td></td><td></td><td></td><td></td><td class="s">                        $_[2] ? $c -&gt; bneg() -&gt; badd($_[1])</td></tr>
<tr><td class="h"><a name="52"></a>52</td><td></td><td></td><td></td><td></td><td class="s">                              : $c -&gt; bsub($_[1]); },</td></tr>
<tr><td class="h"><a name="53"></a>53</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="54"></a>54</td><td></td><td></td><td></td><td></td><td class="s">  '*'     =&gt;      sub { $_[0] -&gt; copy() -&gt; bmul($_[1]); },</td></tr>
<tr><td class="h"><a name="55"></a>55</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="56"></a>56</td><td></td><td></td><td></td><td></td><td class="s">  '/'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bdiv($_[0])</td></tr>
<tr><td class="h"><a name="57"></a>57</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; bdiv($_[1]); },</td></tr>
<tr><td class="h"><a name="58"></a>58</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="59"></a>59</td><td></td><td></td><td></td><td></td><td class="s">  '%'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bmod($_[0])</td></tr>
<tr><td class="h"><a name="60"></a>60</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; bmod($_[1]); },</td></tr>
<tr><td class="h"><a name="61"></a>61</td><td></td><td></td><td></td><td></td><td class="s">  '**'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bpow($_[0])</td></tr>
<tr><td class="h"><a name="62"></a>62</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; bpow($_[1]); },</td></tr>
<tr><td class="h"><a name="63"></a>63</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="64"></a>64</td><td></td><td></td><td></td><td></td><td class="s">  '&lt;&lt;'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; blsft($_[0])</td></tr>
<tr><td class="h"><a name="65"></a>65</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; blsft($_[1]); },</td></tr>
<tr><td class="h"><a name="66"></a>66</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="67"></a>67</td><td></td><td></td><td></td><td></td><td class="s">  '&gt;&gt;'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; brsft($_[0])</td></tr>
<tr><td class="h"><a name="68"></a>68</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; brsft($_[1]); },</td></tr>
<tr><td class="h"><a name="69"></a>69</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="70"></a>70</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: assign</td></tr>
<tr><td class="h"><a name="71"></a>71</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="72"></a>72</td><td></td><td></td><td></td><td></td><td class="s">  '+='    =&gt;      sub { $_[0] -&gt; badd($_[1]); },</td></tr>
<tr><td class="h"><a name="73"></a>73</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="74"></a>74</td><td></td><td></td><td></td><td></td><td class="s">  '-='    =&gt;      sub { $_[0] -&gt; bsub($_[1]); },</td></tr>
<tr><td class="h"><a name="75"></a>75</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="76"></a>76</td><td></td><td></td><td></td><td></td><td class="s">  '*='    =&gt;      sub { $_[0] -&gt; bmul($_[1]); },</td></tr>
<tr><td class="h"><a name="77"></a>77</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="78"></a>78</td><td></td><td></td><td></td><td></td><td class="s">  '/='    =&gt;      sub { scalar $_[0] -&gt; bdiv($_[1]); },</td></tr>
<tr><td class="h"><a name="79"></a>79</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="80"></a>80</td><td></td><td></td><td></td><td></td><td class="s">  '%='    =&gt;      sub { $_[0] -&gt; bmod($_[1]); },</td></tr>
<tr><td class="h"><a name="81"></a>81</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="82"></a>82</td><td></td><td></td><td></td><td></td><td class="s">  '**='   =&gt;      sub { $_[0] -&gt; bpow($_[1]); },</td></tr>
<tr><td class="h"><a name="83"></a>83</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="84"></a>84</td><td></td><td></td><td></td><td></td><td class="s">  '&lt;&lt;='   =&gt;      sub { $_[0] -&gt; blsft($_[1]); },</td></tr>
<tr><td class="h"><a name="85"></a>85</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="86"></a>86</td><td></td><td></td><td></td><td></td><td class="s">  '&gt;&gt;='   =&gt;      sub { $_[0] -&gt; brsft($_[1]); },</td></tr>
<tr><td class="h"><a name="87"></a>87</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="88"></a>88</td><td></td><td></td><td></td><td></td><td class="s">#  'x='    =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="89"></a>89</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="90"></a>90</td><td></td><td></td><td></td><td></td><td class="s">#  '.='    =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="91"></a>91</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="92"></a>92</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: num_comparison</td></tr>
<tr><td class="h"><a name="93"></a>93</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="94"></a>94</td><td></td><td></td><td></td><td></td><td class="s">  '&lt;'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; blt($_[0])</td></tr>
<tr><td class="h"><a name="95"></a>95</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; blt($_[1]); },</td></tr>
<tr><td class="h"><a name="96"></a>96</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="97"></a>97</td><td></td><td></td><td></td><td></td><td class="s">  '&lt;='    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; ble($_[0])</td></tr>
<tr><td class="h"><a name="98"></a>98</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; ble($_[1]); },</td></tr>
<tr><td class="h"><a name="99"></a>99</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="100"></a>100</td><td></td><td></td><td></td><td></td><td class="s">  '&gt;'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bgt($_[0])</td></tr>
<tr><td class="h"><a name="101"></a>101</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; bgt($_[1]); },</td></tr>
<tr><td class="h"><a name="102"></a>102</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="103"></a>103</td><td></td><td></td><td></td><td></td><td class="s">  '&gt;='    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bge($_[0])</td></tr>
<tr><td class="h"><a name="104"></a>104</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; bge($_[1]); },</td></tr>
<tr><td class="h"><a name="105"></a>105</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="106"></a>106</td><td></td><td></td><td></td><td></td><td class="s">  '=='    =&gt;      sub { $_[0] -&gt; beq($_[1]); },</td></tr>
<tr><td class="h"><a name="107"></a>107</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="108"></a>108</td><td></td><td></td><td></td><td></td><td class="s">  '!='    =&gt;      sub { $_[0] -&gt; bne($_[1]); },</td></tr>
<tr><td class="h"><a name="109"></a>109</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="110"></a>110</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: 3way_comparison</td></tr>
<tr><td class="h"><a name="111"></a>111</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="112"></a>112</td><td></td><td></td><td></td><td></td><td class="s">  '&lt;=&gt;'   =&gt;      sub { my $cmp = $_[0] -&gt; bcmp($_[1]);</td></tr>
<tr><td class="h"><a name="113"></a>113</td><td></td><td></td><td></td><td></td><td class="s">                        defined($cmp) &amp;&amp; $_[2] ? -$cmp : $cmp; },</td></tr>
<tr><td class="h"><a name="114"></a>114</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="115"></a>115</td><td></td><td></td><td></td><td></td><td class="s">  'cmp'   =&gt;      sub { $_[2] ? &quot;$_[1]&quot; cmp $_[0] -&gt; bstr()</td></tr>
<tr><td class="h"><a name="116"></a>116</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; bstr() cmp &quot;$_[1]&quot;; },</td></tr>
<tr><td class="h"><a name="117"></a>117</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="118"></a>118</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: str_comparison</td></tr>
<tr><td class="h"><a name="119"></a>119</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="120"></a>120</td><td></td><td></td><td></td><td></td><td class="s">#  'lt'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bstrlt($_[0])</td></tr>
<tr><td class="h"><a name="121"></a>121</td><td></td><td></td><td></td><td></td><td class="s">#                              : $_[0] -&gt; bstrlt($_[1]); },</td></tr>
<tr><td class="h"><a name="122"></a>122</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="123"></a>123</td><td></td><td></td><td></td><td></td><td class="s">#  'le'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bstrle($_[0])</td></tr>
<tr><td class="h"><a name="124"></a>124</td><td></td><td></td><td></td><td></td><td class="s">#                              : $_[0] -&gt; bstrle($_[1]); },</td></tr>
<tr><td class="h"><a name="125"></a>125</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="126"></a>126</td><td></td><td></td><td></td><td></td><td class="s">#  'gt'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bstrgt($_[0])</td></tr>
<tr><td class="h"><a name="127"></a>127</td><td></td><td></td><td></td><td></td><td class="s">#                              : $_[0] -&gt; bstrgt($_[1]); },</td></tr>
<tr><td class="h"><a name="128"></a>128</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="129"></a>129</td><td></td><td></td><td></td><td></td><td class="s">#  'ge'    =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bstrge($_[0])</td></tr>
<tr><td class="h"><a name="130"></a>130</td><td></td><td></td><td></td><td></td><td class="s">#                              : $_[0] -&gt; bstrge($_[1]); },</td></tr>
<tr><td class="h"><a name="131"></a>131</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="132"></a>132</td><td></td><td></td><td></td><td></td><td class="s">#  'eq'    =&gt;      sub { $_[0] -&gt; bstreq($_[1]); },</td></tr>
<tr><td class="h"><a name="133"></a>133</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="134"></a>134</td><td></td><td></td><td></td><td></td><td class="s">#  'ne'    =&gt;      sub { $_[0] -&gt; bstrne($_[1]); },</td></tr>
<tr><td class="h"><a name="135"></a>135</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="136"></a>136</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: binary</td></tr>
<tr><td class="h"><a name="137"></a>137</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="138"></a>138</td><td></td><td></td><td></td><td></td><td class="s">  '&amp;'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; band($_[0])</td></tr>
<tr><td class="h"><a name="139"></a>139</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; band($_[1]); },</td></tr>
<tr><td class="h"><a name="140"></a>140</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="141"></a>141</td><td></td><td></td><td></td><td></td><td class="s">  '&amp;='    =&gt;      sub { $_[0] -&gt; band($_[1]); },</td></tr>
<tr><td class="h"><a name="142"></a>142</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="143"></a>143</td><td></td><td></td><td></td><td></td><td class="s">  '|'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bior($_[0])</td></tr>
<tr><td class="h"><a name="144"></a>144</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; bior($_[1]); },</td></tr>
<tr><td class="h"><a name="145"></a>145</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="146"></a>146</td><td></td><td></td><td></td><td></td><td class="s">  '|='    =&gt;      sub { $_[0] -&gt; bior($_[1]); },</td></tr>
<tr><td class="h"><a name="147"></a>147</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="148"></a>148</td><td></td><td></td><td></td><td></td><td class="s">  '^'     =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; bxor($_[0])</td></tr>
<tr><td class="h"><a name="149"></a>149</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; bxor($_[1]); },</td></tr>
<tr><td class="h"><a name="150"></a>150</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="151"></a>151</td><td></td><td></td><td></td><td></td><td class="s">  '^='    =&gt;      sub { $_[0] -&gt; bxor($_[1]); },</td></tr>
<tr><td class="h"><a name="152"></a>152</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="153"></a>153</td><td></td><td></td><td></td><td></td><td class="s">#  '&amp;.'    =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="154"></a>154</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="155"></a>155</td><td></td><td></td><td></td><td></td><td class="s">#  '&amp;.='   =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="156"></a>156</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="157"></a>157</td><td></td><td></td><td></td><td></td><td class="s">#  '|.'    =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="158"></a>158</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="159"></a>159</td><td></td><td></td><td></td><td></td><td class="s">#  '|.='   =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="160"></a>160</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="161"></a>161</td><td></td><td></td><td></td><td></td><td class="s">#  '^.'    =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="162"></a>162</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="163"></a>163</td><td></td><td></td><td></td><td></td><td class="s">#  '^.='   =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="164"></a>164</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="165"></a>165</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: unary</td></tr>
<tr><td class="h"><a name="166"></a>166</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="167"></a>167</td><td></td><td></td><td></td><td></td><td class="s">  'neg'   =&gt;      sub { $_[0] -&gt; copy() -&gt; bneg(); },</td></tr>
<tr><td class="h"><a name="168"></a>168</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="169"></a>169</td><td></td><td></td><td></td><td></td><td class="s">#  '!'     =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="170"></a>170</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="171"></a>171</td><td></td><td></td><td></td><td></td><td class="s">  '~'     =&gt;      sub { $_[0] -&gt; copy() -&gt; bnot(); },</td></tr>
<tr><td class="h"><a name="172"></a>172</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="173"></a>173</td><td></td><td></td><td></td><td></td><td class="s">#  '~.'    =&gt;      sub { },</td></tr>
<tr><td class="h"><a name="174"></a>174</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="175"></a>175</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: mutators</td></tr>
<tr><td class="h"><a name="176"></a>176</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="177"></a>177</td><td></td><td></td><td></td><td></td><td class="s">  '++'    =&gt;      sub { $_[0] -&gt; binc() },</td></tr>
<tr><td class="h"><a name="178"></a>178</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="179"></a>179</td><td></td><td></td><td></td><td></td><td class="s">  '--'    =&gt;      sub { $_[0] -&gt; bdec() },</td></tr>
<tr><td class="h"><a name="180"></a>180</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="181"></a>181</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: func</td></tr>
<tr><td class="h"><a name="182"></a>182</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="183"></a>183</td><td></td><td></td><td></td><td></td><td class="s">  'atan2' =&gt;      sub { $_[2] ? ref($_[0]) -&gt; new($_[1]) -&gt; batan2($_[0])</td></tr>
<tr><td class="h"><a name="184"></a>184</td><td></td><td></td><td></td><td></td><td class="s">                              : $_[0] -&gt; copy() -&gt; batan2($_[1]); },</td></tr>
<tr><td class="h"><a name="185"></a>185</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="186"></a>186</td><td></td><td></td><td></td><td></td><td class="s">  'cos'   =&gt;      sub { $_[0] -&gt; copy() -&gt; bcos(); },</td></tr>
<tr><td class="h"><a name="187"></a>187</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="188"></a>188</td><td></td><td></td><td></td><td></td><td class="s">  'sin'   =&gt;      sub { $_[0] -&gt; copy() -&gt; bsin(); },</td></tr>
<tr><td class="h"><a name="189"></a>189</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="190"></a>190</td><td></td><td></td><td></td><td></td><td class="s">  'exp'   =&gt;      sub { $_[0] -&gt; copy() -&gt; bexp($_[1]); },</td></tr>
<tr><td class="h"><a name="191"></a>191</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="192"></a>192</td><td></td><td></td><td></td><td></td><td class="s">  'abs'   =&gt;      sub { $_[0] -&gt; copy() -&gt; babs(); },</td></tr>
<tr><td class="h"><a name="193"></a>193</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="194"></a>194</td><td></td><td></td><td></td><td></td><td class="s">  'log'   =&gt;      sub { $_[0] -&gt; copy() -&gt; blog(); },</td></tr>
<tr><td class="h"><a name="195"></a>195</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="196"></a>196</td><td></td><td></td><td></td><td></td><td class="s">  'sqrt'  =&gt;      sub { $_[0] -&gt; copy() -&gt; bsqrt(); },</td></tr>
<tr><td class="h"><a name="197"></a>197</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="198"></a>198</td><td></td><td></td><td></td><td></td><td class="s">  'int'   =&gt;      sub { $_[0] -&gt; copy() -&gt; bint(); },</td></tr>
<tr><td class="h"><a name="199"></a>199</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="200"></a>200</td><td></td><td></td><td></td><td></td><td class="s">  # overload key: conversion</td></tr>
<tr><td class="h"><a name="201"></a>201</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="202"></a>202</td><td></td><td></td><td></td><td></td><td class="s">  'bool'  =&gt;      sub { $_[0] -&gt; is_zero() ? '' : 1; },</td></tr>
<tr><td class="h"><a name="203"></a>203</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="204"></a>204</td><td></td><td></td><td></td><td></td><td class="s">  '&quot;&quot;'    =&gt;      sub { $_[0] -&gt; bstr(); },</td></tr>
<tr><td class="h"><a name="205"></a>205</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="206"></a>206</td><td></td><td></td><td></td><td></td><td class="s">  '0+'    =&gt;      sub { $_[0] -&gt; numify(); },</td></tr>
<tr><td class="h"><a name="207"></a>207</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="208"></a>208</td><td></td><td></td><td></td><td></td><td class="s">  '='     =&gt;      sub { $_[0] -&gt; copy(); },</td></tr>
<tr><td class="h"><a name="209"></a>209</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="210"></a>210</td><td class="c1">2</td><td class="c0"><span title="Avg 295Âµs">589Âµs</span></td><td class="c3">2</td><td class="c0">2.07ms</td><td class="s">  ;<div class="calls"><div class="calls_out">  # spent  1.93ms making 1 call to <a href="Math-BigInt-pm-25-line.html#48">Math::BigInt::BEGIN@48</a>
  # spent   139Âµs making 1 call to <a href="overload-pm-28-line.html#56">overload::import</a></div></div></td></tr>
<tr><td class="h"><a name="211"></a>211</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="212"></a>212</td><td></td><td></td><td></td><td></td><td class="s">##############################################################################</td></tr>
<tr><td class="h"><a name="213"></a>213</td><td></td><td></td><td></td><td></td><td class="s"># global constants, flags and accessory</td></tr>
<tr><td class="h"><a name="214"></a>214</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="215"></a>215</td><td></td><td></td><td></td><td></td><td class="s"># These vars are public, but their direct usage is not recommended, use the</td></tr>
<tr><td class="h"><a name="216"></a>216</td><td></td><td></td><td></td><td></td><td class="s"># accessor methods instead</td></tr>
<tr><td class="h"><a name="217"></a>217</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="218"></a>218</td><td></td><td></td><td></td><td></td><td class="s"># $round_mode is 'even', 'odd', '+inf', '-inf', 'zero', 'trunc', or 'common'.</td></tr>
<tr><td class="h"><a name="219"></a>219</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">our $round_mode = 'even';</td></tr>
<tr><td class="h"><a name="220"></a>220</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">our $accuracy   = undef;</td></tr>
<tr><td class="h"><a name="221"></a>221</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">our $precision  = undef;</td></tr>
<tr><td class="h"><a name="222"></a>222</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">our $div_scale  = 40;</td></tr>
<tr><td class="h"><a name="223"></a>223</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">our $upgrade    = undef;                    # default is no upgrade</td></tr>
<tr><td class="h"><a name="224"></a>224</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">our $downgrade  = undef;                    # default is no downgrade</td></tr>
<tr><td class="h"><a name="225"></a>225</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="226"></a>226</td><td></td><td></td><td></td><td></td><td class="s"># These are internally, and not to be used from the outside at all</td></tr>
<tr><td class="h"><a name="227"></a>227</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="228"></a>228</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">our $_trap_nan = 0;                         # are NaNs ok? set w/ config()</td></tr>
<tr><td class="h"><a name="229"></a>229</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">our $_trap_inf = 0;                         # are infs ok? set w/ config()</td></tr>
<tr><td class="h"><a name="230"></a>230</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="231"></a>231</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $nan = 'NaN';                        # constants for easier life</td></tr>
<tr><td class="h"><a name="232"></a>232</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="233"></a>233</td><td></td><td></td><td></td><td></td><td class="s"># Module to do the low level math.</td></tr>
<tr><td class="h"><a name="234"></a>234</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="235"></a>235</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $DEFAULT_LIB = 'Math::BigInt::Calc';</td></tr>
<tr><td class="h"><a name="236"></a>236</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $LIB;</td></tr>
<tr><td class="h"><a name="237"></a>237</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="238"></a>238</td><td></td><td></td><td></td><td></td><td class="s"># Has import() been called yet? Needed to make &quot;require&quot; work.</td></tr>
<tr><td class="h"><a name="239"></a>239</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="240"></a>240</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $IMPORT = 0;</td></tr>
<tr><td class="h"><a name="241"></a>241</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="242"></a>242</td><td></td><td></td><td></td><td></td><td class="s">##############################################################################</td></tr>
<tr><td class="h"><a name="243"></a>243</td><td></td><td></td><td></td><td></td><td class="s"># the old code had $rnd_mode, so we need to support it, too</td></tr>
<tr><td class="h"><a name="244"></a>244</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="245"></a>245</td><td class="c3">1</td><td class="c1"><span title="Avg 11Âµs">11Âµs</span></td><td class="c3">1</td><td class="c1">29Âµs</td><td class="s">our $rnd_mode   = 'even';<div class="calls"><div class="calls_out"># spent    29Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#256">Math::BigInt::STORE</a></div></div></td></tr>
<tr><td class="h"><a name="246"></a>246</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="247"></a>247</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 3Âµs within Math::BigInt::TIESCALAR which was called:
#    once (3Âµs+0s) by Math::BigInt::BEGIN@260 at <a href="Math-BigInt-pm-25-line.html#262">line 262</a></div></div>sub TIESCALAR {</td></tr>
<tr><td class="h"><a name="248"></a>248</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">    my ($class) = @_;</td></tr>
<tr><td class="h"><a name="249"></a>249</td><td class="c3">1</td><td class="c3"><span title="Avg 5Âµs">5Âµs</span></td><td></td><td></td><td class="s">    bless \$round_mode, $class;</td></tr>
<tr><td class="h"><a name="250"></a>250</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="251"></a>251</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="252"></a>252</td><td></td><td></td><td></td><td></td><td class="s">sub FETCH {</td></tr>
<tr><td class="h"><a name="253"></a>253</td><td></td><td></td><td></td><td></td><td class="s">    return $round_mode;</td></tr>
<tr><td class="h"><a name="254"></a>254</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="255"></a>255</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="256"></a>256</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 29Âµs (7+22) within Math::BigInt::STORE which was called:
#    once (7Âµs+22Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#245">line 245</a></div></div>sub STORE {</td></tr>
<tr><td class="h"><a name="257"></a>257</td><td class="c3">1</td><td class="c3"><span title="Avg 5Âµs">5Âµs</span></td><td class="c3">1</td><td class="c3">22Âµs</td><td class="s">    $rnd_mode = $_[0]-&gt;round_mode($_[1]);<div class="calls"><div class="calls_out">    # spent    22Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#274">Math::BigInt::round_mode</a></div></div></td></tr>
<tr><td class="h"><a name="258"></a>258</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="259"></a>259</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="260"></a>260</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 23Âµs (20+3) within Math::BigInt::BEGIN@260 which was called:
#    once (20Âµs+3Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#268">line 268</a></div></div>BEGIN {</td></tr>
<tr><td class="h"><a name="261"></a>261</td><td></td><td></td><td></td><td></td><td class="s">    # tie to enable $rnd_mode to work transparently</td></tr>
<tr><td class="h"><a name="262"></a>262</td><td class="c3">1</td><td class="c1"><span title="Avg 12Âµs">12Âµs</span></td><td class="c3">1</td><td class="c3">3Âµs</td><td class="s">    tie $rnd_mode, 'Math::BigInt';<div class="calls"><div class="calls_out">    # spent     3Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#247">Math::BigInt::TIESCALAR</a></div></div></td></tr>
<tr><td class="h"><a name="263"></a>263</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="264"></a>264</td><td></td><td></td><td></td><td></td><td class="s">    # set up some handy alias names</td></tr>
<tr><td class="h"><a name="265"></a>265</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">    *is_pos = \&amp;is_positive;</td></tr>
<tr><td class="h"><a name="266"></a>266</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">    *is_neg = \&amp;is_negative;</td></tr>
<tr><td class="h"><a name="267"></a>267</td><td class="c3">1</td><td class="c3"><span title="Avg 6Âµs">6Âµs</span></td><td></td><td></td><td class="s">    *as_number = \&amp;as_int;</td></tr>
<tr><td class="h"><a name="268"></a>268</td><td class="c3">1</td><td class="c0"><span title="Avg 165Âµs">165Âµs</span></td><td class="c3">1</td><td class="c3">23Âµs</td><td class="s">}<div class="calls"><div class="calls_out"># spent    23Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#260">Math::BigInt::BEGIN@260</a></div></div></td></tr>
<tr><td class="h"><a name="269"></a>269</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="270"></a>270</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="271"></a>271</td><td></td><td></td><td></td><td></td><td class="s"># Configuration methods</td></tr>
<tr><td class="h"><a name="272"></a>272</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="273"></a>273</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="274"></a>274</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 22Âµs (17+5) within Math::BigInt::round_mode which was called:
#    once (17Âµs+5Âµs) by Math::BigInt::STORE at <a href="Math-BigInt-pm-25-line.html#257">line 257</a></div></div>sub round_mode {</td></tr>
<tr><td class="h"><a name="275"></a>275</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">    my $self = shift;</td></tr>
<tr><td class="h"><a name="276"></a>276</td><td class="c3">1</td><td class="c3"><span title="Avg 2Âµs">2Âµs</span></td><td></td><td></td><td class="s">    my $class = ref($self) || $self || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="277"></a>277</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="278"></a>278</td><td class="c3">1</td><td class="c3"><span title="Avg 4Âµs">4Âµs</span></td><td></td><td></td><td class="s">    if (@_) {                           # setter</td></tr>
<tr><td class="h"><a name="279"></a>279</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">        my $m = shift;</td></tr>
<tr><td class="h"><a name="280"></a>280</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">        croak(&quot;The value for 'round_mode' must be defined&quot;)</td></tr>
<tr><td class="h"><a name="281"></a>281</td><td></td><td></td><td></td><td></td><td class="s">          unless defined $m;</td></tr>
<tr><td class="h"><a name="282"></a>282</td><td class="c3">1</td><td class="c1"><span title="Avg 14Âµs">14Âµs</span></td><td class="c3">1</td><td class="c3">5Âµs</td><td class="s">        croak(&quot;Unknown round mode '$m'&quot;)<div class="calls"><div class="calls_out">        # spent     5Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#Math__BigInt__CORE_match">Math::BigInt::CORE:match</a></div></div></td></tr>
<tr><td class="h"><a name="283"></a>283</td><td></td><td></td><td></td><td></td><td class="s">          unless $m =~ /^(even|odd|\+inf|\-inf|zero|trunc|common)$/;</td></tr>
<tr><td class="h"><a name="284"></a>284</td><td class="c1">2</td><td class="c0"><span title="Avg 34Âµs">68Âµs</span></td><td class="c3">2</td><td class="c1">30Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 21Âµs (12+9) within Math::BigInt::BEGIN@284 which was called:
#    once (12Âµs+9Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#284">line 284</a></div></div>        no strict 'refs';<div class="calls"><div class="calls_out">        # spent    21Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#284">Math::BigInt::BEGIN@284</a>
        # spent     9Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="285"></a>285</td><td class="c3">1</td><td class="c3"><span title="Avg 3Âµs">3Âµs</span></td><td></td><td></td><td class="s">        ${&quot;${class}::round_mode&quot;} = $m;</td></tr>
<tr><td class="h"><a name="286"></a>286</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="287"></a>287</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="288"></a>288</td><td></td><td></td><td></td><td></td><td class="s">    else {                              # getter</td></tr>
<tr><td class="h"><a name="289"></a>289</td><td class="c1">2</td><td class="c0"><span title="Avg 38Âµs">75Âµs</span></td><td class="c3">2</td><td class="c3">15Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 12Âµs (9+3) within Math::BigInt::BEGIN@289 which was called:
#    once (9Âµs+3Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#289">line 289</a></div></div>        no strict 'refs';<div class="calls"><div class="calls_out">        # spent    12Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#289">Math::BigInt::BEGIN@289</a>
        # spent     3Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="290"></a>290</td><td></td><td></td><td></td><td></td><td class="s">        my $m = ${&quot;${class}::round_mode&quot;};</td></tr>
<tr><td class="h"><a name="291"></a>291</td><td></td><td></td><td></td><td></td><td class="s">        defined($m) ? $m : $round_mode;</td></tr>
<tr><td class="h"><a name="292"></a>292</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="293"></a>293</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="294"></a>294</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="295"></a>295</td><td></td><td></td><td></td><td></td><td class="s">sub upgrade {</td></tr>
<tr><td class="h"><a name="296"></a>296</td><td class="c1">2</td><td class="c0"><span title="Avg 46Âµs">92Âµs</span></td><td class="c3">2</td><td class="c3">15Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 11Âµs (7+4) within Math::BigInt::BEGIN@296 which was called:
#    once (7Âµs+4Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#296">line 296</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    11Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#296">Math::BigInt::BEGIN@296</a>
    # spent     4Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="297"></a>297</td><td></td><td></td><td></td><td></td><td class="s">    # make Class-&gt;upgrade() work</td></tr>
<tr><td class="h"><a name="298"></a>298</td><td></td><td></td><td></td><td></td><td class="s">    my $self = shift;</td></tr>
<tr><td class="h"><a name="299"></a>299</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($self) || $self || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="300"></a>300</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="301"></a>301</td><td></td><td></td><td></td><td></td><td class="s">    # need to set new value?</td></tr>
<tr><td class="h"><a name="302"></a>302</td><td></td><td></td><td></td><td></td><td class="s">    if (@_ &gt; 0) {</td></tr>
<tr><td class="h"><a name="303"></a>303</td><td></td><td></td><td></td><td></td><td class="s">        return ${&quot;${class}::upgrade&quot;} = $_[0];</td></tr>
<tr><td class="h"><a name="304"></a>304</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="305"></a>305</td><td></td><td></td><td></td><td></td><td class="s">    ${&quot;${class}::upgrade&quot;};</td></tr>
<tr><td class="h"><a name="306"></a>306</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="307"></a>307</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="308"></a>308</td><td></td><td></td><td></td><td></td><td class="s">sub downgrade {</td></tr>
<tr><td class="h"><a name="309"></a>309</td><td class="c1">2</td><td class="c0"><span title="Avg 70Âµs">140Âµs</span></td><td class="c3">2</td><td class="c3">19Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 16Âµs (13+3) within Math::BigInt::BEGIN@309 which was called:
#    once (13Âµs+3Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#309">line 309</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    16Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#309">Math::BigInt::BEGIN@309</a>
    # spent     3Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="310"></a>310</td><td></td><td></td><td></td><td></td><td class="s">    # make Class-&gt;downgrade() work</td></tr>
<tr><td class="h"><a name="311"></a>311</td><td></td><td></td><td></td><td></td><td class="s">    my $self = shift;</td></tr>
<tr><td class="h"><a name="312"></a>312</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($self) || $self || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="313"></a>313</td><td></td><td></td><td></td><td></td><td class="s">    # need to set new value?</td></tr>
<tr><td class="h"><a name="314"></a>314</td><td></td><td></td><td></td><td></td><td class="s">    if (@_ &gt; 0) {</td></tr>
<tr><td class="h"><a name="315"></a>315</td><td></td><td></td><td></td><td></td><td class="s">        return ${&quot;${class}::downgrade&quot;} = $_[0];</td></tr>
<tr><td class="h"><a name="316"></a>316</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="317"></a>317</td><td></td><td></td><td></td><td></td><td class="s">    ${&quot;${class}::downgrade&quot;};</td></tr>
<tr><td class="h"><a name="318"></a>318</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="319"></a>319</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="320"></a>320</td><td></td><td></td><td></td><td></td><td class="s">sub div_scale {</td></tr>
<tr><td class="h"><a name="321"></a>321</td><td></td><td></td><td></td><td></td><td class="s">    my $self = shift;</td></tr>
<tr><td class="h"><a name="322"></a>322</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($self) || $self || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="323"></a>323</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="324"></a>324</td><td></td><td></td><td></td><td></td><td class="s">    if (@_) {                           # setter</td></tr>
<tr><td class="h"><a name="325"></a>325</td><td></td><td></td><td></td><td></td><td class="s">        my $ds = shift;</td></tr>
<tr><td class="h"><a name="326"></a>326</td><td></td><td></td><td></td><td></td><td class="s">        croak(&quot;The value for 'div_scale' must be defined&quot;) unless defined $ds;</td></tr>
<tr><td class="h"><a name="327"></a>327</td><td></td><td></td><td></td><td></td><td class="s">        croak(&quot;The value for 'div_scale' must be positive&quot;) unless $ds &gt; 0;</td></tr>
<tr><td class="h"><a name="328"></a>328</td><td></td><td></td><td></td><td></td><td class="s">        $ds = $ds -&gt; numify() if defined(blessed($ds));</td></tr>
<tr><td class="h"><a name="329"></a>329</td><td class="c1">2</td><td class="c0"><span title="Avg 23Âµs">46Âµs</span></td><td class="c3">2</td><td class="c3">16Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 12Âµs (8+4) within Math::BigInt::BEGIN@329 which was called:
#    once (8Âµs+4Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#329">line 329</a></div></div>        no strict 'refs';<div class="calls"><div class="calls_out">        # spent    12Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#329">Math::BigInt::BEGIN@329</a>
        # spent     4Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="330"></a>330</td><td></td><td></td><td></td><td></td><td class="s">        ${&quot;${class}::div_scale&quot;} = $ds;</td></tr>
<tr><td class="h"><a name="331"></a>331</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="332"></a>332</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="333"></a>333</td><td></td><td></td><td></td><td></td><td class="s">    else {                              # getter</td></tr>
<tr><td class="h"><a name="334"></a>334</td><td class="c1">2</td><td class="c0"><span title="Avg 40Âµs">81Âµs</span></td><td class="c3">2</td><td class="c3">17Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 14Âµs (11+3) within Math::BigInt::BEGIN@334 which was called:
#    once (11Âµs+3Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#334">line 334</a></div></div>        no strict 'refs';<div class="calls"><div class="calls_out">        # spent    14Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#334">Math::BigInt::BEGIN@334</a>
        # spent     3Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="335"></a>335</td><td></td><td></td><td></td><td></td><td class="s">        my $ds = ${&quot;${class}::div_scale&quot;};</td></tr>
<tr><td class="h"><a name="336"></a>336</td><td></td><td></td><td></td><td></td><td class="s">        defined($ds) ? $ds : $div_scale;</td></tr>
<tr><td class="h"><a name="337"></a>337</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="338"></a>338</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="339"></a>339</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="340"></a>340</td><td></td><td></td><td></td><td></td><td class="s">sub accuracy {</td></tr>
<tr><td class="h"><a name="341"></a>341</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;accuracy($a);           ref($x) $a</td></tr>
<tr><td class="h"><a name="342"></a>342</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;accuracy();             ref($x)</td></tr>
<tr><td class="h"><a name="343"></a>343</td><td></td><td></td><td></td><td></td><td class="s">    # Class-&gt;accuracy();          class</td></tr>
<tr><td class="h"><a name="344"></a>344</td><td></td><td></td><td></td><td></td><td class="s">    # Class-&gt;accuracy($a);        class $a</td></tr>
<tr><td class="h"><a name="345"></a>345</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="346"></a>346</td><td></td><td></td><td></td><td></td><td class="s">    my $x = shift;</td></tr>
<tr><td class="h"><a name="347"></a>347</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($x) || $x || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="348"></a>348</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="349"></a>349</td><td class="c1">2</td><td class="c0"><span title="Avg 110Âµs">221Âµs</span></td><td class="c3">2</td><td class="c3">14Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 11Âµs (8+3) within Math::BigInt::BEGIN@349 which was called:
#    once (8Âµs+3Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#349">line 349</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    11Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#349">Math::BigInt::BEGIN@349</a>
    # spent     3Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="350"></a>350</td><td></td><td></td><td></td><td></td><td class="s">    if (@_ &gt; 0) {</td></tr>
<tr><td class="h"><a name="351"></a>351</td><td></td><td></td><td></td><td></td><td class="s">        my $a = shift;</td></tr>
<tr><td class="h"><a name="352"></a>352</td><td></td><td></td><td></td><td></td><td class="s">        if (defined $a) {</td></tr>
<tr><td class="h"><a name="353"></a>353</td><td></td><td></td><td></td><td></td><td class="s">            $a = $a-&gt;numify() if ref($a) &amp;&amp; $a-&gt;can('numify');</td></tr>
<tr><td class="h"><a name="354"></a>354</td><td></td><td></td><td></td><td></td><td class="s">            # also croak on non-numerical</td></tr>
<tr><td class="h"><a name="355"></a>355</td><td></td><td></td><td></td><td></td><td class="s">            if (!$a || $a &lt;= 0) {</td></tr>
<tr><td class="h"><a name="356"></a>356</td><td></td><td></td><td></td><td></td><td class="s">                croak('Argument to accuracy must be greater than zero');</td></tr>
<tr><td class="h"><a name="357"></a>357</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="358"></a>358</td><td></td><td></td><td></td><td></td><td class="s">            if (int($a) != $a) {</td></tr>
<tr><td class="h"><a name="359"></a>359</td><td></td><td></td><td></td><td></td><td class="s">                croak('Argument to accuracy must be an integer');</td></tr>
<tr><td class="h"><a name="360"></a>360</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="361"></a>361</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="362"></a>362</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="363"></a>363</td><td></td><td></td><td></td><td></td><td class="s">        if (ref($x)) {</td></tr>
<tr><td class="h"><a name="364"></a>364</td><td></td><td></td><td></td><td></td><td class="s">            # Set instance variable.</td></tr>
<tr><td class="h"><a name="365"></a>365</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x-&gt;bround($a) if $a; # not for undef, 0</td></tr>
<tr><td class="h"><a name="366"></a>366</td><td></td><td></td><td></td><td></td><td class="s">            $x-&gt;{_a} = $a;        # set/overwrite, even if not rounded</td></tr>
<tr><td class="h"><a name="367"></a>367</td><td></td><td></td><td></td><td></td><td class="s">            delete $x-&gt;{_p};      # clear P</td></tr>
<tr><td class="h"><a name="368"></a>368</td><td></td><td></td><td></td><td></td><td class="s">            # Why return class variable here? Fixme!</td></tr>
<tr><td class="h"><a name="369"></a>369</td><td></td><td></td><td></td><td></td><td class="s">            $a = ${&quot;${class}::accuracy&quot;} unless defined $a;</td></tr>
<tr><td class="h"><a name="370"></a>370</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="371"></a>371</td><td></td><td></td><td></td><td></td><td class="s">            # Set class variable.</td></tr>
<tr><td class="h"><a name="372"></a>372</td><td></td><td></td><td></td><td></td><td class="s">            ${&quot;${class}::accuracy&quot;} = $a; # set global A</td></tr>
<tr><td class="h"><a name="373"></a>373</td><td></td><td></td><td></td><td></td><td class="s">            ${&quot;${class}::precision&quot;} = undef; # clear global P</td></tr>
<tr><td class="h"><a name="374"></a>374</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="375"></a>375</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="376"></a>376</td><td></td><td></td><td></td><td></td><td class="s">        return $a;              # shortcut</td></tr>
<tr><td class="h"><a name="377"></a>377</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="378"></a>378</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="379"></a>379</td><td></td><td></td><td></td><td></td><td class="s">    # Return instance variable.</td></tr>
<tr><td class="h"><a name="380"></a>380</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{_a} if ref($x) &amp;&amp; (defined($x-&gt;{_a}) || defined($x-&gt;{_p}));</td></tr>
<tr><td class="h"><a name="381"></a>381</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="382"></a>382</td><td></td><td></td><td></td><td></td><td class="s">    # Return class variable.</td></tr>
<tr><td class="h"><a name="383"></a>383</td><td></td><td></td><td></td><td></td><td class="s">    return ${&quot;${class}::accuracy&quot;};</td></tr>
<tr><td class="h"><a name="384"></a>384</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="385"></a>385</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="386"></a>386</td><td></td><td></td><td></td><td></td><td class="s">sub precision {</td></tr>
<tr><td class="h"><a name="387"></a>387</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;precision($p);          ref($x) $p</td></tr>
<tr><td class="h"><a name="388"></a>388</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;precision();            ref($x)</td></tr>
<tr><td class="h"><a name="389"></a>389</td><td></td><td></td><td></td><td></td><td class="s">    # Class-&gt;precision();         class</td></tr>
<tr><td class="h"><a name="390"></a>390</td><td></td><td></td><td></td><td></td><td class="s">    # Class-&gt;precision($p);       class $p</td></tr>
<tr><td class="h"><a name="391"></a>391</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="392"></a>392</td><td></td><td></td><td></td><td></td><td class="s">    my $x = shift;</td></tr>
<tr><td class="h"><a name="393"></a>393</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($x) || $x || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="394"></a>394</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="395"></a>395</td><td class="c1">2</td><td class="c0"><span title="Avg 98Âµs">196Âµs</span></td><td class="c3">2</td><td class="c3">15Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 11Âµs (7+4) within Math::BigInt::BEGIN@395 which was called:
#    once (7Âµs+4Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#395">line 395</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    11Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#395">Math::BigInt::BEGIN@395</a>
    # spent     4Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="396"></a>396</td><td></td><td></td><td></td><td></td><td class="s">    if (@_ &gt; 0) {</td></tr>
<tr><td class="h"><a name="397"></a>397</td><td></td><td></td><td></td><td></td><td class="s">        my $p = shift;</td></tr>
<tr><td class="h"><a name="398"></a>398</td><td></td><td></td><td></td><td></td><td class="s">        if (defined $p) {</td></tr>
<tr><td class="h"><a name="399"></a>399</td><td></td><td></td><td></td><td></td><td class="s">            $p = $p-&gt;numify() if ref($p) &amp;&amp; $p-&gt;can('numify');</td></tr>
<tr><td class="h"><a name="400"></a>400</td><td></td><td></td><td></td><td></td><td class="s">            if ($p != int $p) {</td></tr>
<tr><td class="h"><a name="401"></a>401</td><td></td><td></td><td></td><td></td><td class="s">                croak('Argument to precision must be an integer');</td></tr>
<tr><td class="h"><a name="402"></a>402</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="403"></a>403</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="404"></a>404</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="405"></a>405</td><td></td><td></td><td></td><td></td><td class="s">        if (ref($x)) {</td></tr>
<tr><td class="h"><a name="406"></a>406</td><td></td><td></td><td></td><td></td><td class="s">            # Set instance variable.</td></tr>
<tr><td class="h"><a name="407"></a>407</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x-&gt;bfround($p) if $p; # not for undef, 0</td></tr>
<tr><td class="h"><a name="408"></a>408</td><td></td><td></td><td></td><td></td><td class="s">            $x-&gt;{_p} = $p;         # set/overwrite, even if not rounded</td></tr>
<tr><td class="h"><a name="409"></a>409</td><td></td><td></td><td></td><td></td><td class="s">            delete $x-&gt;{_a};       # clear A</td></tr>
<tr><td class="h"><a name="410"></a>410</td><td></td><td></td><td></td><td></td><td class="s">            # Why return class variable here? Fixme!</td></tr>
<tr><td class="h"><a name="411"></a>411</td><td></td><td></td><td></td><td></td><td class="s">            $p = ${&quot;${class}::precision&quot;} unless defined $p;</td></tr>
<tr><td class="h"><a name="412"></a>412</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="413"></a>413</td><td></td><td></td><td></td><td></td><td class="s">            # Set class variable.</td></tr>
<tr><td class="h"><a name="414"></a>414</td><td></td><td></td><td></td><td></td><td class="s">            ${&quot;${class}::precision&quot;} = $p; # set global P</td></tr>
<tr><td class="h"><a name="415"></a>415</td><td></td><td></td><td></td><td></td><td class="s">            ${&quot;${class}::accuracy&quot;} = undef; # clear global A</td></tr>
<tr><td class="h"><a name="416"></a>416</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="417"></a>417</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="418"></a>418</td><td></td><td></td><td></td><td></td><td class="s">        return $p;              # shortcut</td></tr>
<tr><td class="h"><a name="419"></a>419</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="420"></a>420</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="421"></a>421</td><td></td><td></td><td></td><td></td><td class="s">    # Return instance variable.</td></tr>
<tr><td class="h"><a name="422"></a>422</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{_p} if ref($x) &amp;&amp; (defined($x-&gt;{_a}) || defined($x-&gt;{_p}));</td></tr>
<tr><td class="h"><a name="423"></a>423</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="424"></a>424</td><td></td><td></td><td></td><td></td><td class="s">    # Return class variable.</td></tr>
<tr><td class="h"><a name="425"></a>425</td><td></td><td></td><td></td><td></td><td class="s">    return ${&quot;${class}::precision&quot;};</td></tr>
<tr><td class="h"><a name="426"></a>426</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="427"></a>427</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="428"></a>428</td><td></td><td></td><td></td><td></td><td class="s">sub config {</td></tr>
<tr><td class="h"><a name="429"></a>429</td><td></td><td></td><td></td><td></td><td class="s">    # return (or set) configuration data.</td></tr>
<tr><td class="h"><a name="430"></a>430</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift || __PACKAGE__;</td></tr>
<tr><td class="h"><a name="431"></a>431</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="432"></a>432</td><td class="c1">2</td><td class="c0"><span title="Avg 193Âµs">385Âµs</span></td><td class="c3">2</td><td class="c3">18Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 14Âµs (10+4) within Math::BigInt::BEGIN@432 which was called:
#    once (10Âµs+4Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#432">line 432</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    14Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#432">Math::BigInt::BEGIN@432</a>
    # spent     4Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="433"></a>433</td><td></td><td></td><td></td><td></td><td class="s">    if (@_ &gt; 1 || (@_ == 1 &amp;&amp; (ref($_[0]) eq 'HASH'))) {</td></tr>
<tr><td class="h"><a name="434"></a>434</td><td></td><td></td><td></td><td></td><td class="s">        # try to set given options as arguments from hash</td></tr>
<tr><td class="h"><a name="435"></a>435</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="436"></a>436</td><td></td><td></td><td></td><td></td><td class="s">        my $args = $_[0];</td></tr>
<tr><td class="h"><a name="437"></a>437</td><td></td><td></td><td></td><td></td><td class="s">        if (ref($args) ne 'HASH') {</td></tr>
<tr><td class="h"><a name="438"></a>438</td><td></td><td></td><td></td><td></td><td class="s">            $args = { @_ };</td></tr>
<tr><td class="h"><a name="439"></a>439</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="440"></a>440</td><td></td><td></td><td></td><td></td><td class="s">        # these values can be &quot;set&quot;</td></tr>
<tr><td class="h"><a name="441"></a>441</td><td></td><td></td><td></td><td></td><td class="s">        my $set_args = {};</td></tr>
<tr><td class="h"><a name="442"></a>442</td><td></td><td></td><td></td><td></td><td class="s">        foreach my $key (qw/</td></tr>
<tr><td class="h"><a name="443"></a>443</td><td></td><td></td><td></td><td></td><td class="s">                               accuracy precision</td></tr>
<tr><td class="h"><a name="444"></a>444</td><td></td><td></td><td></td><td></td><td class="s">                               round_mode div_scale</td></tr>
<tr><td class="h"><a name="445"></a>445</td><td></td><td></td><td></td><td></td><td class="s">                               upgrade downgrade</td></tr>
<tr><td class="h"><a name="446"></a>446</td><td></td><td></td><td></td><td></td><td class="s">                               trap_inf trap_nan</td></tr>
<tr><td class="h"><a name="447"></a>447</td><td></td><td></td><td></td><td></td><td class="s">                           /)</td></tr>
<tr><td class="h"><a name="448"></a>448</td><td></td><td></td><td></td><td></td><td class="s">        {</td></tr>
<tr><td class="h"><a name="449"></a>449</td><td></td><td></td><td></td><td></td><td class="s">            $set_args-&gt;{$key} = $args-&gt;{$key} if exists $args-&gt;{$key};</td></tr>
<tr><td class="h"><a name="450"></a>450</td><td></td><td></td><td></td><td></td><td class="s">            delete $args-&gt;{$key};</td></tr>
<tr><td class="h"><a name="451"></a>451</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="452"></a>452</td><td></td><td></td><td></td><td></td><td class="s">        if (keys %$args &gt; 0) {</td></tr>
<tr><td class="h"><a name="453"></a>453</td><td></td><td></td><td></td><td></td><td class="s">            croak(&quot;Illegal key(s) '&quot;, join(&quot;', '&quot;, keys %$args),</td></tr>
<tr><td class="h"><a name="454"></a>454</td><td></td><td></td><td></td><td></td><td class="s">                        &quot;' passed to $class\-&gt;config()&quot;);</td></tr>
<tr><td class="h"><a name="455"></a>455</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="456"></a>456</td><td></td><td></td><td></td><td></td><td class="s">        foreach my $key (keys %$set_args) {</td></tr>
<tr><td class="h"><a name="457"></a>457</td><td></td><td></td><td></td><td></td><td class="s">            if ($key =~ /^trap_(inf|nan)\z/) {</td></tr>
<tr><td class="h"><a name="458"></a>458</td><td></td><td></td><td></td><td></td><td class="s">                ${&quot;${class}::_trap_$1&quot;} = ($set_args-&gt;{&quot;trap_$1&quot;} ? 1 : 0);</td></tr>
<tr><td class="h"><a name="459"></a>459</td><td></td><td></td><td></td><td></td><td class="s">                next;</td></tr>
<tr><td class="h"><a name="460"></a>460</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="461"></a>461</td><td></td><td></td><td></td><td></td><td class="s">            # use a call instead of just setting the $variable to check argument</td></tr>
<tr><td class="h"><a name="462"></a>462</td><td></td><td></td><td></td><td></td><td class="s">            $class-&gt;$key($set_args-&gt;{$key});</td></tr>
<tr><td class="h"><a name="463"></a>463</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="464"></a>464</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="465"></a>465</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="466"></a>466</td><td></td><td></td><td></td><td></td><td class="s">    # now return actual configuration</td></tr>
<tr><td class="h"><a name="467"></a>467</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="468"></a>468</td><td></td><td></td><td></td><td></td><td class="s">    my $cfg = {</td></tr>
<tr><td class="h"><a name="469"></a>469</td><td></td><td></td><td></td><td></td><td class="s">               lib         =&gt; $LIB,</td></tr>
<tr><td class="h"><a name="470"></a>470</td><td></td><td></td><td></td><td></td><td class="s">               lib_version =&gt; ${&quot;${LIB}::VERSION&quot;},</td></tr>
<tr><td class="h"><a name="471"></a>471</td><td></td><td></td><td></td><td></td><td class="s">               class       =&gt; $class,</td></tr>
<tr><td class="h"><a name="472"></a>472</td><td></td><td></td><td></td><td></td><td class="s">               trap_nan    =&gt; ${&quot;${class}::_trap_nan&quot;},</td></tr>
<tr><td class="h"><a name="473"></a>473</td><td></td><td></td><td></td><td></td><td class="s">               trap_inf    =&gt; ${&quot;${class}::_trap_inf&quot;},</td></tr>
<tr><td class="h"><a name="474"></a>474</td><td></td><td></td><td></td><td></td><td class="s">               version     =&gt; ${&quot;${class}::VERSION&quot;},</td></tr>
<tr><td class="h"><a name="475"></a>475</td><td></td><td></td><td></td><td></td><td class="s">              };</td></tr>
<tr><td class="h"><a name="476"></a>476</td><td></td><td></td><td></td><td></td><td class="s">    foreach my $key (qw/</td></tr>
<tr><td class="h"><a name="477"></a>477</td><td></td><td></td><td></td><td></td><td class="s">                           accuracy precision</td></tr>
<tr><td class="h"><a name="478"></a>478</td><td></td><td></td><td></td><td></td><td class="s">                           round_mode div_scale</td></tr>
<tr><td class="h"><a name="479"></a>479</td><td></td><td></td><td></td><td></td><td class="s">                           upgrade downgrade</td></tr>
<tr><td class="h"><a name="480"></a>480</td><td></td><td></td><td></td><td></td><td class="s">                       /)</td></tr>
<tr><td class="h"><a name="481"></a>481</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="482"></a>482</td><td></td><td></td><td></td><td></td><td class="s">        $cfg-&gt;{$key} = ${&quot;${class}::$key&quot;};</td></tr>
<tr><td class="h"><a name="483"></a>483</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="484"></a>484</td><td></td><td></td><td></td><td></td><td class="s">    if (@_ == 1 &amp;&amp; (ref($_[0]) ne 'HASH')) {</td></tr>
<tr><td class="h"><a name="485"></a>485</td><td></td><td></td><td></td><td></td><td class="s">        # calls of the style config('lib') return just this value</td></tr>
<tr><td class="h"><a name="486"></a>486</td><td></td><td></td><td></td><td></td><td class="s">        return $cfg-&gt;{$_[0]};</td></tr>
<tr><td class="h"><a name="487"></a>487</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="488"></a>488</td><td></td><td></td><td></td><td></td><td class="s">    $cfg;</td></tr>
<tr><td class="h"><a name="489"></a>489</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="490"></a>490</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="491"></a>491</td><td></td><td></td><td></td><td></td><td class="s">sub _scale_a {</td></tr>
<tr><td class="h"><a name="492"></a>492</td><td></td><td></td><td></td><td></td><td class="s">    # select accuracy parameter based on precedence,</td></tr>
<tr><td class="h"><a name="493"></a>493</td><td></td><td></td><td></td><td></td><td class="s">    # used by bround() and bfround(), may return undef for scale (means no op)</td></tr>
<tr><td class="h"><a name="494"></a>494</td><td></td><td></td><td></td><td></td><td class="s">    my ($x, $scale, $mode) = @_;</td></tr>
<tr><td class="h"><a name="495"></a>495</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="496"></a>496</td><td></td><td></td><td></td><td></td><td class="s">    $scale = $x-&gt;{_a} unless defined $scale;</td></tr>
<tr><td class="h"><a name="497"></a>497</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="498"></a>498</td><td class="c1">2</td><td class="c0"><span title="Avg 70Âµs">139Âµs</span></td><td class="c3">2</td><td class="c3">19Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 14Âµs (9+5) within Math::BigInt::BEGIN@498 which was called:
#    once (9Âµs+5Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#498">line 498</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    14Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#498">Math::BigInt::BEGIN@498</a>
    # spent     5Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="499"></a>499</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($x);</td></tr>
<tr><td class="h"><a name="500"></a>500</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="501"></a>501</td><td></td><td></td><td></td><td></td><td class="s">    $scale = ${ $class . '::accuracy' } unless defined $scale;</td></tr>
<tr><td class="h"><a name="502"></a>502</td><td></td><td></td><td></td><td></td><td class="s">    $mode = ${ $class . '::round_mode' } unless defined $mode;</td></tr>
<tr><td class="h"><a name="503"></a>503</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="504"></a>504</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $scale) {</td></tr>
<tr><td class="h"><a name="505"></a>505</td><td></td><td></td><td></td><td></td><td class="s">        $scale = $scale-&gt;can('numify') ? $scale-&gt;numify()</td></tr>
<tr><td class="h"><a name="506"></a>506</td><td></td><td></td><td></td><td></td><td class="s">                                       : &quot;$scale&quot; if ref($scale);</td></tr>
<tr><td class="h"><a name="507"></a>507</td><td></td><td></td><td></td><td></td><td class="s">        $scale = int($scale);</td></tr>
<tr><td class="h"><a name="508"></a>508</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="509"></a>509</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="510"></a>510</td><td></td><td></td><td></td><td></td><td class="s">    ($scale, $mode);</td></tr>
<tr><td class="h"><a name="511"></a>511</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="512"></a>512</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="513"></a>513</td><td></td><td></td><td></td><td></td><td class="s">sub _scale_p {</td></tr>
<tr><td class="h"><a name="514"></a>514</td><td></td><td></td><td></td><td></td><td class="s">    # select precision parameter based on precedence,</td></tr>
<tr><td class="h"><a name="515"></a>515</td><td></td><td></td><td></td><td></td><td class="s">    # used by bround() and bfround(), may return undef for scale (means no op)</td></tr>
<tr><td class="h"><a name="516"></a>516</td><td></td><td></td><td></td><td></td><td class="s">    my ($x, $scale, $mode) = @_;</td></tr>
<tr><td class="h"><a name="517"></a>517</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="518"></a>518</td><td></td><td></td><td></td><td></td><td class="s">    $scale = $x-&gt;{_p} unless defined $scale;</td></tr>
<tr><td class="h"><a name="519"></a>519</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="520"></a>520</td><td class="c1">2</td><td class="c0"><span title="Avg 1.35ms">2.70ms</span></td><td class="c3">2</td><td class="c3">15Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 11Âµs (7+4) within Math::BigInt::BEGIN@520 which was called:
#    once (7Âµs+4Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#520">line 520</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    11Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#520">Math::BigInt::BEGIN@520</a>
    # spent     4Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="521"></a>521</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($x);</td></tr>
<tr><td class="h"><a name="522"></a>522</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="523"></a>523</td><td></td><td></td><td></td><td></td><td class="s">    $scale = ${ $class . '::precision' } unless defined $scale;</td></tr>
<tr><td class="h"><a name="524"></a>524</td><td></td><td></td><td></td><td></td><td class="s">    $mode = ${ $class . '::round_mode' } unless defined $mode;</td></tr>
<tr><td class="h"><a name="525"></a>525</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="526"></a>526</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $scale) {</td></tr>
<tr><td class="h"><a name="527"></a>527</td><td></td><td></td><td></td><td></td><td class="s">        $scale = $scale-&gt;can('numify') ? $scale-&gt;numify()</td></tr>
<tr><td class="h"><a name="528"></a>528</td><td></td><td></td><td></td><td></td><td class="s">                                       : &quot;$scale&quot; if ref($scale);</td></tr>
<tr><td class="h"><a name="529"></a>529</td><td></td><td></td><td></td><td></td><td class="s">        $scale = int($scale);</td></tr>
<tr><td class="h"><a name="530"></a>530</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="531"></a>531</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="532"></a>532</td><td></td><td></td><td></td><td></td><td class="s">    ($scale, $mode);</td></tr>
<tr><td class="h"><a name="533"></a>533</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="534"></a>534</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="535"></a>535</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="536"></a>536</td><td></td><td></td><td></td><td></td><td class="s"># Constructor methods</td></tr>
<tr><td class="h"><a name="537"></a>537</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="538"></a>538</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="539"></a>539</td><td></td><td></td><td></td><td></td><td class="s">sub new {</td></tr>
<tr><td class="h"><a name="540"></a>540</td><td></td><td></td><td></td><td></td><td class="s">    # Create a new Math::BigInt object from a string or another Math::BigInt</td></tr>
<tr><td class="h"><a name="541"></a>541</td><td></td><td></td><td></td><td></td><td class="s">    # object. See hash keys documented at top.</td></tr>
<tr><td class="h"><a name="542"></a>542</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="543"></a>543</td><td></td><td></td><td></td><td></td><td class="s">    # The argument could be an object, so avoid ||, &amp;&amp; etc. on it. This would</td></tr>
<tr><td class="h"><a name="544"></a>544</td><td></td><td></td><td></td><td></td><td class="s">    # cause costly overloaded code to be called. The only allowed ops are ref()</td></tr>
<tr><td class="h"><a name="545"></a>545</td><td></td><td></td><td></td><td></td><td class="s">    # and defined.</td></tr>
<tr><td class="h"><a name="546"></a>546</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="547"></a>547</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="548"></a>548</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="549"></a>549</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="550"></a>550</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="551"></a>551</td><td></td><td></td><td></td><td></td><td class="s">    # Make &quot;require&quot; work.</td></tr>
<tr><td class="h"><a name="552"></a>552</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="553"></a>553</td><td></td><td></td><td></td><td></td><td class="s">    $class -&gt; import() if $IMPORT == 0;</td></tr>
<tr><td class="h"><a name="554"></a>554</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="555"></a>555</td><td></td><td></td><td></td><td></td><td class="s">    # Calling new() with no input arguments has been discouraged for more than</td></tr>
<tr><td class="h"><a name="556"></a>556</td><td></td><td></td><td></td><td></td><td class="s">    # 10 years, but people apparently still use it, so we still support it.</td></tr>
<tr><td class="h"><a name="557"></a>557</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="558"></a>558</td><td></td><td></td><td></td><td></td><td class="s">    return $class -&gt; bzero() unless @_;</td></tr>
<tr><td class="h"><a name="559"></a>559</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="560"></a>560</td><td></td><td></td><td></td><td></td><td class="s">    my ($wanted, @r) = @_;</td></tr>
<tr><td class="h"><a name="561"></a>561</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="562"></a>562</td><td></td><td></td><td></td><td></td><td class="s">    if (!defined($wanted)) {</td></tr>
<tr><td class="h"><a name="563"></a>563</td><td></td><td></td><td></td><td></td><td class="s">        #carp(&quot;Use of uninitialized value in new()&quot;)</td></tr>
<tr><td class="h"><a name="564"></a>564</td><td></td><td></td><td></td><td></td><td class="s">        #  if warnings::enabled(&quot;uninitialized&quot;);</td></tr>
<tr><td class="h"><a name="565"></a>565</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="566"></a>566</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="567"></a>567</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="568"></a>568</td><td></td><td></td><td></td><td></td><td class="s">    if (!ref($wanted) &amp;&amp; $wanted eq &quot;&quot;) {</td></tr>
<tr><td class="h"><a name="569"></a>569</td><td></td><td></td><td></td><td></td><td class="s">        #carp(q|Argument &quot;&quot; isn't numeric in new()|)</td></tr>
<tr><td class="h"><a name="570"></a>570</td><td></td><td></td><td></td><td></td><td class="s">        #  if warnings::enabled(&quot;numeric&quot;);</td></tr>
<tr><td class="h"><a name="571"></a>571</td><td></td><td></td><td></td><td></td><td class="s">        #return $class -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="572"></a>572</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="573"></a>573</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="574"></a>574</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="575"></a>575</td><td></td><td></td><td></td><td></td><td class="s">    # Initialize a new object.</td></tr>
<tr><td class="h"><a name="576"></a>576</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="577"></a>577</td><td></td><td></td><td></td><td></td><td class="s">    $self = bless {}, $class;</td></tr>
<tr><td class="h"><a name="578"></a>578</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="579"></a>579</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigInt or subclass</td></tr>
<tr><td class="h"><a name="580"></a>580</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="581"></a>581</td><td></td><td></td><td></td><td></td><td class="s">    if (defined(blessed($wanted)) &amp;&amp; $wanted -&gt; isa($class)) {</td></tr>
<tr><td class="h"><a name="582"></a>582</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="583"></a>583</td><td></td><td></td><td></td><td></td><td class="s">        # Don't copy the accuracy and precision, because a new object should get</td></tr>
<tr><td class="h"><a name="584"></a>584</td><td></td><td></td><td></td><td></td><td class="s">        # them from the global configuration.</td></tr>
<tr><td class="h"><a name="585"></a>585</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="586"></a>586</td><td></td><td></td><td></td><td></td><td class="s">        $self -&gt; {sign}  = $wanted -&gt; {sign};</td></tr>
<tr><td class="h"><a name="587"></a>587</td><td></td><td></td><td></td><td></td><td class="s">        $self -&gt; {value} = $LIB -&gt; _copy($wanted -&gt; {value});</td></tr>
<tr><td class="h"><a name="588"></a>588</td><td></td><td></td><td></td><td></td><td class="s">        $self = $self-&gt;round(@r)</td></tr>
<tr><td class="h"><a name="589"></a>589</td><td></td><td></td><td></td><td></td><td class="s">          unless @r &gt;= 2 &amp;&amp; !defined($r[0]) &amp;&amp; !defined($r[1]);</td></tr>
<tr><td class="h"><a name="590"></a>590</td><td></td><td></td><td></td><td></td><td class="s">        return $self;</td></tr>
<tr><td class="h"><a name="591"></a>591</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="592"></a>592</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="593"></a>593</td><td></td><td></td><td></td><td></td><td class="s">    # Shortcut for non-zero scalar integers with no non-zero exponent.</td></tr>
<tr><td class="h"><a name="594"></a>594</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="595"></a>595</td><td></td><td></td><td></td><td></td><td class="s">    if ($wanted =~</td></tr>
<tr><td class="h"><a name="596"></a>596</td><td></td><td></td><td></td><td></td><td class="s">        / ^</td></tr>
<tr><td class="h"><a name="597"></a>597</td><td></td><td></td><td></td><td></td><td class="s">          ( [+-]? )             # optional sign</td></tr>
<tr><td class="h"><a name="598"></a>598</td><td></td><td></td><td></td><td></td><td class="s">          ( [1-9] [0-9]* )      # non-zero significand</td></tr>
<tr><td class="h"><a name="599"></a>599</td><td></td><td></td><td></td><td></td><td class="s">          ( \.0* )?             # ... with optional zero fraction</td></tr>
<tr><td class="h"><a name="600"></a>600</td><td></td><td></td><td></td><td></td><td class="s">          ( [Ee] [+-]? 0+ )?    # optional zero exponent</td></tr>
<tr><td class="h"><a name="601"></a>601</td><td></td><td></td><td></td><td></td><td class="s">          \z</td></tr>
<tr><td class="h"><a name="602"></a>602</td><td></td><td></td><td></td><td></td><td class="s">        /x)</td></tr>
<tr><td class="h"><a name="603"></a>603</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="604"></a>604</td><td></td><td></td><td></td><td></td><td class="s">        my $sgn = $1;</td></tr>
<tr><td class="h"><a name="605"></a>605</td><td></td><td></td><td></td><td></td><td class="s">        my $abs = $2;</td></tr>
<tr><td class="h"><a name="606"></a>606</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{sign} = $sgn || '+';</td></tr>
<tr><td class="h"><a name="607"></a>607</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{value} = $LIB-&gt;_new($abs);</td></tr>
<tr><td class="h"><a name="608"></a>608</td><td></td><td></td><td></td><td></td><td class="s">        $self = $self-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="609"></a>609</td><td></td><td></td><td></td><td></td><td class="s">        return $self;</td></tr>
<tr><td class="h"><a name="610"></a>610</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="611"></a>611</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="612"></a>612</td><td></td><td></td><td></td><td></td><td class="s">    # Handle Infs.</td></tr>
<tr><td class="h"><a name="613"></a>613</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="614"></a>614</td><td></td><td></td><td></td><td></td><td class="s">    if ($wanted =~ / ^</td></tr>
<tr><td class="h"><a name="615"></a>615</td><td></td><td></td><td></td><td></td><td class="s">                     \s*</td></tr>
<tr><td class="h"><a name="616"></a>616</td><td></td><td></td><td></td><td></td><td class="s">                     ( [+-]? )</td></tr>
<tr><td class="h"><a name="617"></a>617</td><td></td><td></td><td></td><td></td><td class="s">                     inf (?: inity )?</td></tr>
<tr><td class="h"><a name="618"></a>618</td><td></td><td></td><td></td><td></td><td class="s">                     \s*</td></tr>
<tr><td class="h"><a name="619"></a>619</td><td></td><td></td><td></td><td></td><td class="s">                     \z</td></tr>
<tr><td class="h"><a name="620"></a>620</td><td></td><td></td><td></td><td></td><td class="s">                   /ix)</td></tr>
<tr><td class="h"><a name="621"></a>621</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="622"></a>622</td><td></td><td></td><td></td><td></td><td class="s">        my $sgn = $1 || '+';</td></tr>
<tr><td class="h"><a name="623"></a>623</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; binf($sgn, @r);</td></tr>
<tr><td class="h"><a name="624"></a>624</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="625"></a>625</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="626"></a>626</td><td></td><td></td><td></td><td></td><td class="s">    # Handle explicit NaNs (not the ones returned due to invalid input).</td></tr>
<tr><td class="h"><a name="627"></a>627</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="628"></a>628</td><td></td><td></td><td></td><td></td><td class="s">    if ($wanted =~ / ^</td></tr>
<tr><td class="h"><a name="629"></a>629</td><td></td><td></td><td></td><td></td><td class="s">                     \s*</td></tr>
<tr><td class="h"><a name="630"></a>630</td><td></td><td></td><td></td><td></td><td class="s">                     ( [+-]? )</td></tr>
<tr><td class="h"><a name="631"></a>631</td><td></td><td></td><td></td><td></td><td class="s">                     nan</td></tr>
<tr><td class="h"><a name="632"></a>632</td><td></td><td></td><td></td><td></td><td class="s">                     \s*</td></tr>
<tr><td class="h"><a name="633"></a>633</td><td></td><td></td><td></td><td></td><td class="s">                     \z</td></tr>
<tr><td class="h"><a name="634"></a>634</td><td></td><td></td><td></td><td></td><td class="s">                   /ix)</td></tr>
<tr><td class="h"><a name="635"></a>635</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="636"></a>636</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="637"></a>637</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="638"></a>638</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="639"></a>639</td><td></td><td></td><td></td><td></td><td class="s">    my @parts;</td></tr>
<tr><td class="h"><a name="640"></a>640</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="641"></a>641</td><td></td><td></td><td></td><td></td><td class="s">    if (</td></tr>
<tr><td class="h"><a name="642"></a>642</td><td></td><td></td><td></td><td></td><td class="s">        # Handle hexadecimal numbers. We auto-detect hexadecimal numbers if they</td></tr>
<tr><td class="h"><a name="643"></a>643</td><td></td><td></td><td></td><td></td><td class="s">        # have a &quot;0x&quot;, &quot;0X&quot;, &quot;x&quot;, or &quot;X&quot; prefix, cf. CORE::oct().</td></tr>
<tr><td class="h"><a name="644"></a>644</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="645"></a>645</td><td></td><td></td><td></td><td></td><td class="s">        $wanted =~ /^\s*[+-]?0?[Xx]/ and</td></tr>
<tr><td class="h"><a name="646"></a>646</td><td></td><td></td><td></td><td></td><td class="s">        @parts = $class -&gt; _hex_str_to_flt_lib_parts($wanted)</td></tr>
<tr><td class="h"><a name="647"></a>647</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="648"></a>648</td><td></td><td></td><td></td><td></td><td class="s">          or</td></tr>
<tr><td class="h"><a name="649"></a>649</td><td></td><td></td><td></td><td></td><td class="s">        $wanted =~ /^\s*[+-]?0?[Oo]/ and</td></tr>
<tr><td class="h"><a name="650"></a>650</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="- -"></a>- -</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="654"></a>654</td><td></td><td></td><td></td><td></td><td class="s">        @parts = $class -&gt; _oct_str_to_flt_lib_parts($wanted)</td></tr>
<tr><td class="h"><a name="655"></a>655</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="656"></a>656</td><td></td><td></td><td></td><td></td><td class="s">          or</td></tr>
<tr><td class="h"><a name="657"></a>657</td><td></td><td></td><td></td><td></td><td class="s">        $wanted =~ /^\s*[+-]?0?[Bb]/ and</td></tr>
<tr><td class="h"><a name="658"></a>658</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="- -"></a>- -</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="662"></a>662</td><td></td><td></td><td></td><td></td><td class="s">        @parts = $class -&gt; _bin_str_to_flt_lib_parts($wanted)</td></tr>
<tr><td class="h"><a name="663"></a>663</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="664"></a>664</td><td></td><td></td><td></td><td></td><td class="s">          or</td></tr>
<tr><td class="h"><a name="665"></a>665</td><td></td><td></td><td></td><td></td><td class="s">        @parts = $class -&gt; _dec_str_to_flt_lib_parts($wanted)</td></tr>
<tr><td class="h"><a name="666"></a>666</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="- -"></a>- -</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="671"></a>671</td><td></td><td></td><td></td><td></td><td class="s">          or</td></tr>
<tr><td class="h"><a name="672"></a>672</td><td></td><td></td><td></td><td></td><td class="s">        $wanted =~ /^\s*[+-]?0_*\d/ and</td></tr>
<tr><td class="h"><a name="673"></a>673</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="- -"></a>- -</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="681"></a>681</td><td></td><td></td><td></td><td></td><td class="s">        @parts = $class -&gt; _oct_str_to_flt_lib_parts($wanted))</td></tr>
<tr><td class="h"><a name="682"></a>682</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="683"></a>683</td><td></td><td></td><td></td><td></td><td class="s">        # The value is an integer iff the exponent is non-negative.</td></tr>
<tr><td class="h"><a name="684"></a>684</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="685"></a>685</td><td></td><td></td><td></td><td></td><td class="s">        if ($parts[2] eq '+') {</td></tr>
<tr><td class="h"><a name="686"></a>686</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {sign}  = $parts[0];</td></tr>
<tr><td class="h"><a name="687"></a>687</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {value} = $LIB -&gt; _lsft($parts[1], $parts[3], 10);</td></tr>
<tr><td class="h"><a name="688"></a>688</td><td></td><td></td><td></td><td></td><td class="s">            $self = $self-&gt;round(@r)</td></tr>
<tr><td class="h"><a name="689"></a>689</td><td></td><td></td><td></td><td></td><td class="s">              unless @r &gt;= 2 &amp;&amp; !defined($r[0]) &amp;&amp; !defined($r[1]);</td></tr>
<tr><td class="h"><a name="690"></a>690</td><td></td><td></td><td></td><td></td><td class="s">            return $self;</td></tr>
<tr><td class="h"><a name="691"></a>691</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="692"></a>692</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="693"></a>693</td><td></td><td></td><td></td><td></td><td class="s">        # The value is not an integer, so upgrade if upgrading is enabled.</td></tr>
<tr><td class="h"><a name="694"></a>694</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="695"></a>695</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; new($wanted, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="696"></a>696</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="697"></a>697</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="698"></a>698</td><td></td><td></td><td></td><td></td><td class="s">    # If we get here, the value is neither a valid decimal, binary, octal, or</td></tr>
<tr><td class="h"><a name="699"></a>699</td><td></td><td></td><td></td><td></td><td class="s">    # hexadecimal number. It is not explicit an Inf or a NaN either.</td></tr>
<tr><td class="h"><a name="700"></a>700</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="701"></a>701</td><td></td><td></td><td></td><td></td><td class="s">    return $class -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="702"></a>702</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="703"></a>703</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="704"></a>704</td><td></td><td></td><td></td><td></td><td class="s"># Create a Math::BigInt from a decimal string. This is an equivalent to</td></tr>
<tr><td class="h"><a name="705"></a>705</td><td></td><td></td><td></td><td></td><td class="s"># from_hex(), from_oct(), and from_bin(). It is like new() except that it does</td></tr>
<tr><td class="h"><a name="706"></a>706</td><td></td><td></td><td></td><td></td><td class="s"># not accept anything but a string representing a finite decimal number.</td></tr>
<tr><td class="h"><a name="707"></a>707</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="708"></a>708</td><td></td><td></td><td></td><td></td><td class="s">sub from_dec {</td></tr>
<tr><td class="h"><a name="709"></a>709</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="710"></a>710</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="711"></a>711</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="712"></a>712</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="713"></a>713</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="714"></a>714</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="715"></a>715</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_dec');</td></tr>
<tr><td class="h"><a name="716"></a>716</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="717"></a>717</td><td></td><td></td><td></td><td></td><td class="s">    my $str = shift;</td></tr>
<tr><td class="h"><a name="718"></a>718</td><td></td><td></td><td></td><td></td><td class="s">    my @r   = @_;</td></tr>
<tr><td class="h"><a name="719"></a>719</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="720"></a>720</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="721"></a>721</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="722"></a>722</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero(@r) unless $selfref;</td></tr>
<tr><td class="h"><a name="723"></a>723</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="724"></a>724</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _dec_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="725"></a>725</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="726"></a>726</td><td></td><td></td><td></td><td></td><td class="s">        # The value is an integer iff the exponent is non-negative.</td></tr>
<tr><td class="h"><a name="727"></a>727</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="728"></a>728</td><td></td><td></td><td></td><td></td><td class="s">        if ($parts[2] eq '+') {</td></tr>
<tr><td class="h"><a name="729"></a>729</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {sign}  = $parts[0];</td></tr>
<tr><td class="h"><a name="730"></a>730</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {value} = $LIB -&gt; _lsft($parts[1], $parts[3], 10);</td></tr>
<tr><td class="h"><a name="731"></a>731</td><td></td><td></td><td></td><td></td><td class="s">            return $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="732"></a>732</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="733"></a>733</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="734"></a>734</td><td></td><td></td><td></td><td></td><td class="s">        # The value is not an integer, so upgrade if upgrading is enabled.</td></tr>
<tr><td class="h"><a name="735"></a>735</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="736"></a>736</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; new($str, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="737"></a>737</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="738"></a>738</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="739"></a>739</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="740"></a>740</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="741"></a>741</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="742"></a>742</td><td></td><td></td><td></td><td></td><td class="s"># Create a Math::BigInt from a hexadecimal string.</td></tr>
<tr><td class="h"><a name="743"></a>743</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="744"></a>744</td><td></td><td></td><td></td><td></td><td class="s">sub from_hex {</td></tr>
<tr><td class="h"><a name="745"></a>745</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="746"></a>746</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="747"></a>747</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="748"></a>748</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="749"></a>749</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="750"></a>750</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="751"></a>751</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_hex');</td></tr>
<tr><td class="h"><a name="752"></a>752</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="753"></a>753</td><td></td><td></td><td></td><td></td><td class="s">    my $str = shift;</td></tr>
<tr><td class="h"><a name="754"></a>754</td><td></td><td></td><td></td><td></td><td class="s">    my @r   = @_;</td></tr>
<tr><td class="h"><a name="755"></a>755</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="756"></a>756</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="757"></a>757</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="758"></a>758</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero(@r) unless $selfref;</td></tr>
<tr><td class="h"><a name="759"></a>759</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="760"></a>760</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _hex_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="761"></a>761</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="762"></a>762</td><td></td><td></td><td></td><td></td><td class="s">        # The value is an integer iff the exponent is non-negative.</td></tr>
<tr><td class="h"><a name="763"></a>763</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="764"></a>764</td><td></td><td></td><td></td><td></td><td class="s">        if ($parts[2] eq '+') {</td></tr>
<tr><td class="h"><a name="765"></a>765</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {sign}  = $parts[0];</td></tr>
<tr><td class="h"><a name="766"></a>766</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {value} = $LIB -&gt; _lsft($parts[1], $parts[3], 10);</td></tr>
<tr><td class="h"><a name="767"></a>767</td><td></td><td></td><td></td><td></td><td class="s">            return $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="768"></a>768</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="769"></a>769</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="770"></a>770</td><td></td><td></td><td></td><td></td><td class="s">        # The value is not an integer, so upgrade if upgrading is enabled.</td></tr>
<tr><td class="h"><a name="771"></a>771</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="772"></a>772</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; new($str, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="773"></a>773</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="774"></a>774</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="775"></a>775</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="776"></a>776</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="777"></a>777</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="778"></a>778</td><td></td><td></td><td></td><td></td><td class="s"># Create a Math::BigInt from an octal string.</td></tr>
<tr><td class="h"><a name="779"></a>779</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="780"></a>780</td><td></td><td></td><td></td><td></td><td class="s">sub from_oct {</td></tr>
<tr><td class="h"><a name="781"></a>781</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="782"></a>782</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="783"></a>783</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="784"></a>784</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="785"></a>785</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="786"></a>786</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="787"></a>787</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_oct');</td></tr>
<tr><td class="h"><a name="788"></a>788</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="789"></a>789</td><td></td><td></td><td></td><td></td><td class="s">    my $str = shift;</td></tr>
<tr><td class="h"><a name="790"></a>790</td><td></td><td></td><td></td><td></td><td class="s">    my @r   = @_;</td></tr>
<tr><td class="h"><a name="791"></a>791</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="792"></a>792</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="793"></a>793</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="794"></a>794</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero(@r) unless $selfref;</td></tr>
<tr><td class="h"><a name="795"></a>795</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="796"></a>796</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _oct_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="797"></a>797</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="798"></a>798</td><td></td><td></td><td></td><td></td><td class="s">        # The value is an integer iff the exponent is non-negative.</td></tr>
<tr><td class="h"><a name="799"></a>799</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="800"></a>800</td><td></td><td></td><td></td><td></td><td class="s">        if ($parts[2] eq '+') {</td></tr>
<tr><td class="h"><a name="801"></a>801</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {sign}  = $parts[0];</td></tr>
<tr><td class="h"><a name="802"></a>802</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {value} = $LIB -&gt; _lsft($parts[1], $parts[3], 10);</td></tr>
<tr><td class="h"><a name="803"></a>803</td><td></td><td></td><td></td><td></td><td class="s">            return $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="804"></a>804</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="805"></a>805</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="806"></a>806</td><td></td><td></td><td></td><td></td><td class="s">        # The value is not an integer, so upgrade if upgrading is enabled.</td></tr>
<tr><td class="h"><a name="807"></a>807</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="808"></a>808</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; new($str, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="809"></a>809</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="810"></a>810</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="811"></a>811</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="812"></a>812</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="813"></a>813</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="814"></a>814</td><td></td><td></td><td></td><td></td><td class="s"># Create a Math::BigInt from a binary string.</td></tr>
<tr><td class="h"><a name="815"></a>815</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="816"></a>816</td><td></td><td></td><td></td><td></td><td class="s">sub from_bin {</td></tr>
<tr><td class="h"><a name="817"></a>817</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="818"></a>818</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="819"></a>819</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="820"></a>820</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="821"></a>821</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="822"></a>822</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="823"></a>823</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_bin');</td></tr>
<tr><td class="h"><a name="824"></a>824</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="825"></a>825</td><td></td><td></td><td></td><td></td><td class="s">    my $str = shift;</td></tr>
<tr><td class="h"><a name="826"></a>826</td><td></td><td></td><td></td><td></td><td class="s">    my @r   = @_;</td></tr>
<tr><td class="h"><a name="827"></a>827</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="828"></a>828</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="829"></a>829</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="830"></a>830</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero(@r) unless $selfref;</td></tr>
<tr><td class="h"><a name="831"></a>831</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="832"></a>832</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _bin_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="833"></a>833</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="834"></a>834</td><td></td><td></td><td></td><td></td><td class="s">        # The value is an integer iff the exponent is non-negative.</td></tr>
<tr><td class="h"><a name="835"></a>835</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="836"></a>836</td><td></td><td></td><td></td><td></td><td class="s">        if ($parts[2] eq '+') {</td></tr>
<tr><td class="h"><a name="837"></a>837</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {sign}  = $parts[0];</td></tr>
<tr><td class="h"><a name="838"></a>838</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {value} = $LIB -&gt; _lsft($parts[1], $parts[3], 10);</td></tr>
<tr><td class="h"><a name="839"></a>839</td><td></td><td></td><td></td><td></td><td class="s">            return $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="840"></a>840</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="841"></a>841</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="842"></a>842</td><td></td><td></td><td></td><td></td><td class="s">        # The value is not an integer, so upgrade if upgrading is enabled.</td></tr>
<tr><td class="h"><a name="843"></a>843</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="844"></a>844</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; new($str, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="845"></a>845</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="846"></a>846</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="847"></a>847</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="848"></a>848</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="849"></a>849</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="850"></a>850</td><td></td><td></td><td></td><td></td><td class="s"># Create a Math::BigInt from a byte string.</td></tr>
<tr><td class="h"><a name="851"></a>851</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="852"></a>852</td><td></td><td></td><td></td><td></td><td class="s">sub from_bytes {</td></tr>
<tr><td class="h"><a name="853"></a>853</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="854"></a>854</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="855"></a>855</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="856"></a>856</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="857"></a>857</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="858"></a>858</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="859"></a>859</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_bytes');</td></tr>
<tr><td class="h"><a name="860"></a>860</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="861"></a>861</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;from_bytes() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="862"></a>862</td><td></td><td></td><td></td><td></td><td class="s">        unless $LIB-&gt;can('_from_bytes');</td></tr>
<tr><td class="h"><a name="863"></a>863</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="864"></a>864</td><td></td><td></td><td></td><td></td><td class="s">    my $str = shift;</td></tr>
<tr><td class="h"><a name="865"></a>865</td><td></td><td></td><td></td><td></td><td class="s">    my @r = @_;</td></tr>
<tr><td class="h"><a name="866"></a>866</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="867"></a>867</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="868"></a>868</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="869"></a>869</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero(@r) unless $selfref;</td></tr>
<tr><td class="h"><a name="870"></a>870</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {sign}  = '+';</td></tr>
<tr><td class="h"><a name="871"></a>871</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {value} = $LIB -&gt; _from_bytes($str);</td></tr>
<tr><td class="h"><a name="872"></a>872</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="873"></a>873</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="874"></a>874</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="875"></a>875</td><td></td><td></td><td></td><td></td><td class="s">sub from_base {</td></tr>
<tr><td class="h"><a name="876"></a>876</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="877"></a>877</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="878"></a>878</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="879"></a>879</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="880"></a>880</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="881"></a>881</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="882"></a>882</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_base');</td></tr>
<tr><td class="h"><a name="883"></a>883</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="884"></a>884</td><td></td><td></td><td></td><td></td><td class="s">    my ($str, $base, $cs, @r) = @_;     # $cs is the collation sequence</td></tr>
<tr><td class="h"><a name="885"></a>885</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="886"></a>886</td><td></td><td></td><td></td><td></td><td class="s">    $base = $class-&gt;new($base) unless ref($base);</td></tr>
<tr><td class="h"><a name="887"></a>887</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="888"></a>888</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;the base must be a finite integer &gt;= 2&quot;)</td></tr>
<tr><td class="h"><a name="889"></a>889</td><td></td><td></td><td></td><td></td><td class="s">      if $base &lt; 2 || ! $base -&gt; is_int();</td></tr>
<tr><td class="h"><a name="890"></a>890</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="891"></a>891</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="892"></a>892</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="893"></a>893</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero() unless $selfref;</td></tr>
<tr><td class="h"><a name="894"></a>894</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="895"></a>895</td><td></td><td></td><td></td><td></td><td class="s">    # If no collating sequence is given, pass some of the conversions to</td></tr>
<tr><td class="h"><a name="896"></a>896</td><td></td><td></td><td></td><td></td><td class="s">    # methods optimized for those cases.</td></tr>
<tr><td class="h"><a name="897"></a>897</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="898"></a>898</td><td></td><td></td><td></td><td></td><td class="s">    unless (defined $cs) {</td></tr>
<tr><td class="h"><a name="899"></a>899</td><td></td><td></td><td></td><td></td><td class="s">        return $self -&gt; from_bin($str, @r) if $base == 2;</td></tr>
<tr><td class="h"><a name="900"></a>900</td><td></td><td></td><td></td><td></td><td class="s">        return $self -&gt; from_oct($str, @r) if $base == 8;</td></tr>
<tr><td class="h"><a name="901"></a>901</td><td></td><td></td><td></td><td></td><td class="s">        return $self -&gt; from_hex($str, @r) if $base == 16;</td></tr>
<tr><td class="h"><a name="902"></a>902</td><td></td><td></td><td></td><td></td><td class="s">        if ($base == 10) {</td></tr>
<tr><td class="h"><a name="903"></a>903</td><td></td><td></td><td></td><td></td><td class="s">            my $tmp = $class -&gt; from_dec($str, @r);</td></tr>
<tr><td class="h"><a name="904"></a>904</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {value} = $tmp -&gt; {value};</td></tr>
<tr><td class="h"><a name="905"></a>905</td><td></td><td></td><td></td><td></td><td class="s">            $self -&gt; {sign}  = '+';</td></tr>
<tr><td class="h"><a name="906"></a>906</td><td></td><td></td><td></td><td></td><td class="s">            return $self -&gt; bround(@r);</td></tr>
<tr><td class="h"><a name="907"></a>907</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="908"></a>908</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="909"></a>909</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="910"></a>910</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;from_base() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="911"></a>911</td><td></td><td></td><td></td><td></td><td class="s">      unless $LIB-&gt;can('_from_base');</td></tr>
<tr><td class="h"><a name="912"></a>912</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="913"></a>913</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {sign}  = '+';</td></tr>
<tr><td class="h"><a name="914"></a>914</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {value}</td></tr>
<tr><td class="h"><a name="915"></a>915</td><td></td><td></td><td></td><td></td><td class="s">      = $LIB-&gt;_from_base($str, $base -&gt; {value}, defined($cs) ? $cs : ());</td></tr>
<tr><td class="h"><a name="916"></a>916</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; bround(@r);</td></tr>
<tr><td class="h"><a name="917"></a>917</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="918"></a>918</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="919"></a>919</td><td></td><td></td><td></td><td></td><td class="s">sub from_base_num {</td></tr>
<tr><td class="h"><a name="920"></a>920</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="921"></a>921</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="922"></a>922</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="923"></a>923</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="924"></a>924</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="925"></a>925</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="926"></a>926</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('from_base_num');</td></tr>
<tr><td class="h"><a name="927"></a>927</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="928"></a>928</td><td></td><td></td><td></td><td></td><td class="s">    # Make sure we have an array of non-negative, finite, numerical objects.</td></tr>
<tr><td class="h"><a name="929"></a>929</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="930"></a>930</td><td></td><td></td><td></td><td></td><td class="s">    my $nums = shift;</td></tr>
<tr><td class="h"><a name="931"></a>931</td><td></td><td></td><td></td><td></td><td class="s">    $nums = [ @$nums ];         # create new reference</td></tr>
<tr><td class="h"><a name="932"></a>932</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="933"></a>933</td><td></td><td></td><td></td><td></td><td class="s">    for my $i (0 .. $#$nums) {</td></tr>
<tr><td class="h"><a name="934"></a>934</td><td></td><td></td><td></td><td></td><td class="s">        # Make sure we have an object.</td></tr>
<tr><td class="h"><a name="935"></a>935</td><td></td><td></td><td></td><td></td><td class="s">        $nums -&gt; [$i] = $class -&gt; new($nums -&gt; [$i])</td></tr>
<tr><td class="h"><a name="936"></a>936</td><td></td><td></td><td></td><td></td><td class="s">          unless ref($nums -&gt; [$i]) &amp;&amp; $nums -&gt; [$i] -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="937"></a>937</td><td></td><td></td><td></td><td></td><td class="s">        # Make sure we have a finite, non-negative integer.</td></tr>
<tr><td class="h"><a name="938"></a>938</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;the elements must be finite non-negative integers&quot;</td></tr>
<tr><td class="h"><a name="939"></a>939</td><td></td><td></td><td></td><td></td><td class="s">          if $nums -&gt; [$i] -&gt; is_neg() || ! $nums -&gt; [$i] -&gt; is_int();</td></tr>
<tr><td class="h"><a name="940"></a>940</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="941"></a>941</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="942"></a>942</td><td></td><td></td><td></td><td></td><td class="s">    my $base = shift;</td></tr>
<tr><td class="h"><a name="943"></a>943</td><td></td><td></td><td></td><td></td><td class="s">    $base = $class -&gt; new($base) unless ref($base) &amp;&amp; $base -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="944"></a>944</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="945"></a>945</td><td></td><td></td><td></td><td></td><td class="s">    my @r = @_;</td></tr>
<tr><td class="h"><a name="946"></a>946</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="947"></a>947</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="948"></a>948</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="949"></a>949</td><td></td><td></td><td></td><td></td><td class="s">    $self = $class -&gt; bzero(@r) unless $selfref;</td></tr>
<tr><td class="h"><a name="950"></a>950</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="951"></a>951</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;from_base_num() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="952"></a>952</td><td></td><td></td><td></td><td></td><td class="s">      unless $LIB-&gt;can('_from_base_num');</td></tr>
<tr><td class="h"><a name="953"></a>953</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="954"></a>954</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {sign}  = '+';</td></tr>
<tr><td class="h"><a name="955"></a>955</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {value} = $LIB -&gt; _from_base_num([ map { $_ -&gt; {value} } @$nums ],</td></tr>
<tr><td class="h"><a name="956"></a>956</td><td></td><td></td><td></td><td></td><td class="s">                                           $base -&gt; {value});</td></tr>
<tr><td class="h"><a name="957"></a>957</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="958"></a>958</td><td></td><td></td><td></td><td></td><td class="s">    return $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="959"></a>959</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="960"></a>960</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="961"></a>961</td><td></td><td></td><td></td><td></td><td class="s">sub bzero {</td></tr>
<tr><td class="h"><a name="962"></a>962</td><td></td><td></td><td></td><td></td><td class="s">    # create/assign '+0'</td></tr>
<tr><td class="h"><a name="963"></a>963</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="964"></a>964</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="965"></a>965</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="966"></a>966</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="967"></a>967</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="968"></a>968</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="969"></a>969</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="970"></a>970</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="971"></a>971</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="972"></a>972</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="973"></a>973</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="974"></a>974</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="975"></a>975</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="976"></a>976</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="977"></a>977</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;import() if $IMPORT == 0;            # make require work</td></tr>
<tr><td class="h"><a name="978"></a>978</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="979"></a>979</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="980"></a>980</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="981"></a>981</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('bzero');</td></tr>
<tr><td class="h"><a name="982"></a>982</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="983"></a>983</td><td></td><td></td><td></td><td></td><td class="s">    # Get the rounding parameters, if any.</td></tr>
<tr><td class="h"><a name="984"></a>984</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="985"></a>985</td><td></td><td></td><td></td><td></td><td class="s">    my @r = @_;</td></tr>
<tr><td class="h"><a name="986"></a>986</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="987"></a>987</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="988"></a>988</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="989"></a>989</td><td></td><td></td><td></td><td></td><td class="s">    $self = bless {}, $class unless $selfref;</td></tr>
<tr><td class="h"><a name="990"></a>990</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="991"></a>991</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;{sign} = '+';</td></tr>
<tr><td class="h"><a name="992"></a>992</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;{value} = $LIB-&gt;_zero();</td></tr>
<tr><td class="h"><a name="993"></a>993</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="994"></a>994</td><td></td><td></td><td></td><td></td><td class="s">    # If rounding parameters are given as arguments, use them. If no rounding</td></tr>
<tr><td class="h"><a name="995"></a>995</td><td></td><td></td><td></td><td></td><td class="s">    # parameters are given, and if called as a class method, initialize the new</td></tr>
<tr><td class="h"><a name="996"></a>996</td><td></td><td></td><td></td><td></td><td class="s">    # instance with the class variables.</td></tr>
<tr><td class="h"><a name="997"></a>997</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="998"></a>998</td><td></td><td></td><td></td><td></td><td class="s">    if (@r) {</td></tr>
<tr><td class="h"><a name="999"></a>999</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;can't specify both accuracy and precision&quot;</td></tr>
<tr><td class="h"><a name="1000"></a>1000</td><td></td><td></td><td></td><td></td><td class="s">          if @r &gt;= 2 &amp;&amp; defined($r[0]) &amp;&amp; defined($r[1]);</td></tr>
<tr><td class="h"><a name="1001"></a>1001</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $_[0];</td></tr>
<tr><td class="h"><a name="1002"></a>1002</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $_[1];</td></tr>
<tr><td class="h"><a name="1003"></a>1003</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (!$selfref) {</td></tr>
<tr><td class="h"><a name="1004"></a>1004</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $class -&gt; accuracy();</td></tr>
<tr><td class="h"><a name="1005"></a>1005</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $class -&gt; precision();</td></tr>
<tr><td class="h"><a name="1006"></a>1006</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1007"></a>1007</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1008"></a>1008</td><td></td><td></td><td></td><td></td><td class="s">    return $self;</td></tr>
<tr><td class="h"><a name="1009"></a>1009</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1010"></a>1010</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1011"></a>1011</td><td></td><td></td><td></td><td></td><td class="s">sub bone {</td></tr>
<tr><td class="h"><a name="1012"></a>1012</td><td></td><td></td><td></td><td></td><td class="s">    # Create or assign '+1' (or -1 if given sign '-').</td></tr>
<tr><td class="h"><a name="1013"></a>1013</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1014"></a>1014</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="1015"></a>1015</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="1016"></a>1016</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="1017"></a>1017</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1018"></a>1018</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="1019"></a>1019</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="1020"></a>1020</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="1021"></a>1021</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1022"></a>1022</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1023"></a>1023</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1024"></a>1024</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1025"></a>1025</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1026"></a>1026</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1027"></a>1027</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;import() if $IMPORT == 0;            # make require work</td></tr>
<tr><td class="h"><a name="1028"></a>1028</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1029"></a>1029</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="1030"></a>1030</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1031"></a>1031</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('bone');</td></tr>
<tr><td class="h"><a name="1032"></a>1032</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1033"></a>1033</td><td></td><td></td><td></td><td></td><td class="s">    my ($sign, @r) = @_;</td></tr>
<tr><td class="h"><a name="1034"></a>1034</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1035"></a>1035</td><td></td><td></td><td></td><td></td><td class="s">    # Get the sign.</td></tr>
<tr><td class="h"><a name="1036"></a>1036</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1037"></a>1037</td><td></td><td></td><td></td><td></td><td class="s">    if (defined($_[0]) &amp;&amp; $_[0] =~ /^\s*([+-])\s*$/) {</td></tr>
<tr><td class="h"><a name="1038"></a>1038</td><td></td><td></td><td></td><td></td><td class="s">        $sign = $1;</td></tr>
<tr><td class="h"><a name="1039"></a>1039</td><td></td><td></td><td></td><td></td><td class="s">        shift;</td></tr>
<tr><td class="h"><a name="1040"></a>1040</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="1041"></a>1041</td><td></td><td></td><td></td><td></td><td class="s">        $sign = '+';</td></tr>
<tr><td class="h"><a name="1042"></a>1042</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1043"></a>1043</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1044"></a>1044</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="1045"></a>1045</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1046"></a>1046</td><td></td><td></td><td></td><td></td><td class="s">    $self = bless {}, $class unless $selfref;</td></tr>
<tr><td class="h"><a name="1047"></a>1047</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1048"></a>1048</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;{sign}  = $sign;</td></tr>
<tr><td class="h"><a name="1049"></a>1049</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;{value} = $LIB-&gt;_one();</td></tr>
<tr><td class="h"><a name="1050"></a>1050</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1051"></a>1051</td><td></td><td></td><td></td><td></td><td class="s">    # If rounding parameters are given as arguments, use them. If no rounding</td></tr>
<tr><td class="h"><a name="1052"></a>1052</td><td></td><td></td><td></td><td></td><td class="s">    # parameters are given, and if called as a class method, initialize the new</td></tr>
<tr><td class="h"><a name="1053"></a>1053</td><td></td><td></td><td></td><td></td><td class="s">    # instance with the class variables.</td></tr>
<tr><td class="h"><a name="1054"></a>1054</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1055"></a>1055</td><td></td><td></td><td></td><td></td><td class="s">    if (@r) {</td></tr>
<tr><td class="h"><a name="1056"></a>1056</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;can't specify both accuracy and precision&quot;</td></tr>
<tr><td class="h"><a name="1057"></a>1057</td><td></td><td></td><td></td><td></td><td class="s">          if @r &gt;= 2 &amp;&amp; defined($r[0]) &amp;&amp; defined($r[1]);</td></tr>
<tr><td class="h"><a name="1058"></a>1058</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $_[0];</td></tr>
<tr><td class="h"><a name="1059"></a>1059</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $_[1];</td></tr>
<tr><td class="h"><a name="1060"></a>1060</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (!$selfref) {</td></tr>
<tr><td class="h"><a name="1061"></a>1061</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $class -&gt; accuracy();</td></tr>
<tr><td class="h"><a name="1062"></a>1062</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $class -&gt; precision();</td></tr>
<tr><td class="h"><a name="1063"></a>1063</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1064"></a>1064</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1065"></a>1065</td><td></td><td></td><td></td><td></td><td class="s">    return $self;</td></tr>
<tr><td class="h"><a name="1066"></a>1066</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1067"></a>1067</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1068"></a>1068</td><td></td><td></td><td></td><td></td><td class="s">sub binf {</td></tr>
<tr><td class="h"><a name="1069"></a>1069</td><td></td><td></td><td></td><td></td><td class="s">    # create/assign a '+inf' or '-inf'</td></tr>
<tr><td class="h"><a name="1070"></a>1070</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1071"></a>1071</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="1072"></a>1072</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="1073"></a>1073</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="1074"></a>1074</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1075"></a>1075</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="1076"></a>1076</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="1077"></a>1077</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="1078"></a>1078</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1079"></a>1079</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1080"></a>1080</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1081"></a>1081</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1082"></a>1082</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1083"></a>1083</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1084"></a>1084</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1085"></a>1085</td><td class="c1">2</td><td class="c0"><span title="Avg 239Âµs">478Âµs</span></td><td class="c3">2</td><td class="c0">37Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 27Âµs (17+10) within Math::BigInt::BEGIN@1085 which was called:
#    once (17Âµs+10Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#1085">line 1085</a></div></div>        no strict 'refs';<div class="calls"><div class="calls_out">        # spent    27Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#1085">Math::BigInt::BEGIN@1085</a>
        # spent    10Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="1086"></a>1086</td><td></td><td></td><td></td><td></td><td class="s">        if (${&quot;${class}::_trap_inf&quot;}) {</td></tr>
<tr><td class="h"><a name="1087"></a>1087</td><td></td><td></td><td></td><td></td><td class="s">            croak(&quot;Tried to create +-inf in $class-&gt;binf()&quot;);</td></tr>
<tr><td class="h"><a name="1088"></a>1088</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1089"></a>1089</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1090"></a>1090</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1091"></a>1091</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;import() if $IMPORT == 0;            # make require work</td></tr>
<tr><td class="h"><a name="1092"></a>1092</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1093"></a>1093</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="1094"></a>1094</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1095"></a>1095</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('binf');</td></tr>
<tr><td class="h"><a name="1096"></a>1096</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1097"></a>1097</td><td></td><td></td><td></td><td></td><td class="s">    # Get the sign.</td></tr>
<tr><td class="h"><a name="1098"></a>1098</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1099"></a>1099</td><td></td><td></td><td></td><td></td><td class="s">    my $sign = '+';     # default is to return positive infinity</td></tr>
<tr><td class="h"><a name="1100"></a>1100</td><td></td><td></td><td></td><td></td><td class="s">    if (defined($_[0]) &amp;&amp; $_[0] =~ /^\s*([+-])(inf|$)/i) {</td></tr>
<tr><td class="h"><a name="1101"></a>1101</td><td></td><td></td><td></td><td></td><td class="s">        $sign = $1;</td></tr>
<tr><td class="h"><a name="1102"></a>1102</td><td></td><td></td><td></td><td></td><td class="s">        shift;</td></tr>
<tr><td class="h"><a name="1103"></a>1103</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1104"></a>1104</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1105"></a>1105</td><td></td><td></td><td></td><td></td><td class="s">    # Get the rounding parameters, if any.</td></tr>
<tr><td class="h"><a name="1106"></a>1106</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1107"></a>1107</td><td></td><td></td><td></td><td></td><td class="s">    my @r = @_;</td></tr>
<tr><td class="h"><a name="1108"></a>1108</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1109"></a>1109</td><td></td><td></td><td></td><td></td><td class="s">    # If called as a class method, initialize a new object.</td></tr>
<tr><td class="h"><a name="1110"></a>1110</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1111"></a>1111</td><td></td><td></td><td></td><td></td><td class="s">    $self = bless {}, $class unless $selfref;</td></tr>
<tr><td class="h"><a name="1112"></a>1112</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1113"></a>1113</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {sign}  = $sign . 'inf';</td></tr>
<tr><td class="h"><a name="1114"></a>1114</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {value} = $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="1115"></a>1115</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1116"></a>1116</td><td></td><td></td><td></td><td></td><td class="s">    # If rounding parameters are given as arguments, use them. If no rounding</td></tr>
<tr><td class="h"><a name="1117"></a>1117</td><td></td><td></td><td></td><td></td><td class="s">    # parameters are given, and if called as a class method, initialize the new</td></tr>
<tr><td class="h"><a name="1118"></a>1118</td><td></td><td></td><td></td><td></td><td class="s">    # instance with the class variables.</td></tr>
<tr><td class="h"><a name="1119"></a>1119</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1120"></a>1120</td><td></td><td></td><td></td><td></td><td class="s">    if (@r) {</td></tr>
<tr><td class="h"><a name="1121"></a>1121</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;can't specify both accuracy and precision&quot;</td></tr>
<tr><td class="h"><a name="1122"></a>1122</td><td></td><td></td><td></td><td></td><td class="s">          if @r &gt;= 2 &amp;&amp; defined($r[0]) &amp;&amp; defined($r[1]);</td></tr>
<tr><td class="h"><a name="1123"></a>1123</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $_[0];</td></tr>
<tr><td class="h"><a name="1124"></a>1124</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $_[1];</td></tr>
<tr><td class="h"><a name="1125"></a>1125</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (!$selfref) {</td></tr>
<tr><td class="h"><a name="1126"></a>1126</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $class -&gt; accuracy();</td></tr>
<tr><td class="h"><a name="1127"></a>1127</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $class -&gt; precision();</td></tr>
<tr><td class="h"><a name="1128"></a>1128</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1129"></a>1129</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1130"></a>1130</td><td></td><td></td><td></td><td></td><td class="s">    return $self;</td></tr>
<tr><td class="h"><a name="1131"></a>1131</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1132"></a>1132</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1133"></a>1133</td><td></td><td></td><td></td><td></td><td class="s">sub bnan {</td></tr>
<tr><td class="h"><a name="1134"></a>1134</td><td></td><td></td><td></td><td></td><td class="s">    # create/assign a 'NaN'</td></tr>
<tr><td class="h"><a name="1135"></a>1135</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1136"></a>1136</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="1137"></a>1137</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="1138"></a>1138</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="1139"></a>1139</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1140"></a>1140</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="1141"></a>1141</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="1142"></a>1142</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="1143"></a>1143</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1144"></a>1144</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1145"></a>1145</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1146"></a>1146</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref($self);</td></tr>
<tr><td class="h"><a name="1147"></a>1147</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1148"></a>1148</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1149"></a>1149</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1150"></a>1150</td><td class="c1">2</td><td class="c0"><span title="Avg 5.68ms">11.4ms</span></td><td class="c3">2</td><td class="c3">19Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 15Âµs (11+4) within Math::BigInt::BEGIN@1150 which was called:
#    once (11Âµs+4Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#1150">line 1150</a></div></div>        no strict 'refs';<div class="calls"><div class="calls_out">        # spent    15Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#1150">Math::BigInt::BEGIN@1150</a>
        # spent     4Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="1151"></a>1151</td><td></td><td></td><td></td><td></td><td class="s">        if (${&quot;${class}::_trap_nan&quot;}) {</td></tr>
<tr><td class="h"><a name="1152"></a>1152</td><td></td><td></td><td></td><td></td><td class="s">            croak(&quot;Tried to create NaN in $class-&gt;bnan()&quot;);</td></tr>
<tr><td class="h"><a name="1153"></a>1153</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1154"></a>1154</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1155"></a>1155</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1156"></a>1156</td><td></td><td></td><td></td><td></td><td class="s">    $self-&gt;import() if $IMPORT == 0;            # make require work</td></tr>
<tr><td class="h"><a name="1157"></a>1157</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1158"></a>1158</td><td></td><td></td><td></td><td></td><td class="s">    # Don't modify constant (read-only) objects.</td></tr>
<tr><td class="h"><a name="1159"></a>1159</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1160"></a>1160</td><td></td><td></td><td></td><td></td><td class="s">    return $self if $selfref &amp;&amp; $self-&gt;modify('bnan');</td></tr>
<tr><td class="h"><a name="1161"></a>1161</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1162"></a>1162</td><td></td><td></td><td></td><td></td><td class="s">    # Get the rounding parameters, if any.</td></tr>
<tr><td class="h"><a name="1163"></a>1163</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1164"></a>1164</td><td></td><td></td><td></td><td></td><td class="s">    my @r = @_;</td></tr>
<tr><td class="h"><a name="1165"></a>1165</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1166"></a>1166</td><td></td><td></td><td></td><td></td><td class="s">    $self = bless {}, $class unless $selfref;</td></tr>
<tr><td class="h"><a name="1167"></a>1167</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1168"></a>1168</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {sign}  = $nan;</td></tr>
<tr><td class="h"><a name="1169"></a>1169</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {value} = $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="1170"></a>1170</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1171"></a>1171</td><td></td><td></td><td></td><td></td><td class="s">    # If rounding parameters are given as arguments, use them. If no rounding</td></tr>
<tr><td class="h"><a name="1172"></a>1172</td><td></td><td></td><td></td><td></td><td class="s">    # parameters are given, and if called as a class method, initialize the new</td></tr>
<tr><td class="h"><a name="1173"></a>1173</td><td></td><td></td><td></td><td></td><td class="s">    # instance with the class variables.</td></tr>
<tr><td class="h"><a name="1174"></a>1174</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1175"></a>1175</td><td></td><td></td><td></td><td></td><td class="s">    if (@r) {</td></tr>
<tr><td class="h"><a name="1176"></a>1176</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;can't specify both accuracy and precision&quot;</td></tr>
<tr><td class="h"><a name="1177"></a>1177</td><td></td><td></td><td></td><td></td><td class="s">          if @r &gt;= 2 &amp;&amp; defined($r[0]) &amp;&amp; defined($r[1]);</td></tr>
<tr><td class="h"><a name="1178"></a>1178</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $_[0];</td></tr>
<tr><td class="h"><a name="1179"></a>1179</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $_[1];</td></tr>
<tr><td class="h"><a name="1180"></a>1180</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (!$selfref) {</td></tr>
<tr><td class="h"><a name="1181"></a>1181</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = $class -&gt; accuracy();</td></tr>
<tr><td class="h"><a name="1182"></a>1182</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = $class -&gt; precision();</td></tr>
<tr><td class="h"><a name="1183"></a>1183</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1184"></a>1184</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1185"></a>1185</td><td></td><td></td><td></td><td></td><td class="s">    return $self;</td></tr>
<tr><td class="h"><a name="1186"></a>1186</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1187"></a>1187</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1188"></a>1188</td><td></td><td></td><td></td><td></td><td class="s">sub bpi {</td></tr>
<tr><td class="h"><a name="1189"></a>1189</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1190"></a>1190</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="1191"></a>1191</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="1192"></a>1192</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="1193"></a>1193</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1194"></a>1194</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="1195"></a>1195</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="1196"></a>1196</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="1197"></a>1197</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1198"></a>1198</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1199"></a>1199</td><td></td><td></td><td></td><td></td><td class="s">    # Called as                 Argument list</td></tr>
<tr><td class="h"><a name="1200"></a>1200</td><td></td><td></td><td></td><td></td><td class="s">    # ---------                 -------------</td></tr>
<tr><td class="h"><a name="1201"></a>1201</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigFloat-&gt;bpi()     (&quot;Math::BigFloat&quot;)</td></tr>
<tr><td class="h"><a name="1202"></a>1202</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigFloat-&gt;bpi(10)   (&quot;Math::BigFloat&quot;, 10)</td></tr>
<tr><td class="h"><a name="1203"></a>1203</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;bpi()                 ($x)</td></tr>
<tr><td class="h"><a name="1204"></a>1204</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;bpi(10)               ($x, 10)</td></tr>
<tr><td class="h"><a name="1205"></a>1205</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigFloat::bpi()     ()</td></tr>
<tr><td class="h"><a name="1206"></a>1206</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigFloat::bpi(10)   (10)</td></tr>
<tr><td class="h"><a name="1207"></a>1207</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="1208"></a>1208</td><td></td><td></td><td></td><td></td><td class="s">    # In ambiguous cases, we favour the OO-style, so the following case</td></tr>
<tr><td class="h"><a name="1209"></a>1209</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="1210"></a>1210</td><td></td><td></td><td></td><td></td><td class="s">    #   $n = Math::BigFloat-&gt;new(&quot;10&quot;);</td></tr>
<tr><td class="h"><a name="1211"></a>1211</td><td></td><td></td><td></td><td></td><td class="s">    #   $x = Math::BigFloat-&gt;bpi($n);</td></tr>
<tr><td class="h"><a name="1212"></a>1212</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="1213"></a>1213</td><td></td><td></td><td></td><td></td><td class="s">    # which gives an argument list with the single element $n, is resolved as</td></tr>
<tr><td class="h"><a name="1214"></a>1214</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="1215"></a>1215</td><td></td><td></td><td></td><td></td><td class="s">    #   $n-&gt;bpi();</td></tr>
<tr><td class="h"><a name="1216"></a>1216</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1217"></a>1217</td><td></td><td></td><td></td><td></td><td class="s">    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1218"></a>1218</td><td></td><td></td><td></td><td></td><td class="s">    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1219"></a>1219</td><td></td><td></td><td></td><td></td><td class="s">    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1220"></a>1220</td><td></td><td></td><td></td><td></td><td class="s">    my @r       = @_;                   # rounding paramters</td></tr>
<tr><td class="h"><a name="1221"></a>1221</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1222"></a>1222</td><td></td><td></td><td></td><td></td><td class="s">    if ($selfref) {                     # bpi() called as an instance method</td></tr>
<tr><td class="h"><a name="1223"></a>1223</td><td></td><td></td><td></td><td></td><td class="s">        return $self if $self -&gt; modify('bpi');</td></tr>
<tr><td class="h"><a name="1224"></a>1224</td><td></td><td></td><td></td><td></td><td class="s">    } else {                            # bpi() called as a class method</td></tr>
<tr><td class="h"><a name="1225"></a>1225</td><td></td><td></td><td></td><td></td><td class="s">        $self = bless {}, $class;       # initialize new instance</td></tr>
<tr><td class="h"><a name="1226"></a>1226</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1227"></a>1227</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1228"></a>1228</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bpi(@r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="1229"></a>1229</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1230"></a>1230</td><td></td><td></td><td></td><td></td><td class="s">    # hard-wired to &quot;3&quot;</td></tr>
<tr><td class="h"><a name="1231"></a>1231</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {sign}  = '+';</td></tr>
<tr><td class="h"><a name="1232"></a>1232</td><td></td><td></td><td></td><td></td><td class="s">    $self -&gt; {value} = $LIB -&gt; _new(&quot;3&quot;);</td></tr>
<tr><td class="h"><a name="1233"></a>1233</td><td></td><td></td><td></td><td></td><td class="s">    $self = $self -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="1234"></a>1234</td><td></td><td></td><td></td><td></td><td class="s">    return $self;</td></tr>
<tr><td class="h"><a name="1235"></a>1235</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1236"></a>1236</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1237"></a>1237</td><td></td><td></td><td></td><td></td><td class="s">sub copy {</td></tr>
<tr><td class="h"><a name="1238"></a>1238</td><td></td><td></td><td></td><td></td><td class="s">    my ($x, $class);</td></tr>
<tr><td class="h"><a name="1239"></a>1239</td><td></td><td></td><td></td><td></td><td class="s">    if (ref($_[0])) {           # $y = $x -&gt; copy()</td></tr>
<tr><td class="h"><a name="1240"></a>1240</td><td></td><td></td><td></td><td></td><td class="s">        $x = shift;</td></tr>
<tr><td class="h"><a name="1241"></a>1241</td><td></td><td></td><td></td><td></td><td class="s">        $class = ref($x);</td></tr>
<tr><td class="h"><a name="1242"></a>1242</td><td></td><td></td><td></td><td></td><td class="s">    } else {                    # $y = Math::BigInt -&gt; copy($y)</td></tr>
<tr><td class="h"><a name="1243"></a>1243</td><td></td><td></td><td></td><td></td><td class="s">        $class = shift;</td></tr>
<tr><td class="h"><a name="1244"></a>1244</td><td></td><td></td><td></td><td></td><td class="s">        $x = shift;</td></tr>
<tr><td class="h"><a name="1245"></a>1245</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1246"></a>1246</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1247"></a>1247</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @_;</td></tr>
<tr><td class="h"><a name="1248"></a>1248</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1249"></a>1249</td><td></td><td></td><td></td><td></td><td class="s">    my $copy = bless {}, $class;</td></tr>
<tr><td class="h"><a name="1250"></a>1250</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1251"></a>1251</td><td></td><td></td><td></td><td></td><td class="s">    $copy-&gt;{sign}  = $x-&gt;{sign};</td></tr>
<tr><td class="h"><a name="1252"></a>1252</td><td></td><td></td><td></td><td></td><td class="s">    $copy-&gt;{value} = $LIB-&gt;_copy($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1253"></a>1253</td><td></td><td></td><td></td><td></td><td class="s">    $copy-&gt;{_a}    = $x-&gt;{_a} if exists $x-&gt;{_a};</td></tr>
<tr><td class="h"><a name="1254"></a>1254</td><td></td><td></td><td></td><td></td><td class="s">    $copy-&gt;{_p}    = $x-&gt;{_p} if exists $x-&gt;{_p};</td></tr>
<tr><td class="h"><a name="1255"></a>1255</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1256"></a>1256</td><td></td><td></td><td></td><td></td><td class="s">    return $copy;</td></tr>
<tr><td class="h"><a name="1257"></a>1257</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1258"></a>1258</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1259"></a>1259</td><td></td><td></td><td></td><td></td><td class="s">sub as_int {</td></tr>
<tr><td class="h"><a name="1260"></a>1260</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1261"></a>1261</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1262"></a>1262</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1263"></a>1263</td><td></td><td></td><td></td><td></td><td class="s">    # If called as an instance method, and the instance class is something we</td></tr>
<tr><td class="h"><a name="1264"></a>1264</td><td></td><td></td><td></td><td></td><td class="s">    # upgrade to, $x might not be a Math::BigInt, so don't just call copy().</td></tr>
<tr><td class="h"><a name="1265"></a>1265</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1266"></a>1266</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; copy() if $x -&gt; isa(&quot;Math::BigInt&quot;);</td></tr>
<tr><td class="h"><a name="1267"></a>1267</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1268"></a>1268</td><td></td><td></td><td></td><td></td><td class="s">    # disable upgrading and downgrading</td></tr>
<tr><td class="h"><a name="1269"></a>1269</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1270"></a>1270</td><td></td><td></td><td></td><td></td><td class="s">    my $upg = Math::BigInt -&gt; upgrade();</td></tr>
<tr><td class="h"><a name="1271"></a>1271</td><td></td><td></td><td></td><td></td><td class="s">    my $dng = Math::BigInt -&gt; downgrade();</td></tr>
<tr><td class="h"><a name="1272"></a>1272</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigInt -&gt; upgrade(undef);</td></tr>
<tr><td class="h"><a name="1273"></a>1273</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigInt -&gt; downgrade(undef);</td></tr>
<tr><td class="h"><a name="1274"></a>1274</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1275"></a>1275</td><td></td><td></td><td></td><td></td><td class="s">    my $y = Math::BigInt -&gt; new($x);</td></tr>
<tr><td class="h"><a name="1276"></a>1276</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1277"></a>1277</td><td></td><td></td><td></td><td></td><td class="s">    # reset upgrading and downgrading</td></tr>
<tr><td class="h"><a name="1278"></a>1278</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1279"></a>1279</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigInt -&gt; upgrade($upg);</td></tr>
<tr><td class="h"><a name="1280"></a>1280</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigInt -&gt; downgrade($dng);</td></tr>
<tr><td class="h"><a name="1281"></a>1281</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1282"></a>1282</td><td></td><td></td><td></td><td></td><td class="s">    return $y;</td></tr>
<tr><td class="h"><a name="1283"></a>1283</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1284"></a>1284</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1285"></a>1285</td><td></td><td></td><td></td><td></td><td class="s">sub as_float {</td></tr>
<tr><td class="h"><a name="1286"></a>1286</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1287"></a>1287</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1288"></a>1288</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1289"></a>1289</td><td></td><td></td><td></td><td></td><td class="s">    # disable upgrading and downgrading</td></tr>
<tr><td class="h"><a name="1290"></a>1290</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1291"></a>1291</td><td></td><td></td><td></td><td></td><td class="s">    require Math::BigFloat;</td></tr>
<tr><td class="h"><a name="1292"></a>1292</td><td></td><td></td><td></td><td></td><td class="s">    my $upg = Math::BigFloat -&gt; upgrade();</td></tr>
<tr><td class="h"><a name="1293"></a>1293</td><td></td><td></td><td></td><td></td><td class="s">    my $dng = Math::BigFloat -&gt; downgrade();</td></tr>
<tr><td class="h"><a name="1294"></a>1294</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigFloat -&gt; upgrade(undef);</td></tr>
<tr><td class="h"><a name="1295"></a>1295</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigFloat -&gt; downgrade(undef);</td></tr>
<tr><td class="h"><a name="1296"></a>1296</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1297"></a>1297</td><td></td><td></td><td></td><td></td><td class="s">    my $y = Math::BigFloat -&gt; new($x);</td></tr>
<tr><td class="h"><a name="1298"></a>1298</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1299"></a>1299</td><td></td><td></td><td></td><td></td><td class="s">    # reset upgrading and downgrading</td></tr>
<tr><td class="h"><a name="1300"></a>1300</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1301"></a>1301</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigFloat -&gt; upgrade($upg);</td></tr>
<tr><td class="h"><a name="1302"></a>1302</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigFloat -&gt; downgrade($dng);</td></tr>
<tr><td class="h"><a name="1303"></a>1303</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1304"></a>1304</td><td></td><td></td><td></td><td></td><td class="s">    return $y;</td></tr>
<tr><td class="h"><a name="1305"></a>1305</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1306"></a>1306</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1307"></a>1307</td><td></td><td></td><td></td><td></td><td class="s">sub as_rat {</td></tr>
<tr><td class="h"><a name="1308"></a>1308</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1309"></a>1309</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1310"></a>1310</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1311"></a>1311</td><td></td><td></td><td></td><td></td><td class="s">    # disable upgrading and downgrading</td></tr>
<tr><td class="h"><a name="1312"></a>1312</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1313"></a>1313</td><td></td><td></td><td></td><td></td><td class="s">    require Math::BigRat;</td></tr>
<tr><td class="h"><a name="1314"></a>1314</td><td></td><td></td><td></td><td></td><td class="s">    my $upg = Math::BigRat -&gt; upgrade();</td></tr>
<tr><td class="h"><a name="1315"></a>1315</td><td></td><td></td><td></td><td></td><td class="s">    my $dng = Math::BigRat -&gt; downgrade();</td></tr>
<tr><td class="h"><a name="1316"></a>1316</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigRat -&gt; upgrade(undef);</td></tr>
<tr><td class="h"><a name="1317"></a>1317</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigRat -&gt; downgrade(undef);</td></tr>
<tr><td class="h"><a name="1318"></a>1318</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1319"></a>1319</td><td></td><td></td><td></td><td></td><td class="s">    my $y = Math::BigRat -&gt; new($x);</td></tr>
<tr><td class="h"><a name="1320"></a>1320</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1321"></a>1321</td><td></td><td></td><td></td><td></td><td class="s">    # reset upgrading and downgrading</td></tr>
<tr><td class="h"><a name="1322"></a>1322</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1323"></a>1323</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigRat -&gt; upgrade($upg);</td></tr>
<tr><td class="h"><a name="1324"></a>1324</td><td></td><td></td><td></td><td></td><td class="s">    Math::BigRat -&gt; downgrade($dng);</td></tr>
<tr><td class="h"><a name="1325"></a>1325</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1326"></a>1326</td><td></td><td></td><td></td><td></td><td class="s">    return $y;</td></tr>
<tr><td class="h"><a name="1327"></a>1327</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1328"></a>1328</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1329"></a>1329</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="1330"></a>1330</td><td></td><td></td><td></td><td></td><td class="s"># Boolean methods</td></tr>
<tr><td class="h"><a name="1331"></a>1331</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="1332"></a>1332</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1333"></a>1333</td><td></td><td></td><td></td><td></td><td class="s">sub is_zero {</td></tr>
<tr><td class="h"><a name="1334"></a>1334</td><td></td><td></td><td></td><td></td><td class="s">    # return true if arg (BINT or num_str) is zero (array '+', '0')</td></tr>
<tr><td class="h"><a name="1335"></a>1335</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1336"></a>1336</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1337"></a>1337</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $x-&gt;{sign} !~ /^\+$/; # -, NaN &amp; +-inf aren't</td></tr>
<tr><td class="h"><a name="1338"></a>1338</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_is_zero($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1339"></a>1339</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1340"></a>1340</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1341"></a>1341</td><td></td><td></td><td></td><td></td><td class="s">sub is_one {</td></tr>
<tr><td class="h"><a name="1342"></a>1342</td><td></td><td></td><td></td><td></td><td class="s">    # return true if arg (BINT or num_str) is +1, or -1 if sign is given</td></tr>
<tr><td class="h"><a name="1343"></a>1343</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $sign) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1344"></a>1344</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1345"></a>1345</td><td></td><td></td><td></td><td></td><td class="s">    $sign = '+' if !defined($sign) || $sign ne '-';</td></tr>
<tr><td class="h"><a name="1346"></a>1346</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1347"></a>1347</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $x-&gt;{sign} ne $sign; # -1 != +1, NaN, +-inf aren't either</td></tr>
<tr><td class="h"><a name="1348"></a>1348</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_is_one($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1349"></a>1349</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1350"></a>1350</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1351"></a>1351</td><td></td><td></td><td></td><td></td><td class="s">sub is_finite {</td></tr>
<tr><td class="h"><a name="1352"></a>1352</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1353"></a>1353</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '+' || $x-&gt;{sign} eq '-';</td></tr>
<tr><td class="h"><a name="1354"></a>1354</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1355"></a>1355</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1356"></a>1356</td><td></td><td></td><td></td><td></td><td class="s">sub is_inf {</td></tr>
<tr><td class="h"><a name="1357"></a>1357</td><td></td><td></td><td></td><td></td><td class="s">    # return true if arg (BINT or num_str) is +-inf</td></tr>
<tr><td class="h"><a name="1358"></a>1358</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $sign) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1359"></a>1359</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1360"></a>1360</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $sign) {</td></tr>
<tr><td class="h"><a name="1361"></a>1361</td><td></td><td></td><td></td><td></td><td class="s">        $sign = '[+-]inf' if $sign eq ''; # +- doesn't matter, only that's inf</td></tr>
<tr><td class="h"><a name="1362"></a>1362</td><td></td><td></td><td></td><td></td><td class="s">        $sign = &quot;[$1]inf&quot; if $sign =~ /^([+-])(inf)?$/; # extract '+' or '-'</td></tr>
<tr><td class="h"><a name="1363"></a>1363</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} =~ /^$sign$/ ? 1 : 0;</td></tr>
<tr><td class="h"><a name="1364"></a>1364</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1365"></a>1365</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} =~ /^[+-]inf$/ ? 1 : 0; # only +-inf is infinity</td></tr>
<tr><td class="h"><a name="1366"></a>1366</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1367"></a>1367</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1368"></a>1368</td><td></td><td></td><td></td><td></td><td class="s">sub is_nan {</td></tr>
<tr><td class="h"><a name="1369"></a>1369</td><td></td><td></td><td></td><td></td><td class="s">    # return true if arg (BINT or num_str) is NaN</td></tr>
<tr><td class="h"><a name="1370"></a>1370</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1371"></a>1371</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1372"></a>1372</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} eq $nan ? 1 : 0;</td></tr>
<tr><td class="h"><a name="1373"></a>1373</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1374"></a>1374</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1375"></a>1375</td><td></td><td></td><td></td><td></td><td class="s">sub is_positive {</td></tr>
<tr><td class="h"><a name="1376"></a>1376</td><td></td><td></td><td></td><td></td><td class="s">    # return true when arg (BINT or num_str) is positive (&gt; 0)</td></tr>
<tr><td class="h"><a name="1377"></a>1377</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1378"></a>1378</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1379"></a>1379</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $x-&gt;{sign} eq '+inf'; # +inf is positive</td></tr>
<tr><td class="h"><a name="1380"></a>1380</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1381"></a>1381</td><td></td><td></td><td></td><td></td><td class="s">    # 0+ is neither positive nor negative</td></tr>
<tr><td class="h"><a name="1382"></a>1382</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{sign} eq '+' &amp;&amp; !$x-&gt;is_zero()) ? 1 : 0;</td></tr>
<tr><td class="h"><a name="1383"></a>1383</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1384"></a>1384</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1385"></a>1385</td><td></td><td></td><td></td><td></td><td class="s">sub is_negative {</td></tr>
<tr><td class="h"><a name="1386"></a>1386</td><td></td><td></td><td></td><td></td><td class="s">    # return true when arg (BINT or num_str) is negative (&lt; 0)</td></tr>
<tr><td class="h"><a name="1387"></a>1387</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1388"></a>1388</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1389"></a>1389</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} =~ /^-/ ? 1 : 0; # -inf is negative, but NaN is not</td></tr>
<tr><td class="h"><a name="1390"></a>1390</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1391"></a>1391</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1392"></a>1392</td><td></td><td></td><td></td><td></td><td class="s">sub is_non_negative {</td></tr>
<tr><td class="h"><a name="1393"></a>1393</td><td></td><td></td><td></td><td></td><td class="s">    # Return true if argument is non-negative (&gt;= 0).</td></tr>
<tr><td class="h"><a name="1394"></a>1394</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1395"></a>1395</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1396"></a>1396</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $x-&gt;{sign} =~ /^\+/;</td></tr>
<tr><td class="h"><a name="1397"></a>1397</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $x -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="1398"></a>1398</td><td></td><td></td><td></td><td></td><td class="s">    return 0;</td></tr>
<tr><td class="h"><a name="1399"></a>1399</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1400"></a>1400</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1401"></a>1401</td><td></td><td></td><td></td><td></td><td class="s">sub is_non_positive {</td></tr>
<tr><td class="h"><a name="1402"></a>1402</td><td></td><td></td><td></td><td></td><td class="s">    # Return true if argument is non-positive (&lt;= 0).</td></tr>
<tr><td class="h"><a name="1403"></a>1403</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1404"></a>1404</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1405"></a>1405</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $x-&gt;{sign} =~ /^\-/;</td></tr>
<tr><td class="h"><a name="1406"></a>1406</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $x -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="1407"></a>1407</td><td></td><td></td><td></td><td></td><td class="s">    return 0;</td></tr>
<tr><td class="h"><a name="1408"></a>1408</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1409"></a>1409</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1410"></a>1410</td><td></td><td></td><td></td><td></td><td class="s">sub is_odd {</td></tr>
<tr><td class="h"><a name="1411"></a>1411</td><td></td><td></td><td></td><td></td><td class="s">    # return true when arg (BINT or num_str) is odd, false for even</td></tr>
<tr><td class="h"><a name="1412"></a>1412</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1413"></a>1413</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1414"></a>1414</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $x-&gt;{sign} !~ /^[+-]$/; # NaN &amp; +-inf aren't</td></tr>
<tr><td class="h"><a name="1415"></a>1415</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_is_odd($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1416"></a>1416</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1417"></a>1417</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1418"></a>1418</td><td></td><td></td><td></td><td></td><td class="s">sub is_even {</td></tr>
<tr><td class="h"><a name="1419"></a>1419</td><td></td><td></td><td></td><td></td><td class="s">    # return true when arg (BINT or num_str) is even, false for odd</td></tr>
<tr><td class="h"><a name="1420"></a>1420</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1421"></a>1421</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1422"></a>1422</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $x-&gt;{sign} !~ /^[+-]$/; # NaN &amp; +-inf aren't</td></tr>
<tr><td class="h"><a name="1423"></a>1423</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_is_even($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1424"></a>1424</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1425"></a>1425</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1426"></a>1426</td><td></td><td></td><td></td><td></td><td class="s">sub is_int {</td></tr>
<tr><td class="h"><a name="1427"></a>1427</td><td></td><td></td><td></td><td></td><td class="s">    # return true when arg (BINT or num_str) is an integer</td></tr>
<tr><td class="h"><a name="1428"></a>1428</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1429"></a>1429</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1430"></a>1430</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} =~ /^[+-]$/ ? 1 : 0; # inf/-inf/NaN aren't</td></tr>
<tr><td class="h"><a name="1431"></a>1431</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1432"></a>1432</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1433"></a>1433</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="1434"></a>1434</td><td></td><td></td><td></td><td></td><td class="s"># Comparison methods</td></tr>
<tr><td class="h"><a name="1435"></a>1435</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="1436"></a>1436</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1437"></a>1437</td><td></td><td></td><td></td><td></td><td class="s">sub bcmp {</td></tr>
<tr><td class="h"><a name="1438"></a>1438</td><td></td><td></td><td></td><td></td><td class="s">    # Compares 2 values.  Returns one of undef, &lt;0, =0, &gt;0. (suitable for sort)</td></tr>
<tr><td class="h"><a name="1439"></a>1439</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return cond_code</td></tr>
<tr><td class="h"><a name="1440"></a>1440</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1441"></a>1441</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="1442"></a>1442</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1443"></a>1443</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="1444"></a>1444</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1445"></a>1445</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1446"></a>1446</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1447"></a>1447</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1448"></a>1448</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;bcmp($x, $y)</td></tr>
<tr><td class="h"><a name="1449"></a>1449</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x-&gt;isa($class) || !$y-&gt;isa($class));</td></tr>
<tr><td class="h"><a name="1450"></a>1450</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1451"></a>1451</td><td></td><td></td><td></td><td></td><td class="s">    if (($x-&gt;{sign} !~ /^[+-]$/) || ($y-&gt;{sign} !~ /^[+-]$/)) {</td></tr>
<tr><td class="h"><a name="1452"></a>1452</td><td></td><td></td><td></td><td></td><td class="s">        # handle +-inf and NaN</td></tr>
<tr><td class="h"><a name="1453"></a>1453</td><td></td><td></td><td></td><td></td><td class="s">        return    if (($x-&gt;{sign} eq $nan) || ($y-&gt;{sign} eq $nan));</td></tr>
<tr><td class="h"><a name="1454"></a>1454</td><td></td><td></td><td></td><td></td><td class="s">        return  0 if $x-&gt;{sign} eq $y-&gt;{sign} &amp;&amp; $x-&gt;{sign} =~ /^[+-]inf$/;</td></tr>
<tr><td class="h"><a name="1455"></a>1455</td><td></td><td></td><td></td><td></td><td class="s">        return +1 if $x-&gt;{sign} eq '+inf';</td></tr>
<tr><td class="h"><a name="1456"></a>1456</td><td></td><td></td><td></td><td></td><td class="s">        return -1 if $x-&gt;{sign} eq '-inf';</td></tr>
<tr><td class="h"><a name="1457"></a>1457</td><td></td><td></td><td></td><td></td><td class="s">        return -1 if $y-&gt;{sign} eq '+inf';</td></tr>
<tr><td class="h"><a name="1458"></a>1458</td><td></td><td></td><td></td><td></td><td class="s">        return +1;</td></tr>
<tr><td class="h"><a name="1459"></a>1459</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1460"></a>1460</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1461"></a>1461</td><td></td><td></td><td></td><td></td><td class="s">    # check sign for speed first</td></tr>
<tr><td class="h"><a name="1462"></a>1462</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $x-&gt;{sign} eq '+' &amp;&amp; $y-&gt;{sign} eq '-'; # does also 0 &lt;=&gt; -y</td></tr>
<tr><td class="h"><a name="1463"></a>1463</td><td></td><td></td><td></td><td></td><td class="s">    return -1 if $x-&gt;{sign} eq '-' &amp;&amp; $y-&gt;{sign} eq '+'; # does also -x &lt;=&gt; 0</td></tr>
<tr><td class="h"><a name="1464"></a>1464</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1465"></a>1465</td><td></td><td></td><td></td><td></td><td class="s">    # have same sign, so compare absolute values.  Don't make tests for zero</td></tr>
<tr><td class="h"><a name="1466"></a>1466</td><td></td><td></td><td></td><td></td><td class="s">    # here because it's actually slower than testing in Calc (especially w/ Pari</td></tr>
<tr><td class="h"><a name="1467"></a>1467</td><td></td><td></td><td></td><td></td><td class="s">    # et al)</td></tr>
<tr><td class="h"><a name="1468"></a>1468</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1469"></a>1469</td><td></td><td></td><td></td><td></td><td class="s">    # post-normalized compare for internal use (honors signs)</td></tr>
<tr><td class="h"><a name="1470"></a>1470</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq '+') {</td></tr>
<tr><td class="h"><a name="1471"></a>1471</td><td></td><td></td><td></td><td></td><td class="s">        # $x and $y both &gt; 0</td></tr>
<tr><td class="h"><a name="1472"></a>1472</td><td></td><td></td><td></td><td></td><td class="s">        return $LIB-&gt;_acmp($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="1473"></a>1473</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1474"></a>1474</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1475"></a>1475</td><td></td><td></td><td></td><td></td><td class="s">    # $x &amp;&amp; $y both &lt; 0</td></tr>
<tr><td class="h"><a name="1476"></a>1476</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_acmp($y-&gt;{value}, $x-&gt;{value}); # swapped acmp (lib returns 0, 1, -1)</td></tr>
<tr><td class="h"><a name="1477"></a>1477</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1478"></a>1478</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1479"></a>1479</td><td></td><td></td><td></td><td></td><td class="s">sub bacmp {</td></tr>
<tr><td class="h"><a name="1480"></a>1480</td><td></td><td></td><td></td><td></td><td class="s">    # Compares 2 values, ignoring their signs.</td></tr>
<tr><td class="h"><a name="1481"></a>1481</td><td></td><td></td><td></td><td></td><td class="s">    # Returns one of undef, &lt;0, =0, &gt;0. (suitable for sort)</td></tr>
<tr><td class="h"><a name="1482"></a>1482</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT, BINT) return cond_code</td></tr>
<tr><td class="h"><a name="1483"></a>1483</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1484"></a>1484</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="1485"></a>1485</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1486"></a>1486</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="1487"></a>1487</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1488"></a>1488</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1489"></a>1489</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1490"></a>1490</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1491"></a>1491</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;bacmp($x, $y)</td></tr>
<tr><td class="h"><a name="1492"></a>1492</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x-&gt;isa($class) || !$y-&gt;isa($class));</td></tr>
<tr><td class="h"><a name="1493"></a>1493</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1494"></a>1494</td><td></td><td></td><td></td><td></td><td class="s">    if (($x-&gt;{sign} !~ /^[+-]$/) || ($y-&gt;{sign} !~ /^[+-]$/)) {</td></tr>
<tr><td class="h"><a name="1495"></a>1495</td><td></td><td></td><td></td><td></td><td class="s">        # handle +-inf and NaN</td></tr>
<tr><td class="h"><a name="1496"></a>1496</td><td></td><td></td><td></td><td></td><td class="s">        return   if (($x-&gt;{sign} eq $nan) || ($y-&gt;{sign} eq $nan));</td></tr>
<tr><td class="h"><a name="1497"></a>1497</td><td></td><td></td><td></td><td></td><td class="s">        return 0 if $x-&gt;{sign} =~ /^[+-]inf$/ &amp;&amp; $y-&gt;{sign} =~ /^[+-]inf$/;</td></tr>
<tr><td class="h"><a name="1498"></a>1498</td><td></td><td></td><td></td><td></td><td class="s">        return 1 if $x-&gt;{sign} =~ /^[+-]inf$/ &amp;&amp; $y-&gt;{sign} !~ /^[+-]inf$/;</td></tr>
<tr><td class="h"><a name="1499"></a>1499</td><td></td><td></td><td></td><td></td><td class="s">        return -1;</td></tr>
<tr><td class="h"><a name="1500"></a>1500</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1501"></a>1501</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_acmp($x-&gt;{value}, $y-&gt;{value}); # lib does only 0, 1, -1</td></tr>
<tr><td class="h"><a name="1502"></a>1502</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1503"></a>1503</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1504"></a>1504</td><td></td><td></td><td></td><td></td><td class="s">sub beq {</td></tr>
<tr><td class="h"><a name="1505"></a>1505</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1506"></a>1506</td><td></td><td></td><td></td><td></td><td class="s">                           ? (undef, @_)</td></tr>
<tr><td class="h"><a name="1507"></a>1507</td><td></td><td></td><td></td><td></td><td class="s">                           : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1508"></a>1508</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1509"></a>1509</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1510"></a>1510</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1511"></a>1511</td><td></td><td></td><td></td><td></td><td class="s">    my $cmp = $x -&gt; bcmp($y);           # bcmp() upgrades if necessary</td></tr>
<tr><td class="h"><a name="1512"></a>1512</td><td></td><td></td><td></td><td></td><td class="s">    return defined($cmp) &amp;&amp; !$cmp;</td></tr>
<tr><td class="h"><a name="1513"></a>1513</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1514"></a>1514</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1515"></a>1515</td><td></td><td></td><td></td><td></td><td class="s">sub bne {</td></tr>
<tr><td class="h"><a name="1516"></a>1516</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1517"></a>1517</td><td></td><td></td><td></td><td></td><td class="s">                           ? (undef, @_)</td></tr>
<tr><td class="h"><a name="1518"></a>1518</td><td></td><td></td><td></td><td></td><td class="s">                           : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1519"></a>1519</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1520"></a>1520</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1521"></a>1521</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1522"></a>1522</td><td></td><td></td><td></td><td></td><td class="s">    my $cmp = $x -&gt; bcmp($y);           # bcmp() upgrades if necessary</td></tr>
<tr><td class="h"><a name="1523"></a>1523</td><td></td><td></td><td></td><td></td><td class="s">    return defined($cmp) &amp;&amp; !$cmp ? '' : 1;</td></tr>
<tr><td class="h"><a name="1524"></a>1524</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1525"></a>1525</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1526"></a>1526</td><td></td><td></td><td></td><td></td><td class="s">sub blt {</td></tr>
<tr><td class="h"><a name="1527"></a>1527</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1528"></a>1528</td><td></td><td></td><td></td><td></td><td class="s">                           ? (undef, @_)</td></tr>
<tr><td class="h"><a name="1529"></a>1529</td><td></td><td></td><td></td><td></td><td class="s">                           : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1530"></a>1530</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1531"></a>1531</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1532"></a>1532</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1533"></a>1533</td><td></td><td></td><td></td><td></td><td class="s">    my $cmp = $x -&gt; bcmp($y);           # bcmp() upgrades if necessary</td></tr>
<tr><td class="h"><a name="1534"></a>1534</td><td></td><td></td><td></td><td></td><td class="s">    return defined($cmp) &amp;&amp; $cmp &lt; 0;</td></tr>
<tr><td class="h"><a name="1535"></a>1535</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1536"></a>1536</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1537"></a>1537</td><td></td><td></td><td></td><td></td><td class="s">sub ble {</td></tr>
<tr><td class="h"><a name="1538"></a>1538</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1539"></a>1539</td><td></td><td></td><td></td><td></td><td class="s">                           ? (undef, @_)</td></tr>
<tr><td class="h"><a name="1540"></a>1540</td><td></td><td></td><td></td><td></td><td class="s">                           : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1541"></a>1541</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1542"></a>1542</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1543"></a>1543</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1544"></a>1544</td><td></td><td></td><td></td><td></td><td class="s">    my $cmp = $x -&gt; bcmp($y);           # bcmp() upgrades if necessary</td></tr>
<tr><td class="h"><a name="1545"></a>1545</td><td></td><td></td><td></td><td></td><td class="s">    return defined($cmp) &amp;&amp; $cmp &lt;= 0;</td></tr>
<tr><td class="h"><a name="1546"></a>1546</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1547"></a>1547</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1548"></a>1548</td><td></td><td></td><td></td><td></td><td class="s">sub bgt {</td></tr>
<tr><td class="h"><a name="1549"></a>1549</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1550"></a>1550</td><td></td><td></td><td></td><td></td><td class="s">                           ? (undef, @_)</td></tr>
<tr><td class="h"><a name="1551"></a>1551</td><td></td><td></td><td></td><td></td><td class="s">                           : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1552"></a>1552</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1553"></a>1553</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1554"></a>1554</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1555"></a>1555</td><td></td><td></td><td></td><td></td><td class="s">    my $cmp = $x -&gt; bcmp($y);           # bcmp() upgrades if necessary</td></tr>
<tr><td class="h"><a name="1556"></a>1556</td><td></td><td></td><td></td><td></td><td class="s">    return defined($cmp) &amp;&amp; $cmp &gt; 0;</td></tr>
<tr><td class="h"><a name="1557"></a>1557</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1558"></a>1558</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1559"></a>1559</td><td></td><td></td><td></td><td></td><td class="s">sub bge {</td></tr>
<tr><td class="h"><a name="1560"></a>1560</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1561"></a>1561</td><td></td><td></td><td></td><td></td><td class="s">                           ? (undef, @_)</td></tr>
<tr><td class="h"><a name="1562"></a>1562</td><td></td><td></td><td></td><td></td><td class="s">                           : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1563"></a>1563</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1564"></a>1564</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1565"></a>1565</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1566"></a>1566</td><td></td><td></td><td></td><td></td><td class="s">    my $cmp = $x -&gt; bcmp($y);           # bcmp() upgrades if necessary</td></tr>
<tr><td class="h"><a name="1567"></a>1567</td><td></td><td></td><td></td><td></td><td class="s">    return defined($cmp) &amp;&amp; $cmp &gt;= 0;</td></tr>
<tr><td class="h"><a name="1568"></a>1568</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1569"></a>1569</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1570"></a>1570</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="1571"></a>1571</td><td></td><td></td><td></td><td></td><td class="s"># Arithmetic methods</td></tr>
<tr><td class="h"><a name="1572"></a>1572</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="1573"></a>1573</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1574"></a>1574</td><td></td><td></td><td></td><td></td><td class="s">sub bneg {</td></tr>
<tr><td class="h"><a name="1575"></a>1575</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="1576"></a>1576</td><td></td><td></td><td></td><td></td><td class="s">    # negate number or make a negated number from string</td></tr>
<tr><td class="h"><a name="1577"></a>1577</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1578"></a>1578</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1579"></a>1579</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bneg');</td></tr>
<tr><td class="h"><a name="1580"></a>1580</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1581"></a>1581</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bneg($x, @r) if defined($upgrade) &amp;&amp; !$x-&gt;isa($class);</td></tr>
<tr><td class="h"><a name="1582"></a>1582</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1583"></a>1583</td><td></td><td></td><td></td><td></td><td class="s">    # Don't negate +0 so we always have the normalized form +0. Does nothing for</td></tr>
<tr><td class="h"><a name="1584"></a>1584</td><td></td><td></td><td></td><td></td><td class="s">    # 'NaN'.</td></tr>
<tr><td class="h"><a name="1585"></a>1585</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} =~ tr/+-/-+/</td></tr>
<tr><td class="h"><a name="1586"></a>1586</td><td></td><td></td><td></td><td></td><td class="s">      unless $x-&gt;{sign} eq '+' &amp;&amp; $LIB-&gt;_is_zero($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1587"></a>1587</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1588"></a>1588</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="1589"></a>1589</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1590"></a>1590</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1591"></a>1591</td><td></td><td></td><td></td><td></td><td class="s">sub babs {</td></tr>
<tr><td class="h"><a name="1592"></a>1592</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="1593"></a>1593</td><td></td><td></td><td></td><td></td><td class="s">    # make number absolute, or return absolute BINT from string</td></tr>
<tr><td class="h"><a name="1594"></a>1594</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1595"></a>1595</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1596"></a>1596</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('babs');</td></tr>
<tr><td class="h"><a name="1597"></a>1597</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1598"></a>1598</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; babs($x, @r) if defined($upgrade) &amp;&amp; !$x-&gt;isa($class);</td></tr>
<tr><td class="h"><a name="1599"></a>1599</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1600"></a>1600</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} =~ s/^-/+/;</td></tr>
<tr><td class="h"><a name="1601"></a>1601</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1602"></a>1602</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="1603"></a>1603</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1604"></a>1604</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1605"></a>1605</td><td></td><td></td><td></td><td></td><td class="s">sub bsgn {</td></tr>
<tr><td class="h"><a name="1606"></a>1606</td><td></td><td></td><td></td><td></td><td class="s">    # Signum function.</td></tr>
<tr><td class="h"><a name="1607"></a>1607</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1608"></a>1608</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1609"></a>1609</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bsgn');</td></tr>
<tr><td class="h"><a name="1610"></a>1610</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1611"></a>1611</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bsgn($x, @r) if defined($upgrade) &amp;&amp; !$x-&gt;isa($class);</td></tr>
<tr><td class="h"><a name="1612"></a>1612</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1613"></a>1613</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bone(&quot;+&quot;, @r) if $x -&gt; is_pos();</td></tr>
<tr><td class="h"><a name="1614"></a>1614</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bone(&quot;-&quot;, @r) if $x -&gt; is_neg();</td></tr>
<tr><td class="h"><a name="1615"></a>1615</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1616"></a>1616</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="1617"></a>1617</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1618"></a>1618</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1619"></a>1619</td><td></td><td></td><td></td><td></td><td class="s">sub bnorm {</td></tr>
<tr><td class="h"><a name="1620"></a>1620</td><td></td><td></td><td></td><td></td><td class="s">    # (numstr or BINT) return BINT</td></tr>
<tr><td class="h"><a name="1621"></a>1621</td><td></td><td></td><td></td><td></td><td class="s">    # Normalize number -- no-op here</td></tr>
<tr><td class="h"><a name="1622"></a>1622</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (undef, $_[0]) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1623"></a>1623</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1624"></a>1624</td><td></td><td></td><td></td><td></td><td class="s">    # This method is called from the rounding methods, so if this method</td></tr>
<tr><td class="h"><a name="1625"></a>1625</td><td></td><td></td><td></td><td></td><td class="s">    # supports rounding by calling the rounding methods, we get an infinite</td></tr>
<tr><td class="h"><a name="1626"></a>1626</td><td></td><td></td><td></td><td></td><td class="s">    # recursion.</td></tr>
<tr><td class="h"><a name="1627"></a>1627</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1628"></a>1628</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="1629"></a>1629</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1630"></a>1630</td><td></td><td></td><td></td><td></td><td class="s">    $x;</td></tr>
<tr><td class="h"><a name="1631"></a>1631</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1632"></a>1632</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1633"></a>1633</td><td></td><td></td><td></td><td></td><td class="s">sub binc {</td></tr>
<tr><td class="h"><a name="1634"></a>1634</td><td></td><td></td><td></td><td></td><td class="s">    # increment arg by one</td></tr>
<tr><td class="h"><a name="1635"></a>1635</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1636"></a>1636</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1637"></a>1637</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('binc');</td></tr>
<tr><td class="h"><a name="1638"></a>1638</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1639"></a>1639</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r) if $x -&gt; is_inf() || $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="1640"></a>1640</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1641"></a>1641</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; binc($x, @r) if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="1642"></a>1642</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1643"></a>1643</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq '+') {</td></tr>
<tr><td class="h"><a name="1644"></a>1644</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_inc($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1645"></a>1645</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x-&gt;{sign} eq '-') {</td></tr>
<tr><td class="h"><a name="1646"></a>1646</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_dec($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1647"></a>1647</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{sign} = '+' if $LIB-&gt;_is_zero($x-&gt;{value}); # -1 +1 =&gt; -0 =&gt; +0</td></tr>
<tr><td class="h"><a name="1648"></a>1648</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1649"></a>1649</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1650"></a>1650</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="1651"></a>1651</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1652"></a>1652</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1653"></a>1653</td><td></td><td></td><td></td><td></td><td class="s">sub bdec {</td></tr>
<tr><td class="h"><a name="1654"></a>1654</td><td></td><td></td><td></td><td></td><td class="s">    # decrement arg by one</td></tr>
<tr><td class="h"><a name="1655"></a>1655</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="1656"></a>1656</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1657"></a>1657</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bdec');</td></tr>
<tr><td class="h"><a name="1658"></a>1658</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1659"></a>1659</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r) if $x -&gt; is_inf() || $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="1660"></a>1660</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1661"></a>1661</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bdec($x, @r) if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);;</td></tr>
<tr><td class="h"><a name="1662"></a>1662</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1663"></a>1663</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq '-') {</td></tr>
<tr><td class="h"><a name="1664"></a>1664</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_inc($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1665"></a>1665</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x-&gt;{sign} eq '+') {</td></tr>
<tr><td class="h"><a name="1666"></a>1666</td><td></td><td></td><td></td><td></td><td class="s">        if ($LIB-&gt;_is_zero($x-&gt;{value})) {      # +1 - 1 =&gt; +0</td></tr>
<tr><td class="h"><a name="1667"></a>1667</td><td></td><td></td><td></td><td></td><td class="s">            $x-&gt;{value} = $LIB-&gt;_one();</td></tr>
<tr><td class="h"><a name="1668"></a>1668</td><td></td><td></td><td></td><td></td><td class="s">            $x-&gt;{sign} = '-';</td></tr>
<tr><td class="h"><a name="1669"></a>1669</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="1670"></a>1670</td><td></td><td></td><td></td><td></td><td class="s">            $x-&gt;{value} = $LIB-&gt;_dec($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="1671"></a>1671</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1672"></a>1672</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1673"></a>1673</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1674"></a>1674</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="1675"></a>1675</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1676"></a>1676</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1677"></a>1677</td><td></td><td></td><td></td><td></td><td class="s">#sub bstrcmp {</td></tr>
<tr><td class="h"><a name="1678"></a>1678</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1679"></a>1679</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1680"></a>1680</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1681"></a>1681</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1682"></a>1682</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstrcmp() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1683"></a>1683</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1684"></a>1684</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstrcmp()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1685"></a>1685</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1686"></a>1686</td><td></td><td></td><td></td><td></td><td class="s">#    return $self -&gt; bstr() CORE::cmp shift;</td></tr>
<tr><td class="h"><a name="1687"></a>1687</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1688"></a>1688</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1689"></a>1689</td><td></td><td></td><td></td><td></td><td class="s">#sub bstreq {</td></tr>
<tr><td class="h"><a name="1690"></a>1690</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1691"></a>1691</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1692"></a>1692</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1693"></a>1693</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1694"></a>1694</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstreq() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1695"></a>1695</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1696"></a>1696</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstreq()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1697"></a>1697</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1698"></a>1698</td><td></td><td></td><td></td><td></td><td class="s">#    my $cmp = $self -&gt; bstrcmp(shift);</td></tr>
<tr><td class="h"><a name="1699"></a>1699</td><td></td><td></td><td></td><td></td><td class="s">#    return defined($cmp) &amp;&amp; ! $cmp;</td></tr>
<tr><td class="h"><a name="1700"></a>1700</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1701"></a>1701</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1702"></a>1702</td><td></td><td></td><td></td><td></td><td class="s">#sub bstrne {</td></tr>
<tr><td class="h"><a name="1703"></a>1703</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1704"></a>1704</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1705"></a>1705</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1706"></a>1706</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1707"></a>1707</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstrne() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1708"></a>1708</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1709"></a>1709</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstrne()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1710"></a>1710</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1711"></a>1711</td><td></td><td></td><td></td><td></td><td class="s">#    my $cmp = $self -&gt; bstrcmp(shift);</td></tr>
<tr><td class="h"><a name="1712"></a>1712</td><td></td><td></td><td></td><td></td><td class="s">#    return defined($cmp) &amp;&amp; ! $cmp ? '' : 1;</td></tr>
<tr><td class="h"><a name="1713"></a>1713</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1714"></a>1714</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1715"></a>1715</td><td></td><td></td><td></td><td></td><td class="s">#sub bstrlt {</td></tr>
<tr><td class="h"><a name="1716"></a>1716</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1717"></a>1717</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1718"></a>1718</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1719"></a>1719</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1720"></a>1720</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstrlt() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1721"></a>1721</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1722"></a>1722</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstrlt()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1723"></a>1723</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1724"></a>1724</td><td></td><td></td><td></td><td></td><td class="s">#    my $cmp = $self -&gt; bstrcmp(shift);</td></tr>
<tr><td class="h"><a name="1725"></a>1725</td><td></td><td></td><td></td><td></td><td class="s">#    return defined($cmp) &amp;&amp; $cmp &lt; 0;</td></tr>
<tr><td class="h"><a name="1726"></a>1726</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1727"></a>1727</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1728"></a>1728</td><td></td><td></td><td></td><td></td><td class="s">#sub bstrle {</td></tr>
<tr><td class="h"><a name="1729"></a>1729</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1730"></a>1730</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1731"></a>1731</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1732"></a>1732</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1733"></a>1733</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstrle() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1734"></a>1734</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1735"></a>1735</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstrle()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1736"></a>1736</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1737"></a>1737</td><td></td><td></td><td></td><td></td><td class="s">#    my $cmp = $self -&gt; bstrcmp(shift);</td></tr>
<tr><td class="h"><a name="1738"></a>1738</td><td></td><td></td><td></td><td></td><td class="s">#    return defined($cmp) &amp;&amp; $cmp &lt;= 0;</td></tr>
<tr><td class="h"><a name="1739"></a>1739</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1740"></a>1740</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1741"></a>1741</td><td></td><td></td><td></td><td></td><td class="s">#sub bstrgt {</td></tr>
<tr><td class="h"><a name="1742"></a>1742</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1743"></a>1743</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1744"></a>1744</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1745"></a>1745</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1746"></a>1746</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstrgt() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1747"></a>1747</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1748"></a>1748</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstrgt()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1749"></a>1749</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1750"></a>1750</td><td></td><td></td><td></td><td></td><td class="s">#    my $cmp = $self -&gt; bstrcmp(shift);</td></tr>
<tr><td class="h"><a name="1751"></a>1751</td><td></td><td></td><td></td><td></td><td class="s">#    return defined($cmp) &amp;&amp; $cmp &gt; 0;</td></tr>
<tr><td class="h"><a name="1752"></a>1752</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1753"></a>1753</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1754"></a>1754</td><td></td><td></td><td></td><td></td><td class="s">#sub bstrge {</td></tr>
<tr><td class="h"><a name="1755"></a>1755</td><td></td><td></td><td></td><td></td><td class="s">#    my $self    = shift;</td></tr>
<tr><td class="h"><a name="1756"></a>1756</td><td></td><td></td><td></td><td></td><td class="s">#    my $selfref = ref $self;</td></tr>
<tr><td class="h"><a name="1757"></a>1757</td><td></td><td></td><td></td><td></td><td class="s">#    my $class   = $selfref || $self;</td></tr>
<tr><td class="h"><a name="1758"></a>1758</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1759"></a>1759</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'bstrge() is an instance method, not a class method'</td></tr>
<tr><td class="h"><a name="1760"></a>1760</td><td></td><td></td><td></td><td></td><td class="s">#        unless $selfref;</td></tr>
<tr><td class="h"><a name="1761"></a>1761</td><td></td><td></td><td></td><td></td><td class="s">#    croak 'Wrong number of arguments for bstrge()' unless @_ == 1;</td></tr>
<tr><td class="h"><a name="1762"></a>1762</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1763"></a>1763</td><td></td><td></td><td></td><td></td><td class="s">#    my $cmp = $self -&gt; bstrcmp(shift);</td></tr>
<tr><td class="h"><a name="1764"></a>1764</td><td></td><td></td><td></td><td></td><td class="s">#    return defined($cmp) &amp;&amp; $cmp &gt;= 0;</td></tr>
<tr><td class="h"><a name="1765"></a>1765</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h"><a name="1766"></a>1766</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1767"></a>1767</td><td></td><td></td><td></td><td></td><td class="s">sub badd {</td></tr>
<tr><td class="h"><a name="1768"></a>1768</td><td></td><td></td><td></td><td></td><td class="s">    # add second arg (BINT or string) to first (BINT) (modifies first)</td></tr>
<tr><td class="h"><a name="1769"></a>1769</td><td></td><td></td><td></td><td></td><td class="s">    # return result as BINT</td></tr>
<tr><td class="h"><a name="1770"></a>1770</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1771"></a>1771</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="1772"></a>1772</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1773"></a>1773</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="1774"></a>1774</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1775"></a>1775</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1776"></a>1776</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('badd');</td></tr>
<tr><td class="h"><a name="1777"></a>1777</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1778"></a>1778</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="1779"></a>1779</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1780"></a>1780</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;badd($x, $y, @r)</td></tr>
<tr><td class="h"><a name="1781"></a>1781</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x-&gt;isa($class) || !$y-&gt;isa($class));</td></tr>
<tr><td class="h"><a name="1782"></a>1782</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1783"></a>1783</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN handling</td></tr>
<tr><td class="h"><a name="1784"></a>1784</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} !~ /^[+-]$/ || $y-&gt;{sign} !~ /^[+-]$/) {</td></tr>
<tr><td class="h"><a name="1785"></a>1785</td><td></td><td></td><td></td><td></td><td class="s">        # NaN first</td></tr>
<tr><td class="h"><a name="1786"></a>1786</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;bnan(@r) if (($x-&gt;{sign} eq $nan) || ($y-&gt;{sign} eq $nan));</td></tr>
<tr><td class="h"><a name="1787"></a>1787</td><td></td><td></td><td></td><td></td><td class="s">        # Inf handling</td></tr>
<tr><td class="h"><a name="1788"></a>1788</td><td></td><td></td><td></td><td></td><td class="s">        if (($x-&gt;{sign} =~ /^[+-]inf$/) &amp;&amp; ($y-&gt;{sign} =~ /^[+-]inf$/)) {</td></tr>
<tr><td class="h"><a name="1789"></a>1789</td><td></td><td></td><td></td><td></td><td class="s">            # +Inf + +Inf or -Inf + -Inf =&gt; same, rest is NaN</td></tr>
<tr><td class="h"><a name="1790"></a>1790</td><td></td><td></td><td></td><td></td><td class="s">            return $x-&gt;round(@r) if $x-&gt;{sign} eq $y-&gt;{sign};</td></tr>
<tr><td class="h"><a name="1791"></a>1791</td><td></td><td></td><td></td><td></td><td class="s">            return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1792"></a>1792</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1793"></a>1793</td><td></td><td></td><td></td><td></td><td class="s">        # Â±Inf + something =&gt; Â±Inf</td></tr>
<tr><td class="h"><a name="1794"></a>1794</td><td></td><td></td><td></td><td></td><td class="s">        # something + Â±Inf =&gt; Â±Inf</td></tr>
<tr><td class="h"><a name="1795"></a>1795</td><td></td><td></td><td></td><td></td><td class="s">        if ($y-&gt;{sign} =~ /^[+-]inf$/) {</td></tr>
<tr><td class="h"><a name="1796"></a>1796</td><td></td><td></td><td></td><td></td><td class="s">            $x-&gt;{sign} = $y-&gt;{sign};</td></tr>
<tr><td class="h"><a name="1797"></a>1797</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1798"></a>1798</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="1799"></a>1799</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1800"></a>1800</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1801"></a>1801</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{value}, $x-&gt;{sign})</td></tr>
<tr><td class="h"><a name="1802"></a>1802</td><td></td><td></td><td></td><td></td><td class="s">      = $LIB -&gt; _sadd($x-&gt;{value}, $x-&gt;{sign}, $y-&gt;{value}, $y-&gt;{sign});</td></tr>
<tr><td class="h"><a name="1803"></a>1803</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="1804"></a>1804</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1805"></a>1805</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1806"></a>1806</td><td></td><td></td><td></td><td></td><td class="s">sub bsub {</td></tr>
<tr><td class="h"><a name="1807"></a>1807</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="1808"></a>1808</td><td></td><td></td><td></td><td></td><td class="s">    # subtract second arg from first, modify first</td></tr>
<tr><td class="h"><a name="1809"></a>1809</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1810"></a>1810</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="1811"></a>1811</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1812"></a>1812</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="1813"></a>1813</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1814"></a>1814</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1815"></a>1815</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('bsub');</td></tr>
<tr><td class="h"><a name="1816"></a>1816</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1817"></a>1817</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bsub($x, $y, @r)</td></tr>
<tr><td class="h"><a name="1818"></a>1818</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x-&gt;isa($class) || !$y-&gt;isa($class));</td></tr>
<tr><td class="h"><a name="1819"></a>1819</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1820"></a>1820</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; round(@r) if $y -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="1821"></a>1821</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1822"></a>1822</td><td></td><td></td><td></td><td></td><td class="s">    # To correctly handle the lone special case $x -&gt; bsub($x), we note the</td></tr>
<tr><td class="h"><a name="1823"></a>1823</td><td></td><td></td><td></td><td></td><td class="s">    # sign of $x, then flip the sign from $y, and if the sign of $x did change,</td></tr>
<tr><td class="h"><a name="1824"></a>1824</td><td></td><td></td><td></td><td></td><td class="s">    # too, then we caught the special case:</td></tr>
<tr><td class="h"><a name="1825"></a>1825</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1826"></a>1826</td><td></td><td></td><td></td><td></td><td class="s">    my $xsign = $x -&gt; {sign};</td></tr>
<tr><td class="h"><a name="1827"></a>1827</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {sign} =~ tr/+-/-+/;  # does nothing for NaN</td></tr>
<tr><td class="h"><a name="1828"></a>1828</td><td></td><td></td><td></td><td></td><td class="s">    if ($xsign ne $x -&gt; {sign}) {</td></tr>
<tr><td class="h"><a name="1829"></a>1829</td><td></td><td></td><td></td><td></td><td class="s">        # special case of $x -&gt; bsub($x) results in 0</td></tr>
<tr><td class="h"><a name="1830"></a>1830</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bzero(@r) if $xsign =~ /^[+-]$/;</td></tr>
<tr><td class="h"><a name="1831"></a>1831</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r);    # NaN, -inf, +inf</td></tr>
<tr><td class="h"><a name="1832"></a>1832</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1833"></a>1833</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1834"></a>1834</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x -&gt; badd($y, @r);    # badd() does not leave internal zeros</td></tr>
<tr><td class="h"><a name="1835"></a>1835</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {sign} =~ tr/+-/-+/;  # refix $y (does nothing for NaN)</td></tr>
<tr><td class="h"><a name="1836"></a>1836</td><td></td><td></td><td></td><td></td><td class="s">    $x;                         # already rounded by badd() or no rounding</td></tr>
<tr><td class="h"><a name="1837"></a>1837</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1838"></a>1838</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1839"></a>1839</td><td></td><td></td><td></td><td></td><td class="s">sub bmul {</td></tr>
<tr><td class="h"><a name="1840"></a>1840</td><td></td><td></td><td></td><td></td><td class="s">    # multiply the first number by the second number</td></tr>
<tr><td class="h"><a name="1841"></a>1841</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="1842"></a>1842</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1843"></a>1843</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="1844"></a>1844</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="1845"></a>1845</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="1846"></a>1846</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="1847"></a>1847</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1848"></a>1848</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bmul');</td></tr>
<tr><td class="h"><a name="1849"></a>1849</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1850"></a>1850</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if (($x-&gt;{sign} eq $nan) || ($y-&gt;{sign} eq $nan));</td></tr>
<tr><td class="h"><a name="1851"></a>1851</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1852"></a>1852</td><td></td><td></td><td></td><td></td><td class="s">    # inf handling</td></tr>
<tr><td class="h"><a name="1853"></a>1853</td><td></td><td></td><td></td><td></td><td class="s">    if (($x-&gt;{sign} =~ /^[+-]inf$/) || ($y-&gt;{sign} =~ /^[+-]inf$/)) {</td></tr>
<tr><td class="h"><a name="1854"></a>1854</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;bnan(@r) if $x-&gt;is_zero() || $y-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="1855"></a>1855</td><td></td><td></td><td></td><td></td><td class="s">        # result will always be +-inf:</td></tr>
<tr><td class="h"><a name="1856"></a>1856</td><td></td><td></td><td></td><td></td><td class="s">        # +inf * +/+inf =&gt; +inf, -inf * -/-inf =&gt; +inf</td></tr>
<tr><td class="h"><a name="1857"></a>1857</td><td></td><td></td><td></td><td></td><td class="s">        # +inf * -/-inf =&gt; -inf, -inf * +/+inf =&gt; -inf</td></tr>
<tr><td class="h"><a name="1858"></a>1858</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;binf(@r) if ($x-&gt;{sign} =~ /^\+/ &amp;&amp; $y-&gt;{sign} =~ /^\+/);</td></tr>
<tr><td class="h"><a name="1859"></a>1859</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;binf(@r) if ($x-&gt;{sign} =~ /^-/ &amp;&amp; $y-&gt;{sign} =~ /^-/);</td></tr>
<tr><td class="h"><a name="1860"></a>1860</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;binf('-', @r);</td></tr>
<tr><td class="h"><a name="1861"></a>1861</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1862"></a>1862</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1863"></a>1863</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;bmul($x, $y, @r)</td></tr>
<tr><td class="h"><a name="1864"></a>1864</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x-&gt;isa($class) || !$y-&gt;isa($class));</td></tr>
<tr><td class="h"><a name="1865"></a>1865</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1866"></a>1866</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push here</td></tr>
<tr><td class="h"><a name="1867"></a>1867</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1868"></a>1868</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} = $x-&gt;{sign} eq $y-&gt;{sign} ? '+' : '-'; # +1 * +1 or -1 * -1 =&gt; +</td></tr>
<tr><td class="h"><a name="1869"></a>1869</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1870"></a>1870</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB-&gt;_mul($x-&gt;{value}, $y-&gt;{value}); # do actual math</td></tr>
<tr><td class="h"><a name="1871"></a>1871</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} = '+' if $LIB-&gt;_is_zero($x-&gt;{value});   # no -0</td></tr>
<tr><td class="h"><a name="1872"></a>1872</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1873"></a>1873</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="1874"></a>1874</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1875"></a>1875</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1876"></a>1876</td><td></td><td></td><td></td><td></td><td class="s">sub bmuladd {</td></tr>
<tr><td class="h"><a name="1877"></a>1877</td><td></td><td></td><td></td><td></td><td class="s">    # multiply two numbers and then add the third to the result</td></tr>
<tr><td class="h"><a name="1878"></a>1878</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="1879"></a>1879</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1880"></a>1880</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="1881"></a>1881</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, $z, @r)</td></tr>
<tr><td class="h"><a name="1882"></a>1882</td><td></td><td></td><td></td><td></td><td class="s">      = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1]) &amp;&amp; ref($_[1]) eq ref($_[2])</td></tr>
<tr><td class="h"><a name="1883"></a>1883</td><td></td><td></td><td></td><td></td><td class="s">      ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="1884"></a>1884</td><td></td><td></td><td></td><td></td><td class="s">      : objectify(3, @_);</td></tr>
<tr><td class="h"><a name="1885"></a>1885</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1886"></a>1886</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bmuladd');</td></tr>
<tr><td class="h"><a name="1887"></a>1887</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1888"></a>1888</td><td></td><td></td><td></td><td></td><td class="s">    # x, y, and z are finite numbers</td></tr>
<tr><td class="h"><a name="1889"></a>1889</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1890"></a>1890</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} =~ /^[+-]$/ &amp;&amp;</td></tr>
<tr><td class="h"><a name="1891"></a>1891</td><td></td><td></td><td></td><td></td><td class="s">        $y-&gt;{sign} =~ /^[+-]$/ &amp;&amp;</td></tr>
<tr><td class="h"><a name="1892"></a>1892</td><td></td><td></td><td></td><td></td><td class="s">        $z-&gt;{sign} =~ /^[+-]$/)</td></tr>
<tr><td class="h"><a name="1893"></a>1893</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="1894"></a>1894</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade-&gt;bmuladd($x, $y, $z, @r)</td></tr>
<tr><td class="h"><a name="1895"></a>1895</td><td></td><td></td><td></td><td></td><td class="s">          if defined($upgrade)</td></tr>
<tr><td class="h"><a name="1896"></a>1896</td><td></td><td></td><td></td><td></td><td class="s">               &amp;&amp; (!$x-&gt;isa($class) || !$y-&gt;isa($class) || !$z-&gt;isa($class));</td></tr>
<tr><td class="h"><a name="1897"></a>1897</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1898"></a>1898</td><td></td><td></td><td></td><td></td><td class="s">        # TODO: what if $y and $z have A or P set?</td></tr>
<tr><td class="h"><a name="1899"></a>1899</td><td></td><td></td><td></td><td></td><td class="s">        $r[3] = $z;             # no push here</td></tr>
<tr><td class="h"><a name="1900"></a>1900</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1901"></a>1901</td><td></td><td></td><td></td><td></td><td class="s">        my $zs = $z-&gt;{sign};</td></tr>
<tr><td class="h"><a name="1902"></a>1902</td><td></td><td></td><td></td><td></td><td class="s">        my $zv = $z-&gt;{value};</td></tr>
<tr><td class="h"><a name="1903"></a>1903</td><td></td><td></td><td></td><td></td><td class="s">        $zv = $LIB -&gt; _copy($zv) if refaddr($x) eq refaddr($z);</td></tr>
<tr><td class="h"><a name="1904"></a>1904</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1905"></a>1905</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{sign} = $x-&gt;{sign} eq $y-&gt;{sign} ? '+' : '-'; # +1 * +1 or -1 * -1 =&gt; +</td></tr>
<tr><td class="h"><a name="1906"></a>1906</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_mul($x-&gt;{value}, $y-&gt;{value}); # do actual math</td></tr>
<tr><td class="h"><a name="1907"></a>1907</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{sign} = '+' if $LIB-&gt;_is_zero($x-&gt;{value});    # no -0</td></tr>
<tr><td class="h"><a name="1908"></a>1908</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1909"></a>1909</td><td></td><td></td><td></td><td></td><td class="s">        ($x-&gt;{value}, $x-&gt;{sign})</td></tr>
<tr><td class="h"><a name="1910"></a>1910</td><td></td><td></td><td></td><td></td><td class="s">          = $LIB -&gt; _sadd($x-&gt;{value}, $x-&gt;{sign}, $zv, $zs);</td></tr>
<tr><td class="h"><a name="1911"></a>1911</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="1912"></a>1912</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1913"></a>1913</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1914"></a>1914</td><td></td><td></td><td></td><td></td><td class="s">    # At least one of x, y, and z is a NaN</td></tr>
<tr><td class="h"><a name="1915"></a>1915</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1916"></a>1916</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if (($x-&gt;{sign} eq $nan) ||</td></tr>
<tr><td class="h"><a name="1917"></a>1917</td><td></td><td></td><td></td><td></td><td class="s">                            ($y-&gt;{sign} eq $nan) ||</td></tr>
<tr><td class="h"><a name="1918"></a>1918</td><td></td><td></td><td></td><td></td><td class="s">                            ($z-&gt;{sign} eq $nan));</td></tr>
<tr><td class="h"><a name="1919"></a>1919</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1920"></a>1920</td><td></td><td></td><td></td><td></td><td class="s">    # At least one of x, y, and z is an Inf</td></tr>
<tr><td class="h"><a name="1921"></a>1921</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1922"></a>1922</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="1923"></a>1923</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1924"></a>1924</td><td></td><td></td><td></td><td></td><td class="s">        if ($y -&gt; is_neg()) {               # x = -inf, y &lt; 0</td></tr>
<tr><td class="h"><a name="1925"></a>1925</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="1926"></a>1926</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1927"></a>1927</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="1928"></a>1928</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="1929"></a>1929</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1930"></a>1930</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($y -&gt; is_zero()) {         # x = -inf, y = 0</td></tr>
<tr><td class="h"><a name="1931"></a>1931</td><td></td><td></td><td></td><td></td><td class="s">            return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1932"></a>1932</td><td></td><td></td><td></td><td></td><td class="s">        } else {                            # x = -inf, y &gt; 0</td></tr>
<tr><td class="h"><a name="1933"></a>1933</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1934"></a>1934</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1935"></a>1935</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="1936"></a>1936</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="1937"></a>1937</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1938"></a>1938</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1939"></a>1939</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1940"></a>1940</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1941"></a>1941</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1942"></a>1942</td><td></td><td></td><td></td><td></td><td class="s">        if ($y -&gt; is_neg()) {               # x = +inf, y &lt; 0</td></tr>
<tr><td class="h"><a name="1943"></a>1943</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1944"></a>1944</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1945"></a>1945</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="1946"></a>1946</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="1947"></a>1947</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1948"></a>1948</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($y -&gt; is_zero()) {         # x = +inf, y = 0</td></tr>
<tr><td class="h"><a name="1949"></a>1949</td><td></td><td></td><td></td><td></td><td class="s">            return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1950"></a>1950</td><td></td><td></td><td></td><td></td><td class="s">        } else {                            # x = +inf, y &gt; 0</td></tr>
<tr><td class="h"><a name="1951"></a>1951</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="1952"></a>1952</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1953"></a>1953</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="1954"></a>1954</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="1955"></a>1955</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1956"></a>1956</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1957"></a>1957</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1958"></a>1958</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x -&gt; is_neg()) {</td></tr>
<tr><td class="h"><a name="1959"></a>1959</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1960"></a>1960</td><td></td><td></td><td></td><td></td><td class="s">        if ($y-&gt;{sign} eq &quot;-inf&quot;) {         # -inf &lt; x &lt; 0, y = -inf</td></tr>
<tr><td class="h"><a name="1961"></a>1961</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="1962"></a>1962</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1963"></a>1963</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="1964"></a>1964</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="1965"></a>1965</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1966"></a>1966</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($y-&gt;{sign} eq &quot;+inf&quot;) {    # -inf &lt; x &lt; 0, y = +inf</td></tr>
<tr><td class="h"><a name="1967"></a>1967</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1968"></a>1968</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1969"></a>1969</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="1970"></a>1970</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="1971"></a>1971</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1972"></a>1972</td><td></td><td></td><td></td><td></td><td class="s">        } else {                            # -inf &lt; x &lt; 0, -inf &lt; y &lt; +inf</td></tr>
<tr><td class="h"><a name="1973"></a>1973</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="1974"></a>1974</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="1975"></a>1975</td><td></td><td></td><td></td><td></td><td class="s">            } elsif ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1976"></a>1976</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="1977"></a>1977</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1978"></a>1978</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1979"></a>1979</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1980"></a>1980</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="1981"></a>1981</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1982"></a>1982</td><td></td><td></td><td></td><td></td><td class="s">        if ($y-&gt;{sign} eq &quot;-inf&quot;) {         # x = 0, y = -inf</td></tr>
<tr><td class="h"><a name="1983"></a>1983</td><td></td><td></td><td></td><td></td><td class="s">            return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1984"></a>1984</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($y-&gt;{sign} eq &quot;+inf&quot;) {    # x = 0, y = +inf</td></tr>
<tr><td class="h"><a name="1985"></a>1985</td><td></td><td></td><td></td><td></td><td class="s">            return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1986"></a>1986</td><td></td><td></td><td></td><td></td><td class="s">        } else {                            # x = 0, -inf &lt; y &lt; +inf</td></tr>
<tr><td class="h"><a name="1987"></a>1987</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="1988"></a>1988</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="1989"></a>1989</td><td></td><td></td><td></td><td></td><td class="s">            } elsif ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1990"></a>1990</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="1991"></a>1991</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="1992"></a>1992</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1993"></a>1993</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1994"></a>1994</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x -&gt; is_pos()) {</td></tr>
<tr><td class="h"><a name="1995"></a>1995</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1996"></a>1996</td><td></td><td></td><td></td><td></td><td class="s">        if ($y-&gt;{sign} eq &quot;-inf&quot;) {         # 0 &lt; x &lt; +inf, y = -inf</td></tr>
<tr><td class="h"><a name="1997"></a>1997</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="1998"></a>1998</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="1999"></a>1999</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="2000"></a>2000</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="2001"></a>2001</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2002"></a>2002</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($y-&gt;{sign} eq &quot;+inf&quot;) {    # 0 &lt; x &lt; +inf, y = +inf</td></tr>
<tr><td class="h"><a name="2003"></a>2003</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="2004"></a>2004</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;bnan(@r);</td></tr>
<tr><td class="h"><a name="2005"></a>2005</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="2006"></a>2006</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="2007"></a>2007</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2008"></a>2008</td><td></td><td></td><td></td><td></td><td class="s">        } else {                            # 0 &lt; x &lt; +inf, -inf &lt; y &lt; +inf</td></tr>
<tr><td class="h"><a name="2009"></a>2009</td><td></td><td></td><td></td><td></td><td class="s">            if ($z-&gt;{sign} eq &quot;-inf&quot;) {</td></tr>
<tr><td class="h"><a name="2010"></a>2010</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;-&quot;, @r);</td></tr>
<tr><td class="h"><a name="2011"></a>2011</td><td></td><td></td><td></td><td></td><td class="s">            } elsif ($z-&gt;{sign} eq &quot;+inf&quot;) {</td></tr>
<tr><td class="h"><a name="2012"></a>2012</td><td></td><td></td><td></td><td></td><td class="s">                return $x-&gt;binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="2013"></a>2013</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2014"></a>2014</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2015"></a>2015</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2016"></a>2016</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2017"></a>2017</td><td></td><td></td><td></td><td></td><td class="s">    die;</td></tr>
<tr><td class="h"><a name="2018"></a>2018</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2019"></a>2019</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2020"></a>2020</td><td></td><td></td><td></td><td></td><td class="s">sub bdiv {</td></tr>
<tr><td class="h"><a name="2021"></a>2021</td><td></td><td></td><td></td><td></td><td class="s">    # This does floored division, where the quotient is floored, i.e., rounded</td></tr>
<tr><td class="h"><a name="2022"></a>2022</td><td></td><td></td><td></td><td></td><td class="s">    # towards negative infinity. As a consequence, the remainder has the same</td></tr>
<tr><td class="h"><a name="2023"></a>2023</td><td></td><td></td><td></td><td></td><td class="s">    # sign as the divisor.</td></tr>
<tr><td class="h"><a name="2024"></a>2024</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2025"></a>2025</td><td></td><td></td><td></td><td></td><td class="s">    # Set up parameters.</td></tr>
<tr><td class="h"><a name="2026"></a>2026</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2027"></a>2027</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2028"></a>2028</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2029"></a>2029</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2030"></a>2030</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('bdiv');</td></tr>
<tr><td class="h"><a name="2031"></a>2031</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2032"></a>2032</td><td></td><td></td><td></td><td></td><td class="s">    my $wantarray = wantarray;          # call only once</td></tr>
<tr><td class="h"><a name="2033"></a>2033</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2034"></a>2034</td><td></td><td></td><td></td><td></td><td class="s">    # At least one argument is NaN. Return NaN for both quotient and the</td></tr>
<tr><td class="h"><a name="2035"></a>2035</td><td></td><td></td><td></td><td></td><td class="s">    # modulo/remainder.</td></tr>
<tr><td class="h"><a name="2036"></a>2036</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2037"></a>2037</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan() || $y -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="2038"></a>2038</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x -&gt; bnan(@r), $class -&gt; bnan(@r))</td></tr>
<tr><td class="h"><a name="2039"></a>2039</td><td></td><td></td><td></td><td></td><td class="s">                          : $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2040"></a>2040</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2041"></a>2041</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2042"></a>2042</td><td></td><td></td><td></td><td></td><td class="s">    # Divide by zero and modulo zero.</td></tr>
<tr><td class="h"><a name="2043"></a>2043</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2044"></a>2044</td><td></td><td></td><td></td><td></td><td class="s">    # Division: Use the common convention that x / 0 is inf with the same sign</td></tr>
<tr><td class="h"><a name="2045"></a>2045</td><td></td><td></td><td></td><td></td><td class="s">    # as x, except when x = 0, where we return NaN. This is also what earlier</td></tr>
<tr><td class="h"><a name="2046"></a>2046</td><td></td><td></td><td></td><td></td><td class="s">    # versions did.</td></tr>
<tr><td class="h"><a name="2047"></a>2047</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2048"></a>2048</td><td></td><td></td><td></td><td></td><td class="s">    # Modulo: In modular arithmetic, the congruence relation z = x (mod y)</td></tr>
<tr><td class="h"><a name="2049"></a>2049</td><td></td><td></td><td></td><td></td><td class="s">    # means that there is some integer k such that z - x = k y. If y = 0, we</td></tr>
<tr><td class="h"><a name="2050"></a>2050</td><td></td><td></td><td></td><td></td><td class="s">    # get z - x = 0 or z = x. This is also what earlier versions did, except</td></tr>
<tr><td class="h"><a name="2051"></a>2051</td><td></td><td></td><td></td><td></td><td class="s">    # that 0 % 0 returned NaN.</td></tr>
<tr><td class="h"><a name="2052"></a>2052</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2053"></a>2053</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /    0 =  inf                  inf %    0 =  inf</td></tr>
<tr><td class="h"><a name="2054"></a>2054</td><td></td><td></td><td></td><td></td><td class="s">    #       5 /    0 =  inf                    5 %    0 =    5</td></tr>
<tr><td class="h"><a name="2055"></a>2055</td><td></td><td></td><td></td><td></td><td class="s">    #       0 /    0 =  NaN                    0 %    0 =    0</td></tr>
<tr><td class="h"><a name="2056"></a>2056</td><td></td><td></td><td></td><td></td><td class="s">    #      -5 /    0 = -inf                   -5 %    0 =   -5</td></tr>
<tr><td class="h"><a name="2057"></a>2057</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /    0 = -inf                 -inf %    0 = -inf</td></tr>
<tr><td class="h"><a name="2058"></a>2058</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2059"></a>2059</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2060"></a>2060</td><td></td><td></td><td></td><td></td><td class="s">        my $rem;</td></tr>
<tr><td class="h"><a name="2061"></a>2061</td><td></td><td></td><td></td><td></td><td class="s">        if ($wantarray) {</td></tr>
<tr><td class="h"><a name="2062"></a>2062</td><td></td><td></td><td></td><td></td><td class="s">            $rem = $x -&gt; copy() -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2063"></a>2063</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2064"></a>2064</td><td></td><td></td><td></td><td></td><td class="s">        if ($x -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2065"></a>2065</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2066"></a>2066</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2067"></a>2067</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; binf($x -&gt; {sign}, @r);</td></tr>
<tr><td class="h"><a name="2068"></a>2068</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2069"></a>2069</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x, $rem) : $x;</td></tr>
<tr><td class="h"><a name="2070"></a>2070</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2071"></a>2071</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2072"></a>2072</td><td></td><td></td><td></td><td></td><td class="s">    # Numerator (dividend) is +/-inf, and denominator is finite and non-zero.</td></tr>
<tr><td class="h"><a name="2073"></a>2073</td><td></td><td></td><td></td><td></td><td class="s">    # The divide by zero cases are covered above. In all of the cases listed</td></tr>
<tr><td class="h"><a name="2074"></a>2074</td><td></td><td></td><td></td><td></td><td class="s">    # below we return the same as core Perl.</td></tr>
<tr><td class="h"><a name="2075"></a>2075</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2076"></a>2076</td><td></td><td></td><td></td><td></td><td class="s">    #     inf / -inf =  NaN                  inf % -inf =  NaN</td></tr>
<tr><td class="h"><a name="2077"></a>2077</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /   -5 = -inf                  inf %   -5 =  NaN</td></tr>
<tr><td class="h"><a name="2078"></a>2078</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /    5 =  inf                  inf %    5 =  NaN</td></tr>
<tr><td class="h"><a name="2079"></a>2079</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /  inf =  NaN                  inf %  inf =  NaN</td></tr>
<tr><td class="h"><a name="2080"></a>2080</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2081"></a>2081</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf / -inf =  NaN                 -inf % -inf =  NaN</td></tr>
<tr><td class="h"><a name="2082"></a>2082</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /   -5 =  inf                 -inf %   -5 =  NaN</td></tr>
<tr><td class="h"><a name="2083"></a>2083</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /    5 = -inf                 -inf %    5 =  NaN</td></tr>
<tr><td class="h"><a name="2084"></a>2084</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /  inf =  NaN                 -inf %  inf =  NaN</td></tr>
<tr><td class="h"><a name="2085"></a>2085</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2086"></a>2086</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2087"></a>2087</td><td></td><td></td><td></td><td></td><td class="s">        my $rem;</td></tr>
<tr><td class="h"><a name="2088"></a>2088</td><td></td><td></td><td></td><td></td><td class="s">        $rem = $class -&gt; bnan(@r) if $wantarray;</td></tr>
<tr><td class="h"><a name="2089"></a>2089</td><td></td><td></td><td></td><td></td><td class="s">        if ($y -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2090"></a>2090</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2091"></a>2091</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2092"></a>2092</td><td></td><td></td><td></td><td></td><td class="s">            my $sign = $x -&gt; bcmp(0) == $y -&gt; bcmp(0) ? '+' : '-';</td></tr>
<tr><td class="h"><a name="2093"></a>2093</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; binf($sign, @r);</td></tr>
<tr><td class="h"><a name="2094"></a>2094</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2095"></a>2095</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x, $rem) : $x;</td></tr>
<tr><td class="h"><a name="2096"></a>2096</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2097"></a>2097</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2098"></a>2098</td><td></td><td></td><td></td><td></td><td class="s">    # Denominator (divisor) is +/-inf. The cases when the numerator is +/-inf</td></tr>
<tr><td class="h"><a name="2099"></a>2099</td><td></td><td></td><td></td><td></td><td class="s">    # are covered above. In the modulo cases (in the right column) we return</td></tr>
<tr><td class="h"><a name="2100"></a>2100</td><td></td><td></td><td></td><td></td><td class="s">    # the same as core Perl, which does floored division, so for consistency we</td></tr>
<tr><td class="h"><a name="2101"></a>2101</td><td></td><td></td><td></td><td></td><td class="s">    # also do floored division in the division cases (in the left column).</td></tr>
<tr><td class="h"><a name="2102"></a>2102</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2103"></a>2103</td><td></td><td></td><td></td><td></td><td class="s">    #      -5 /  inf =   -1                   -5 %  inf =  inf</td></tr>
<tr><td class="h"><a name="2104"></a>2104</td><td></td><td></td><td></td><td></td><td class="s">    #       0 /  inf =    0                    0 %  inf =    0</td></tr>
<tr><td class="h"><a name="2105"></a>2105</td><td></td><td></td><td></td><td></td><td class="s">    #       5 /  inf =    0                    5 %  inf =    5</td></tr>
<tr><td class="h"><a name="2106"></a>2106</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2107"></a>2107</td><td></td><td></td><td></td><td></td><td class="s">    #      -5 / -inf =    0                   -5 % -inf =   -5</td></tr>
<tr><td class="h"><a name="2108"></a>2108</td><td></td><td></td><td></td><td></td><td class="s">    #       0 / -inf =    0                    0 % -inf =    0</td></tr>
<tr><td class="h"><a name="2109"></a>2109</td><td></td><td></td><td></td><td></td><td class="s">    #       5 / -inf =   -1                    5 % -inf = -inf</td></tr>
<tr><td class="h"><a name="2110"></a>2110</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2111"></a>2111</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2112"></a>2112</td><td></td><td></td><td></td><td></td><td class="s">        my $rem;</td></tr>
<tr><td class="h"><a name="2113"></a>2113</td><td></td><td></td><td></td><td></td><td class="s">        if ($x -&gt; is_zero() || $x -&gt; bcmp(0) == $y -&gt; bcmp(0)) {</td></tr>
<tr><td class="h"><a name="2114"></a>2114</td><td></td><td></td><td></td><td></td><td class="s">            $rem = $x -&gt; copy() -&gt; round(@r) if $wantarray;</td></tr>
<tr><td class="h"><a name="2115"></a>2115</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2116"></a>2116</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2117"></a>2117</td><td></td><td></td><td></td><td></td><td class="s">            $rem = $class -&gt; binf($y -&gt; {sign}, @r) if $wantarray;</td></tr>
<tr><td class="h"><a name="2118"></a>2118</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; bone('-', @r);</td></tr>
<tr><td class="h"><a name="2119"></a>2119</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2120"></a>2120</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x, $rem) : $x;</td></tr>
<tr><td class="h"><a name="2121"></a>2121</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2122"></a>2122</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2123"></a>2123</td><td></td><td></td><td></td><td></td><td class="s">    # At this point, both the numerator and denominator are finite numbers, and</td></tr>
<tr><td class="h"><a name="2124"></a>2124</td><td></td><td></td><td></td><td></td><td class="s">    # the denominator (divisor) is non-zero.</td></tr>
<tr><td class="h"><a name="2125"></a>2125</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2126"></a>2126</td><td></td><td></td><td></td><td></td><td class="s">    # Division might return a non-integer result, so upgrade unconditionally, if</td></tr>
<tr><td class="h"><a name="2127"></a>2127</td><td></td><td></td><td></td><td></td><td class="s">    # upgrading is enabled.</td></tr>
<tr><td class="h"><a name="2128"></a>2128</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2129"></a>2129</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bdiv($x, $y, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="2130"></a>2130</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2131"></a>2131</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                                   # no push!</td></tr>
<tr><td class="h"><a name="2132"></a>2132</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2133"></a>2133</td><td></td><td></td><td></td><td></td><td class="s">    # Inialize remainder.</td></tr>
<tr><td class="h"><a name="2134"></a>2134</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2135"></a>2135</td><td></td><td></td><td></td><td></td><td class="s">    my $rem = $class -&gt; bzero();</td></tr>
<tr><td class="h"><a name="2136"></a>2136</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2137"></a>2137</td><td></td><td></td><td></td><td></td><td class="s">    # Are both operands the same object, i.e., like $x -&gt; bdiv($x)? If so,</td></tr>
<tr><td class="h"><a name="2138"></a>2138</td><td></td><td></td><td></td><td></td><td class="s">    # flipping the sign of $y also flips the sign of $x.</td></tr>
<tr><td class="h"><a name="2139"></a>2139</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2140"></a>2140</td><td></td><td></td><td></td><td></td><td class="s">    my $xsign = $x -&gt; {sign};</td></tr>
<tr><td class="h"><a name="2141"></a>2141</td><td></td><td></td><td></td><td></td><td class="s">    my $ysign = $y -&gt; {sign};</td></tr>
<tr><td class="h"><a name="2142"></a>2142</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2143"></a>2143</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {sign} =~ tr/+-/-+/;            # Flip the sign of $y, and see ...</td></tr>
<tr><td class="h"><a name="2144"></a>2144</td><td></td><td></td><td></td><td></td><td class="s">    my $same = $xsign ne $x -&gt; {sign};    # ... if that changed the sign of $x.</td></tr>
<tr><td class="h"><a name="2145"></a>2145</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {sign} = $ysign;                # Re-insert the original sign.</td></tr>
<tr><td class="h"><a name="2146"></a>2146</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2147"></a>2147</td><td></td><td></td><td></td><td></td><td class="s">    if ($same) {</td></tr>
<tr><td class="h"><a name="2148"></a>2148</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; bone();</td></tr>
<tr><td class="h"><a name="2149"></a>2149</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="2150"></a>2150</td><td></td><td></td><td></td><td></td><td class="s">        ($x -&gt; {value}, $rem -&gt; {value}) =</td></tr>
<tr><td class="h"><a name="2151"></a>2151</td><td></td><td></td><td></td><td></td><td class="s">          $LIB -&gt; _div($x -&gt; {value}, $y -&gt; {value});</td></tr>
<tr><td class="h"><a name="2152"></a>2152</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2153"></a>2153</td><td></td><td></td><td></td><td></td><td class="s">        if ($LIB -&gt; _is_zero($rem -&gt; {value})) {</td></tr>
<tr><td class="h"><a name="2154"></a>2154</td><td></td><td></td><td></td><td></td><td class="s">            if ($xsign eq $ysign || $LIB -&gt; _is_zero($x -&gt; {value})) {</td></tr>
<tr><td class="h"><a name="2155"></a>2155</td><td></td><td></td><td></td><td></td><td class="s">                $x -&gt; {sign} = '+';</td></tr>
<tr><td class="h"><a name="2156"></a>2156</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="2157"></a>2157</td><td></td><td></td><td></td><td></td><td class="s">                $x -&gt; {sign} = '-';</td></tr>
<tr><td class="h"><a name="2158"></a>2158</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2159"></a>2159</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2160"></a>2160</td><td></td><td></td><td></td><td></td><td class="s">            if ($xsign eq $ysign) {</td></tr>
<tr><td class="h"><a name="2161"></a>2161</td><td></td><td></td><td></td><td></td><td class="s">                $x -&gt; {sign} = '+';</td></tr>
<tr><td class="h"><a name="2162"></a>2162</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="2163"></a>2163</td><td></td><td></td><td></td><td></td><td class="s">                if ($xsign eq '+') {</td></tr>
<tr><td class="h"><a name="2164"></a>2164</td><td></td><td></td><td></td><td></td><td class="s">                    $x = $x -&gt; badd(1);</td></tr>
<tr><td class="h"><a name="2165"></a>2165</td><td></td><td></td><td></td><td></td><td class="s">                } else {</td></tr>
<tr><td class="h"><a name="2166"></a>2166</td><td></td><td></td><td></td><td></td><td class="s">                    $x = $x -&gt; bsub(1);</td></tr>
<tr><td class="h"><a name="2167"></a>2167</td><td></td><td></td><td></td><td></td><td class="s">                }</td></tr>
<tr><td class="h"><a name="2168"></a>2168</td><td></td><td></td><td></td><td></td><td class="s">                $x -&gt; {sign} = '-';</td></tr>
<tr><td class="h"><a name="2169"></a>2169</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2170"></a>2170</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2171"></a>2171</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2172"></a>2172</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2173"></a>2173</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2174"></a>2174</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2175"></a>2175</td><td></td><td></td><td></td><td></td><td class="s">    if ($wantarray) {</td></tr>
<tr><td class="h"><a name="2176"></a>2176</td><td></td><td></td><td></td><td></td><td class="s">        unless ($LIB -&gt; _is_zero($rem -&gt; {value})) {</td></tr>
<tr><td class="h"><a name="2177"></a>2177</td><td></td><td></td><td></td><td></td><td class="s">            if ($xsign ne $ysign) {</td></tr>
<tr><td class="h"><a name="2178"></a>2178</td><td></td><td></td><td></td><td></td><td class="s">                $rem = $y -&gt; copy() -&gt; babs() -&gt; bsub($rem);</td></tr>
<tr><td class="h"><a name="2179"></a>2179</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2180"></a>2180</td><td></td><td></td><td></td><td></td><td class="s">            $rem -&gt; {sign} = $ysign;</td></tr>
<tr><td class="h"><a name="2181"></a>2181</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2182"></a>2182</td><td></td><td></td><td></td><td></td><td class="s">        $rem -&gt; {_a} = $x -&gt; {_a};</td></tr>
<tr><td class="h"><a name="2183"></a>2183</td><td></td><td></td><td></td><td></td><td class="s">        $rem -&gt; {_p} = $x -&gt; {_p};</td></tr>
<tr><td class="h"><a name="2184"></a>2184</td><td></td><td></td><td></td><td></td><td class="s">        $rem = $rem -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2185"></a>2185</td><td></td><td></td><td></td><td></td><td class="s">        return ($x, $rem);</td></tr>
<tr><td class="h"><a name="2186"></a>2186</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2187"></a>2187</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2188"></a>2188</td><td></td><td></td><td></td><td></td><td class="s">    return $x;</td></tr>
<tr><td class="h"><a name="2189"></a>2189</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2190"></a>2190</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2191"></a>2191</td><td></td><td></td><td></td><td></td><td class="s">sub btdiv {</td></tr>
<tr><td class="h"><a name="2192"></a>2192</td><td></td><td></td><td></td><td></td><td class="s">    # This does truncated division, where the quotient is truncted, i.e.,</td></tr>
<tr><td class="h"><a name="2193"></a>2193</td><td></td><td></td><td></td><td></td><td class="s">    # rounded towards zero.</td></tr>
<tr><td class="h"><a name="2194"></a>2194</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2195"></a>2195</td><td></td><td></td><td></td><td></td><td class="s">    # ($q, $r) = $x -&gt; btdiv($y) returns $q and $r so that $q is int($x / $y)</td></tr>
<tr><td class="h"><a name="2196"></a>2196</td><td></td><td></td><td></td><td></td><td class="s">    # and $q * $y + $r = $x.</td></tr>
<tr><td class="h"><a name="2197"></a>2197</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2198"></a>2198</td><td></td><td></td><td></td><td></td><td class="s">    # Set up parameters</td></tr>
<tr><td class="h"><a name="2199"></a>2199</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2200"></a>2200</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2201"></a>2201</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2202"></a>2202</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2203"></a>2203</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('btdiv');</td></tr>
<tr><td class="h"><a name="2204"></a>2204</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2205"></a>2205</td><td></td><td></td><td></td><td></td><td class="s">    my $wantarray = wantarray;          # call only once</td></tr>
<tr><td class="h"><a name="2206"></a>2206</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2207"></a>2207</td><td></td><td></td><td></td><td></td><td class="s">    # At least one argument is NaN. Return NaN for both quotient and the</td></tr>
<tr><td class="h"><a name="2208"></a>2208</td><td></td><td></td><td></td><td></td><td class="s">    # modulo/remainder.</td></tr>
<tr><td class="h"><a name="2209"></a>2209</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2210"></a>2210</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan() || $y -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="2211"></a>2211</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x -&gt; bnan(@r), $class -&gt; bnan(@r))</td></tr>
<tr><td class="h"><a name="2212"></a>2212</td><td></td><td></td><td></td><td></td><td class="s">                          : $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2213"></a>2213</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2214"></a>2214</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2215"></a>2215</td><td></td><td></td><td></td><td></td><td class="s">    # Divide by zero and modulo zero.</td></tr>
<tr><td class="h"><a name="2216"></a>2216</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2217"></a>2217</td><td></td><td></td><td></td><td></td><td class="s">    # Division: Use the common convention that x / 0 is inf with the same sign</td></tr>
<tr><td class="h"><a name="2218"></a>2218</td><td></td><td></td><td></td><td></td><td class="s">    # as x, except when x = 0, where we return NaN. This is also what earlier</td></tr>
<tr><td class="h"><a name="2219"></a>2219</td><td></td><td></td><td></td><td></td><td class="s">    # versions did.</td></tr>
<tr><td class="h"><a name="2220"></a>2220</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2221"></a>2221</td><td></td><td></td><td></td><td></td><td class="s">    # Modulo: In modular arithmetic, the congruence relation z = x (mod y)</td></tr>
<tr><td class="h"><a name="2222"></a>2222</td><td></td><td></td><td></td><td></td><td class="s">    # means that there is some integer k such that z - x = k y. If y = 0, we</td></tr>
<tr><td class="h"><a name="2223"></a>2223</td><td></td><td></td><td></td><td></td><td class="s">    # get z - x = 0 or z = x. This is also what earlier versions did, except</td></tr>
<tr><td class="h"><a name="2224"></a>2224</td><td></td><td></td><td></td><td></td><td class="s">    # that 0 % 0 returned NaN.</td></tr>
<tr><td class="h"><a name="2225"></a>2225</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2226"></a>2226</td><td></td><td></td><td></td><td></td><td class="s">    #     inf / 0 =  inf                     inf % 0 =  inf</td></tr>
<tr><td class="h"><a name="2227"></a>2227</td><td></td><td></td><td></td><td></td><td class="s">    #       5 / 0 =  inf                       5 % 0 =    5</td></tr>
<tr><td class="h"><a name="2228"></a>2228</td><td></td><td></td><td></td><td></td><td class="s">    #       0 / 0 =  NaN                       0 % 0 =    0</td></tr>
<tr><td class="h"><a name="2229"></a>2229</td><td></td><td></td><td></td><td></td><td class="s">    #      -5 / 0 = -inf                      -5 % 0 =   -5</td></tr>
<tr><td class="h"><a name="2230"></a>2230</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf / 0 = -inf                    -inf % 0 = -inf</td></tr>
<tr><td class="h"><a name="2231"></a>2231</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2232"></a>2232</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2233"></a>2233</td><td></td><td></td><td></td><td></td><td class="s">        my $rem;</td></tr>
<tr><td class="h"><a name="2234"></a>2234</td><td></td><td></td><td></td><td></td><td class="s">        if ($wantarray) {</td></tr>
<tr><td class="h"><a name="2235"></a>2235</td><td></td><td></td><td></td><td></td><td class="s">            $rem = $x -&gt; copy(@r);</td></tr>
<tr><td class="h"><a name="2236"></a>2236</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2237"></a>2237</td><td></td><td></td><td></td><td></td><td class="s">        if ($x -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2238"></a>2238</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2239"></a>2239</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2240"></a>2240</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; binf($x -&gt; {sign}, @r);</td></tr>
<tr><td class="h"><a name="2241"></a>2241</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2242"></a>2242</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x, $rem) : $x;</td></tr>
<tr><td class="h"><a name="2243"></a>2243</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2244"></a>2244</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2245"></a>2245</td><td></td><td></td><td></td><td></td><td class="s">    # Numerator (dividend) is +/-inf, and denominator is finite and non-zero.</td></tr>
<tr><td class="h"><a name="2246"></a>2246</td><td></td><td></td><td></td><td></td><td class="s">    # The divide by zero cases are covered above. In all of the cases listed</td></tr>
<tr><td class="h"><a name="2247"></a>2247</td><td></td><td></td><td></td><td></td><td class="s">    # below we return the same as core Perl.</td></tr>
<tr><td class="h"><a name="2248"></a>2248</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2249"></a>2249</td><td></td><td></td><td></td><td></td><td class="s">    #     inf / -inf =  NaN                  inf % -inf =  NaN</td></tr>
<tr><td class="h"><a name="2250"></a>2250</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /   -5 = -inf                  inf %   -5 =  NaN</td></tr>
<tr><td class="h"><a name="2251"></a>2251</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /    5 =  inf                  inf %    5 =  NaN</td></tr>
<tr><td class="h"><a name="2252"></a>2252</td><td></td><td></td><td></td><td></td><td class="s">    #     inf /  inf =  NaN                  inf %  inf =  NaN</td></tr>
<tr><td class="h"><a name="2253"></a>2253</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2254"></a>2254</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf / -inf =  NaN                 -inf % -inf =  NaN</td></tr>
<tr><td class="h"><a name="2255"></a>2255</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /   -5 =  inf                 -inf %   -5 =  NaN</td></tr>
<tr><td class="h"><a name="2256"></a>2256</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /    5 = -inf                 -inf %    5 =  NaN</td></tr>
<tr><td class="h"><a name="2257"></a>2257</td><td></td><td></td><td></td><td></td><td class="s">    #    -inf /  inf =  NaN                 -inf %  inf =  NaN</td></tr>
<tr><td class="h"><a name="2258"></a>2258</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2259"></a>2259</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2260"></a>2260</td><td></td><td></td><td></td><td></td><td class="s">        my $rem;</td></tr>
<tr><td class="h"><a name="2261"></a>2261</td><td></td><td></td><td></td><td></td><td class="s">        $rem = $class -&gt; bnan(@r) if $wantarray;</td></tr>
<tr><td class="h"><a name="2262"></a>2262</td><td></td><td></td><td></td><td></td><td class="s">        if ($y -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2263"></a>2263</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2264"></a>2264</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2265"></a>2265</td><td></td><td></td><td></td><td></td><td class="s">            my $sign = $x -&gt; bcmp(0) == $y -&gt; bcmp(0) ? '+' : '-';</td></tr>
<tr><td class="h"><a name="2266"></a>2266</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; binf($sign,@r );</td></tr>
<tr><td class="h"><a name="2267"></a>2267</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2268"></a>2268</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x, $rem) : $x;</td></tr>
<tr><td class="h"><a name="2269"></a>2269</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2270"></a>2270</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2271"></a>2271</td><td></td><td></td><td></td><td></td><td class="s">    # Denominator (divisor) is +/-inf. The cases when the numerator is +/-inf</td></tr>
<tr><td class="h"><a name="2272"></a>2272</td><td></td><td></td><td></td><td></td><td class="s">    # are covered above. In the modulo cases (in the right column) we return</td></tr>
<tr><td class="h"><a name="2273"></a>2273</td><td></td><td></td><td></td><td></td><td class="s">    # the same as core Perl, which does floored division, so for consistency we</td></tr>
<tr><td class="h"><a name="2274"></a>2274</td><td></td><td></td><td></td><td></td><td class="s">    # also do floored division in the division cases (in the left column).</td></tr>
<tr><td class="h"><a name="2275"></a>2275</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2276"></a>2276</td><td></td><td></td><td></td><td></td><td class="s">    #      -5 /  inf =    0                   -5 %  inf =  -5</td></tr>
<tr><td class="h"><a name="2277"></a>2277</td><td></td><td></td><td></td><td></td><td class="s">    #       0 /  inf =    0                    0 %  inf =   0</td></tr>
<tr><td class="h"><a name="2278"></a>2278</td><td></td><td></td><td></td><td></td><td class="s">    #       5 /  inf =    0                    5 %  inf =   5</td></tr>
<tr><td class="h"><a name="2279"></a>2279</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2280"></a>2280</td><td></td><td></td><td></td><td></td><td class="s">    #      -5 / -inf =    0                   -5 % -inf =  -5</td></tr>
<tr><td class="h"><a name="2281"></a>2281</td><td></td><td></td><td></td><td></td><td class="s">    #       0 / -inf =    0                    0 % -inf =   0</td></tr>
<tr><td class="h"><a name="2282"></a>2282</td><td></td><td></td><td></td><td></td><td class="s">    #       5 / -inf =    0                    5 % -inf =   5</td></tr>
<tr><td class="h"><a name="2283"></a>2283</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2284"></a>2284</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2285"></a>2285</td><td></td><td></td><td></td><td></td><td class="s">        my $rem;</td></tr>
<tr><td class="h"><a name="2286"></a>2286</td><td></td><td></td><td></td><td></td><td class="s">        $rem = $x -&gt; copy() -&gt; round(@r) if $wantarray;</td></tr>
<tr><td class="h"><a name="2287"></a>2287</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2288"></a>2288</td><td></td><td></td><td></td><td></td><td class="s">        return $wantarray ? ($x, $rem) : $x;</td></tr>
<tr><td class="h"><a name="2289"></a>2289</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2290"></a>2290</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2291"></a>2291</td><td></td><td></td><td></td><td></td><td class="s">    # Division might return a non-integer result, so upgrade unconditionally, if</td></tr>
<tr><td class="h"><a name="2292"></a>2292</td><td></td><td></td><td></td><td></td><td class="s">    # upgrading is enabled.</td></tr>
<tr><td class="h"><a name="2293"></a>2293</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2294"></a>2294</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; btdiv($x, $y, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="2295"></a>2295</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2296"></a>2296</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="2297"></a>2297</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2298"></a>2298</td><td></td><td></td><td></td><td></td><td class="s">    # Inialize remainder.</td></tr>
<tr><td class="h"><a name="2299"></a>2299</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2300"></a>2300</td><td></td><td></td><td></td><td></td><td class="s">    my $rem = $class -&gt; bzero();</td></tr>
<tr><td class="h"><a name="2301"></a>2301</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2302"></a>2302</td><td></td><td></td><td></td><td></td><td class="s">    # Are both operands the same object, i.e., like $x -&gt; bdiv($x)? If so,</td></tr>
<tr><td class="h"><a name="2303"></a>2303</td><td></td><td></td><td></td><td></td><td class="s">    # flipping the sign of $y also flips the sign of $x.</td></tr>
<tr><td class="h"><a name="2304"></a>2304</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2305"></a>2305</td><td></td><td></td><td></td><td></td><td class="s">    my $xsign = $x -&gt; {sign};</td></tr>
<tr><td class="h"><a name="2306"></a>2306</td><td></td><td></td><td></td><td></td><td class="s">    my $ysign = $y -&gt; {sign};</td></tr>
<tr><td class="h"><a name="2307"></a>2307</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2308"></a>2308</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {sign} =~ tr/+-/-+/;            # Flip the sign of $y, and see ...</td></tr>
<tr><td class="h"><a name="2309"></a>2309</td><td></td><td></td><td></td><td></td><td class="s">    my $same = $xsign ne $x -&gt; {sign};    # ... if that changed the sign of $x.</td></tr>
<tr><td class="h"><a name="2310"></a>2310</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {sign} = $ysign;                # Re-insert the original sign.</td></tr>
<tr><td class="h"><a name="2311"></a>2311</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2312"></a>2312</td><td></td><td></td><td></td><td></td><td class="s">    if ($same) {</td></tr>
<tr><td class="h"><a name="2313"></a>2313</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; bone(@r);</td></tr>
<tr><td class="h"><a name="2314"></a>2314</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="2315"></a>2315</td><td></td><td></td><td></td><td></td><td class="s">        ($x -&gt; {value}, $rem -&gt; {value}) =</td></tr>
<tr><td class="h"><a name="2316"></a>2316</td><td></td><td></td><td></td><td></td><td class="s">          $LIB -&gt; _div($x -&gt; {value}, $y -&gt; {value});</td></tr>
<tr><td class="h"><a name="2317"></a>2317</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2318"></a>2318</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {sign} = $xsign eq $ysign ? '+' : '-';</td></tr>
<tr><td class="h"><a name="2319"></a>2319</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {sign} = '+' if $LIB -&gt; _is_zero($x -&gt; {value});</td></tr>
<tr><td class="h"><a name="2320"></a>2320</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2321"></a>2321</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2322"></a>2322</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2323"></a>2323</td><td></td><td></td><td></td><td></td><td class="s">    if (wantarray) {</td></tr>
<tr><td class="h"><a name="2324"></a>2324</td><td></td><td></td><td></td><td></td><td class="s">        $rem -&gt; {sign} = $xsign;</td></tr>
<tr><td class="h"><a name="2325"></a>2325</td><td></td><td></td><td></td><td></td><td class="s">        $rem -&gt; {sign} = '+' if $LIB -&gt; _is_zero($rem -&gt; {value});</td></tr>
<tr><td class="h"><a name="2326"></a>2326</td><td></td><td></td><td></td><td></td><td class="s">        $rem -&gt; {_a} = $x -&gt; {_a};</td></tr>
<tr><td class="h"><a name="2327"></a>2327</td><td></td><td></td><td></td><td></td><td class="s">        $rem -&gt; {_p} = $x -&gt; {_p};</td></tr>
<tr><td class="h"><a name="2328"></a>2328</td><td></td><td></td><td></td><td></td><td class="s">        $rem = $rem -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2329"></a>2329</td><td></td><td></td><td></td><td></td><td class="s">        return ($x, $rem);</td></tr>
<tr><td class="h"><a name="2330"></a>2330</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2331"></a>2331</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2332"></a>2332</td><td></td><td></td><td></td><td></td><td class="s">    return $x;</td></tr>
<tr><td class="h"><a name="2333"></a>2333</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2334"></a>2334</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2335"></a>2335</td><td></td><td></td><td></td><td></td><td class="s">sub bmod {</td></tr>
<tr><td class="h"><a name="2336"></a>2336</td><td></td><td></td><td></td><td></td><td class="s">    # This is the remainder after floored division.</td></tr>
<tr><td class="h"><a name="2337"></a>2337</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2338"></a>2338</td><td></td><td></td><td></td><td></td><td class="s">    # Set up parameters.</td></tr>
<tr><td class="h"><a name="2339"></a>2339</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2340"></a>2340</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2341"></a>2341</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2342"></a>2342</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2343"></a>2343</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('bmod');</td></tr>
<tr><td class="h"><a name="2344"></a>2344</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2345"></a>2345</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="2346"></a>2346</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2347"></a>2347</td><td></td><td></td><td></td><td></td><td class="s">    # At least one argument is NaN.</td></tr>
<tr><td class="h"><a name="2348"></a>2348</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2349"></a>2349</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan() || $y -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="2350"></a>2350</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2351"></a>2351</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2352"></a>2352</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2353"></a>2353</td><td></td><td></td><td></td><td></td><td class="s">    # Modulo zero. See documentation for bdiv().</td></tr>
<tr><td class="h"><a name="2354"></a>2354</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2355"></a>2355</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2356"></a>2356</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2357"></a>2357</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2358"></a>2358</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2359"></a>2359</td><td></td><td></td><td></td><td></td><td class="s">    # Numerator (dividend) is +/-inf.</td></tr>
<tr><td class="h"><a name="2360"></a>2360</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2361"></a>2361</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2362"></a>2362</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2363"></a>2363</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2364"></a>2364</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2365"></a>2365</td><td></td><td></td><td></td><td></td><td class="s">    # Denominator (divisor) is +/-inf.</td></tr>
<tr><td class="h"><a name="2366"></a>2366</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2367"></a>2367</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2368"></a>2368</td><td></td><td></td><td></td><td></td><td class="s">        if ($x -&gt; is_zero() || $x -&gt; bcmp(0) == $y -&gt; bcmp(0)) {</td></tr>
<tr><td class="h"><a name="2369"></a>2369</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2370"></a>2370</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2371"></a>2371</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; binf($y -&gt; sign(), @r);</td></tr>
<tr><td class="h"><a name="2372"></a>2372</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2373"></a>2373</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2374"></a>2374</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2375"></a>2375</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bmod($x, $y, @r)</td></tr>
<tr><td class="h"><a name="2376"></a>2376</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) || !$y -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="2377"></a>2377</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2378"></a>2378</td><td></td><td></td><td></td><td></td><td class="s">    # Calc new sign and in case $y == +/- 1, return $x.</td></tr>
<tr><td class="h"><a name="2379"></a>2379</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2380"></a>2380</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {value} = $LIB -&gt; _mod($x -&gt; {value}, $y -&gt; {value});</td></tr>
<tr><td class="h"><a name="2381"></a>2381</td><td></td><td></td><td></td><td></td><td class="s">    if ($LIB -&gt; _is_zero($x -&gt; {value})) {</td></tr>
<tr><td class="h"><a name="2382"></a>2382</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {sign} = '+';     # do not leave -0</td></tr>
<tr><td class="h"><a name="2383"></a>2383</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="2384"></a>2384</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {value} = $LIB -&gt; _sub($y -&gt; {value}, $x -&gt; {value}, 1) # $y-$x</td></tr>
<tr><td class="h"><a name="2385"></a>2385</td><td></td><td></td><td></td><td></td><td class="s">          if ($x -&gt; {sign} ne $y -&gt; {sign});</td></tr>
<tr><td class="h"><a name="2386"></a>2386</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {sign} = $y -&gt; {sign};</td></tr>
<tr><td class="h"><a name="2387"></a>2387</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2388"></a>2388</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2389"></a>2389</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2390"></a>2390</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2391"></a>2391</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2392"></a>2392</td><td></td><td></td><td></td><td></td><td class="s">sub btmod {</td></tr>
<tr><td class="h"><a name="2393"></a>2393</td><td></td><td></td><td></td><td></td><td class="s">    # Remainder after truncated division.</td></tr>
<tr><td class="h"><a name="2394"></a>2394</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2395"></a>2395</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="2396"></a>2396</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2397"></a>2397</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2398"></a>2398</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2399"></a>2399</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2400"></a>2400</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('btmod');</td></tr>
<tr><td class="h"><a name="2401"></a>2401</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2402"></a>2402</td><td></td><td></td><td></td><td></td><td class="s">    # At least one argument is NaN.</td></tr>
<tr><td class="h"><a name="2403"></a>2403</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2404"></a>2404</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan() || $y -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="2405"></a>2405</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2406"></a>2406</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2407"></a>2407</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2408"></a>2408</td><td></td><td></td><td></td><td></td><td class="s">    # Modulo zero. See documentation for btdiv().</td></tr>
<tr><td class="h"><a name="2409"></a>2409</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2410"></a>2410</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2411"></a>2411</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2412"></a>2412</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2413"></a>2413</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2414"></a>2414</td><td></td><td></td><td></td><td></td><td class="s">    # Numerator (dividend) is +/-inf.</td></tr>
<tr><td class="h"><a name="2415"></a>2415</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2416"></a>2416</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2417"></a>2417</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2418"></a>2418</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2419"></a>2419</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2420"></a>2420</td><td></td><td></td><td></td><td></td><td class="s">    # Denominator (divisor) is +/-inf.</td></tr>
<tr><td class="h"><a name="2421"></a>2421</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2422"></a>2422</td><td></td><td></td><td></td><td></td><td class="s">    if ($y -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2423"></a>2423</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2424"></a>2424</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2425"></a>2425</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2426"></a>2426</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; btmod($x, $y, @r)</td></tr>
<tr><td class="h"><a name="2427"></a>2427</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) || !$y -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="2428"></a>2428</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2429"></a>2429</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="2430"></a>2430</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2431"></a>2431</td><td></td><td></td><td></td><td></td><td class="s">    my $xsign = $x -&gt; {sign};</td></tr>
<tr><td class="h"><a name="2432"></a>2432</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2433"></a>2433</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {value} = $LIB -&gt; _mod($x -&gt; {value}, $y -&gt; {value});</td></tr>
<tr><td class="h"><a name="2434"></a>2434</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2435"></a>2435</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {sign} = $xsign;</td></tr>
<tr><td class="h"><a name="2436"></a>2436</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {sign} = '+' if $LIB -&gt; _is_zero($x -&gt; {value});</td></tr>
<tr><td class="h"><a name="2437"></a>2437</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2438"></a>2438</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2439"></a>2439</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2440"></a>2440</td><td></td><td></td><td></td><td></td><td class="s">sub bmodinv {</td></tr>
<tr><td class="h"><a name="2441"></a>2441</td><td></td><td></td><td></td><td></td><td class="s">    # Return modular multiplicative inverse:</td></tr>
<tr><td class="h"><a name="2442"></a>2442</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2443"></a>2443</td><td></td><td></td><td></td><td></td><td class="s">    #   z is the modular inverse of x (mod y) if and only if</td></tr>
<tr><td class="h"><a name="2444"></a>2444</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2445"></a>2445</td><td></td><td></td><td></td><td></td><td class="s">    #       x*z â¡ 1  (mod y)</td></tr>
<tr><td class="h"><a name="2446"></a>2446</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2447"></a>2447</td><td></td><td></td><td></td><td></td><td class="s">    # If the modulus y is larger than one, x and z are relative primes (i.e.,</td></tr>
<tr><td class="h"><a name="2448"></a>2448</td><td></td><td></td><td></td><td></td><td class="s">    # their greatest common divisor is one).</td></tr>
<tr><td class="h"><a name="2449"></a>2449</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2450"></a>2450</td><td></td><td></td><td></td><td></td><td class="s">    # If no modular multiplicative inverse exists, NaN is returned.</td></tr>
<tr><td class="h"><a name="2451"></a>2451</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2452"></a>2452</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="2453"></a>2453</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2454"></a>2454</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2455"></a>2455</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2456"></a>2456</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2457"></a>2457</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bmodinv');</td></tr>
<tr><td class="h"><a name="2458"></a>2458</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2459"></a>2459</td><td></td><td></td><td></td><td></td><td class="s">    # Return NaN if one or both arguments is +inf, -inf, or nan.</td></tr>
<tr><td class="h"><a name="2460"></a>2460</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2461"></a>2461</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if ($y-&gt;{sign} !~ /^[+-]$/ ||</td></tr>
<tr><td class="h"><a name="2462"></a>2462</td><td></td><td></td><td></td><td></td><td class="s">                            $x-&gt;{sign} !~ /^[+-]$/);</td></tr>
<tr><td class="h"><a name="2463"></a>2463</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2464"></a>2464</td><td></td><td></td><td></td><td></td><td class="s">    # Return NaN if $y is zero; 1 % 0 makes no sense.</td></tr>
<tr><td class="h"><a name="2465"></a>2465</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2466"></a>2466</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $y-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="2467"></a>2467</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2468"></a>2468</td><td></td><td></td><td></td><td></td><td class="s">    # Return 0 in the trivial case. $x % 1 or $x % -1 is zero for all finite</td></tr>
<tr><td class="h"><a name="2469"></a>2469</td><td></td><td></td><td></td><td></td><td class="s">    # integers $x.</td></tr>
<tr><td class="h"><a name="2470"></a>2470</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2471"></a>2471</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bzero(@r) if ($y-&gt;is_one('+') ||</td></tr>
<tr><td class="h"><a name="2472"></a>2472</td><td></td><td></td><td></td><td></td><td class="s">                             $y-&gt;is_one('-'));</td></tr>
<tr><td class="h"><a name="2473"></a>2473</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2474"></a>2474</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bmodinv($x, $y, @r)</td></tr>
<tr><td class="h"><a name="2475"></a>2475</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) || !$y -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="2476"></a>2476</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2477"></a>2477</td><td></td><td></td><td></td><td></td><td class="s">    # Return NaN if $x = 0, or $x modulo $y is zero. The only valid case when</td></tr>
<tr><td class="h"><a name="2478"></a>2478</td><td></td><td></td><td></td><td></td><td class="s">    # $x = 0 is when $y = 1 or $y = -1, but that was covered above.</td></tr>
<tr><td class="h"><a name="2479"></a>2479</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2480"></a>2480</td><td></td><td></td><td></td><td></td><td class="s">    # Note that computing $x modulo $y here affects the value we'll feed to</td></tr>
<tr><td class="h"><a name="2481"></a>2481</td><td></td><td></td><td></td><td></td><td class="s">    # $LIB-&gt;_modinv() below when $x and $y have opposite signs. E.g., if $x =</td></tr>
<tr><td class="h"><a name="2482"></a>2482</td><td></td><td></td><td></td><td></td><td class="s">    # 5 and $y = 7, those two values are fed to _modinv(), but if $x = -5 and</td></tr>
<tr><td class="h"><a name="2483"></a>2483</td><td></td><td></td><td></td><td></td><td class="s">    # $y = 7, the values fed to _modinv() are $x = 2 (= -5 % 7) and $y = 7.</td></tr>
<tr><td class="h"><a name="2484"></a>2484</td><td></td><td></td><td></td><td></td><td class="s">    # The value if $x is affected only when $x and $y have opposite signs.</td></tr>
<tr><td class="h"><a name="2485"></a>2485</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2486"></a>2486</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x-&gt;bmod($y);</td></tr>
<tr><td class="h"><a name="2487"></a>2487</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="2488"></a>2488</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2489"></a>2489</td><td></td><td></td><td></td><td></td><td class="s">    # Compute the modular multiplicative inverse of the absolute values. We'll</td></tr>
<tr><td class="h"><a name="2490"></a>2490</td><td></td><td></td><td></td><td></td><td class="s">    # correct for the signs of $x and $y later. Return NaN if no GCD is found.</td></tr>
<tr><td class="h"><a name="2491"></a>2491</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2492"></a>2492</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{value}, $x-&gt;{sign}) = $LIB-&gt;_modinv($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="2493"></a>2493</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if !defined($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="2494"></a>2494</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2495"></a>2495</td><td></td><td></td><td></td><td></td><td class="s">    # Library inconsistency workaround: _modinv() in Math::BigInt::GMP versions</td></tr>
<tr><td class="h"><a name="2496"></a>2496</td><td></td><td></td><td></td><td></td><td class="s">    # &lt;= 1.32 return undef rather than a &quot;+&quot; for the sign.</td></tr>
<tr><td class="h"><a name="2497"></a>2497</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2498"></a>2498</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} = '+' unless defined $x-&gt;{sign};</td></tr>
<tr><td class="h"><a name="2499"></a>2499</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2500"></a>2500</td><td></td><td></td><td></td><td></td><td class="s">    # When one or both arguments are negative, we have the following</td></tr>
<tr><td class="h"><a name="2501"></a>2501</td><td></td><td></td><td></td><td></td><td class="s">    # relations.  If x and y are positive:</td></tr>
<tr><td class="h"><a name="2502"></a>2502</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2503"></a>2503</td><td></td><td></td><td></td><td></td><td class="s">    #   modinv(-x, -y) = -modinv(x, y)</td></tr>
<tr><td class="h"><a name="2504"></a>2504</td><td></td><td></td><td></td><td></td><td class="s">    #   modinv(-x, y) = y - modinv(x, y)  = -modinv(x, y) (mod y)</td></tr>
<tr><td class="h"><a name="2505"></a>2505</td><td></td><td></td><td></td><td></td><td class="s">    #   modinv( x, -y) = modinv(x, y) - y  =  modinv(x, y) (mod -y)</td></tr>
<tr><td class="h"><a name="2506"></a>2506</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2507"></a>2507</td><td></td><td></td><td></td><td></td><td class="s">    # We must swap the sign of the result if the original $x is negative.</td></tr>
<tr><td class="h"><a name="2508"></a>2508</td><td></td><td></td><td></td><td></td><td class="s">    # However, we must compensate for ignoring the signs when computing the</td></tr>
<tr><td class="h"><a name="2509"></a>2509</td><td></td><td></td><td></td><td></td><td class="s">    # inverse modulo. The net effect is that we must swap the sign of the</td></tr>
<tr><td class="h"><a name="2510"></a>2510</td><td></td><td></td><td></td><td></td><td class="s">    # result if $y is negative.</td></tr>
<tr><td class="h"><a name="2511"></a>2511</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2512"></a>2512</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x -&gt; bneg() if $y-&gt;{sign} eq '-';</td></tr>
<tr><td class="h"><a name="2513"></a>2513</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2514"></a>2514</td><td></td><td></td><td></td><td></td><td class="s">    # Compute $x modulo $y again after correcting the sign.</td></tr>
<tr><td class="h"><a name="2515"></a>2515</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2516"></a>2516</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x -&gt; bmod($y) if $x-&gt;{sign} ne $y-&gt;{sign};</td></tr>
<tr><td class="h"><a name="2517"></a>2517</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2518"></a>2518</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2519"></a>2519</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2520"></a>2520</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2521"></a>2521</td><td></td><td></td><td></td><td></td><td class="s">sub bmodpow {</td></tr>
<tr><td class="h"><a name="2522"></a>2522</td><td></td><td></td><td></td><td></td><td class="s">    # Modular exponentiation. Raises a very large number to a very large</td></tr>
<tr><td class="h"><a name="2523"></a>2523</td><td></td><td></td><td></td><td></td><td class="s">    # exponent in a given very large modulus quickly, thanks to binary</td></tr>
<tr><td class="h"><a name="2524"></a>2524</td><td></td><td></td><td></td><td></td><td class="s">    # exponentiation.  Supports negative exponents.</td></tr>
<tr><td class="h"><a name="2525"></a>2525</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $num, $exp, $mod, @r)</td></tr>
<tr><td class="h"><a name="2526"></a>2526</td><td></td><td></td><td></td><td></td><td class="s">      = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1]) &amp;&amp; ref($_[1]) eq ref($_[2])</td></tr>
<tr><td class="h"><a name="2527"></a>2527</td><td></td><td></td><td></td><td></td><td class="s">      ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2528"></a>2528</td><td></td><td></td><td></td><td></td><td class="s">      : objectify(3, @_);</td></tr>
<tr><td class="h"><a name="2529"></a>2529</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2530"></a>2530</td><td></td><td></td><td></td><td></td><td class="s">    return $num if $num-&gt;modify('bmodpow');</td></tr>
<tr><td class="h"><a name="2531"></a>2531</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2532"></a>2532</td><td></td><td></td><td></td><td></td><td class="s">    # When the exponent 'e' is negative, use the following relation, which is</td></tr>
<tr><td class="h"><a name="2533"></a>2533</td><td></td><td></td><td></td><td></td><td class="s">    # based on finding the multiplicative inverse 'd' of 'b' modulo 'm':</td></tr>
<tr><td class="h"><a name="2534"></a>2534</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2535"></a>2535</td><td></td><td></td><td></td><td></td><td class="s">    #    b^(-e) (mod m) = d^e (mod m) where b*d = 1 (mod m)</td></tr>
<tr><td class="h"><a name="2536"></a>2536</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2537"></a>2537</td><td></td><td></td><td></td><td></td><td class="s">    $num = $num -&gt; bmodinv($mod) if ($exp-&gt;{sign} eq '-');</td></tr>
<tr><td class="h"><a name="2538"></a>2538</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2539"></a>2539</td><td></td><td></td><td></td><td></td><td class="s">    # Check for valid input. All operands must be finite, and the modulus must</td></tr>
<tr><td class="h"><a name="2540"></a>2540</td><td></td><td></td><td></td><td></td><td class="s">    # be non-zero.</td></tr>
<tr><td class="h"><a name="2541"></a>2541</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2542"></a>2542</td><td></td><td></td><td></td><td></td><td class="s">    return $num-&gt;bnan(@r) if ($num-&gt;{sign} =~ /NaN|inf/ ||  # NaN, -inf, +inf</td></tr>
<tr><td class="h"><a name="2543"></a>2543</td><td></td><td></td><td></td><td></td><td class="s">                              $exp-&gt;{sign} =~ /NaN|inf/ ||  # NaN, -inf, +inf</td></tr>
<tr><td class="h"><a name="2544"></a>2544</td><td></td><td></td><td></td><td></td><td class="s">                              $mod-&gt;{sign} =~ /NaN|inf/);   # NaN, -inf, +inf</td></tr>
<tr><td class="h"><a name="2545"></a>2545</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2546"></a>2546</td><td></td><td></td><td></td><td></td><td class="s">    # Modulo zero. See documentation for Math::BigInt's bmod() method.</td></tr>
<tr><td class="h"><a name="2547"></a>2547</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2548"></a>2548</td><td></td><td></td><td></td><td></td><td class="s">    if ($mod -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2549"></a>2549</td><td></td><td></td><td></td><td></td><td class="s">        if ($num -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2550"></a>2550</td><td></td><td></td><td></td><td></td><td class="s">            return $class -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2551"></a>2551</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2552"></a>2552</td><td></td><td></td><td></td><td></td><td class="s">            return $num -&gt; copy(@r);</td></tr>
<tr><td class="h"><a name="2553"></a>2553</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2554"></a>2554</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2555"></a>2555</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2556"></a>2556</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bmodinv($num, $exp, $mod, @r)</td></tr>
<tr><td class="h"><a name="2557"></a>2557</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$num -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="2558"></a>2558</td><td></td><td></td><td></td><td></td><td class="s">                               !$exp -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="2559"></a>2559</td><td></td><td></td><td></td><td></td><td class="s">                               !$mod -&gt; ($class));</td></tr>
<tr><td class="h"><a name="2560"></a>2560</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2561"></a>2561</td><td></td><td></td><td></td><td></td><td class="s">    # Compute 'a (mod m)', ignoring the signs on 'a' and 'm'. If the resulting</td></tr>
<tr><td class="h"><a name="2562"></a>2562</td><td></td><td></td><td></td><td></td><td class="s">    # value is zero, the output is also zero, regardless of the signs on 'a' and</td></tr>
<tr><td class="h"><a name="2563"></a>2563</td><td></td><td></td><td></td><td></td><td class="s">    # 'm'.</td></tr>
<tr><td class="h"><a name="2564"></a>2564</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2565"></a>2565</td><td></td><td></td><td></td><td></td><td class="s">    my $value = $LIB-&gt;_modpow($num-&gt;{value}, $exp-&gt;{value}, $mod-&gt;{value});</td></tr>
<tr><td class="h"><a name="2566"></a>2566</td><td></td><td></td><td></td><td></td><td class="s">    my $sign  = '+';</td></tr>
<tr><td class="h"><a name="2567"></a>2567</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2568"></a>2568</td><td></td><td></td><td></td><td></td><td class="s">    # If the resulting value is non-zero, we have four special cases, depending</td></tr>
<tr><td class="h"><a name="2569"></a>2569</td><td></td><td></td><td></td><td></td><td class="s">    # on the signs on 'a' and 'm'.</td></tr>
<tr><td class="h"><a name="2570"></a>2570</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2571"></a>2571</td><td></td><td></td><td></td><td></td><td class="s">    unless ($LIB-&gt;_is_zero($value)) {</td></tr>
<tr><td class="h"><a name="2572"></a>2572</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2573"></a>2573</td><td></td><td></td><td></td><td></td><td class="s">        # There is a negative sign on 'a' (= $num**$exp) only if the number we</td></tr>
<tr><td class="h"><a name="2574"></a>2574</td><td></td><td></td><td></td><td></td><td class="s">        # are exponentiating ($num) is negative and the exponent ($exp) is odd.</td></tr>
<tr><td class="h"><a name="2575"></a>2575</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2576"></a>2576</td><td></td><td></td><td></td><td></td><td class="s">        if ($num-&gt;{sign} eq '-' &amp;&amp; $exp-&gt;is_odd()) {</td></tr>
<tr><td class="h"><a name="2577"></a>2577</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2578"></a>2578</td><td></td><td></td><td></td><td></td><td class="s">            # When both the number 'a' and the modulus 'm' have a negative sign,</td></tr>
<tr><td class="h"><a name="2579"></a>2579</td><td></td><td></td><td></td><td></td><td class="s">            # use this relation:</td></tr>
<tr><td class="h"><a name="2580"></a>2580</td><td></td><td></td><td></td><td></td><td class="s">            #</td></tr>
<tr><td class="h"><a name="2581"></a>2581</td><td></td><td></td><td></td><td></td><td class="s">            #    -a (mod -m) = -(a (mod m))</td></tr>
<tr><td class="h"><a name="2582"></a>2582</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2583"></a>2583</td><td></td><td></td><td></td><td></td><td class="s">            if ($mod-&gt;{sign} eq '-') {</td></tr>
<tr><td class="h"><a name="2584"></a>2584</td><td></td><td></td><td></td><td></td><td class="s">                $sign = '-';</td></tr>
<tr><td class="h"><a name="2585"></a>2585</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2586"></a>2586</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2587"></a>2587</td><td></td><td></td><td></td><td></td><td class="s">            # When only the number 'a' has a negative sign, use this relation:</td></tr>
<tr><td class="h"><a name="2588"></a>2588</td><td></td><td></td><td></td><td></td><td class="s">            #</td></tr>
<tr><td class="h"><a name="2589"></a>2589</td><td></td><td></td><td></td><td></td><td class="s">            #    -a (mod m) = m - (a (mod m))</td></tr>
<tr><td class="h"><a name="2590"></a>2590</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2591"></a>2591</td><td></td><td></td><td></td><td></td><td class="s">            else {</td></tr>
<tr><td class="h"><a name="2592"></a>2592</td><td></td><td></td><td></td><td></td><td class="s">                # Use copy of $mod since _sub() modifies the first argument.</td></tr>
<tr><td class="h"><a name="2593"></a>2593</td><td></td><td></td><td></td><td></td><td class="s">                my $mod = $LIB-&gt;_copy($mod-&gt;{value});</td></tr>
<tr><td class="h"><a name="2594"></a>2594</td><td></td><td></td><td></td><td></td><td class="s">                $value = $LIB-&gt;_sub($mod, $value);</td></tr>
<tr><td class="h"><a name="2595"></a>2595</td><td></td><td></td><td></td><td></td><td class="s">                $sign  = '+';</td></tr>
<tr><td class="h"><a name="2596"></a>2596</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2597"></a>2597</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2598"></a>2598</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2599"></a>2599</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2600"></a>2600</td><td></td><td></td><td></td><td></td><td class="s">            # When only the modulus 'm' has a negative sign, use this relation:</td></tr>
<tr><td class="h"><a name="2601"></a>2601</td><td></td><td></td><td></td><td></td><td class="s">            #</td></tr>
<tr><td class="h"><a name="2602"></a>2602</td><td></td><td></td><td></td><td></td><td class="s">            #    a (mod -m) = (a (mod m)) - m</td></tr>
<tr><td class="h"><a name="2603"></a>2603</td><td></td><td></td><td></td><td></td><td class="s">            #               = -(m - (a (mod m)))</td></tr>
<tr><td class="h"><a name="2604"></a>2604</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2605"></a>2605</td><td></td><td></td><td></td><td></td><td class="s">            if ($mod-&gt;{sign} eq '-') {</td></tr>
<tr><td class="h"><a name="2606"></a>2606</td><td></td><td></td><td></td><td></td><td class="s">                # Use copy of $mod since _sub() modifies the first argument.</td></tr>
<tr><td class="h"><a name="2607"></a>2607</td><td></td><td></td><td></td><td></td><td class="s">                my $mod = $LIB-&gt;_copy($mod-&gt;{value});</td></tr>
<tr><td class="h"><a name="2608"></a>2608</td><td></td><td></td><td></td><td></td><td class="s">                $value = $LIB-&gt;_sub($mod, $value);</td></tr>
<tr><td class="h"><a name="2609"></a>2609</td><td></td><td></td><td></td><td></td><td class="s">                $sign  = '-';</td></tr>
<tr><td class="h"><a name="2610"></a>2610</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2611"></a>2611</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2612"></a>2612</td><td></td><td></td><td></td><td></td><td class="s">            # When neither the number 'a' nor the modulus 'm' have a negative</td></tr>
<tr><td class="h"><a name="2613"></a>2613</td><td></td><td></td><td></td><td></td><td class="s">            # sign, directly return the already computed value.</td></tr>
<tr><td class="h"><a name="2614"></a>2614</td><td></td><td></td><td></td><td></td><td class="s">            #</td></tr>
<tr><td class="h"><a name="2615"></a>2615</td><td></td><td></td><td></td><td></td><td class="s">            #    (a (mod m))</td></tr>
<tr><td class="h"><a name="2616"></a>2616</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2617"></a>2617</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2618"></a>2618</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2619"></a>2619</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2620"></a>2620</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2621"></a>2621</td><td></td><td></td><td></td><td></td><td class="s">    $num-&gt;{value} = $value;</td></tr>
<tr><td class="h"><a name="2622"></a>2622</td><td></td><td></td><td></td><td></td><td class="s">    $num-&gt;{sign}  = $sign;</td></tr>
<tr><td class="h"><a name="2623"></a>2623</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2624"></a>2624</td><td></td><td></td><td></td><td></td><td class="s">    return $num -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2625"></a>2625</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2626"></a>2626</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2627"></a>2627</td><td></td><td></td><td></td><td></td><td class="s">sub bpow {</td></tr>
<tr><td class="h"><a name="2628"></a>2628</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="2629"></a>2629</td><td></td><td></td><td></td><td></td><td class="s">    # compute power of two numbers -- stolen from Knuth Vol 2 pg 233</td></tr>
<tr><td class="h"><a name="2630"></a>2630</td><td></td><td></td><td></td><td></td><td class="s">    # modifies first argument</td></tr>
<tr><td class="h"><a name="2631"></a>2631</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2632"></a>2632</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="2633"></a>2633</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2634"></a>2634</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2635"></a>2635</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2636"></a>2636</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2637"></a>2637</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('bpow');</td></tr>
<tr><td class="h"><a name="2638"></a>2638</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2639"></a>2639</td><td></td><td></td><td></td><td></td><td class="s">    # $x and/or $y is a NaN</td></tr>
<tr><td class="h"><a name="2640"></a>2640</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r) if $x -&gt; is_nan() || $y -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="2641"></a>2641</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2642"></a>2642</td><td></td><td></td><td></td><td></td><td class="s">    # $x and/or $y is a +/-Inf</td></tr>
<tr><td class="h"><a name="2643"></a>2643</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf(&quot;-&quot;)) {</td></tr>
<tr><td class="h"><a name="2644"></a>2644</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bzero(@r)      if $y -&gt; is_negative();</td></tr>
<tr><td class="h"><a name="2645"></a>2645</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r)       if $y -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="2646"></a>2646</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r)      if $y -&gt; is_odd();</td></tr>
<tr><td class="h"><a name="2647"></a>2647</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bneg(@r);</td></tr>
<tr><td class="h"><a name="2648"></a>2648</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($x -&gt; is_inf(&quot;+&quot;)) {</td></tr>
<tr><td class="h"><a name="2649"></a>2649</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bzero(@r)      if $y -&gt; is_negative();</td></tr>
<tr><td class="h"><a name="2650"></a>2650</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r)       if $y -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="2651"></a>2651</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2652"></a>2652</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($y -&gt; is_inf(&quot;-&quot;)) {</td></tr>
<tr><td class="h"><a name="2653"></a>2653</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r)       if $x -&gt; is_one(&quot;-&quot;);</td></tr>
<tr><td class="h"><a name="2654"></a>2654</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; binf(&quot;+&quot;, @r)  if $x -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="2655"></a>2655</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bone(@r)       if $x -&gt; is_one(&quot;+&quot;);</td></tr>
<tr><td class="h"><a name="2656"></a>2656</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2657"></a>2657</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($y -&gt; is_inf(&quot;+&quot;)) {</td></tr>
<tr><td class="h"><a name="2658"></a>2658</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bnan(@r)       if $x -&gt; is_one(&quot;-&quot;);</td></tr>
<tr><td class="h"><a name="2659"></a>2659</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bzero(@r)      if $x -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="2660"></a>2660</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bone(@r)       if $x -&gt; is_one(&quot;+&quot;);</td></tr>
<tr><td class="h"><a name="2661"></a>2661</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; binf(&quot;+&quot;, @r);</td></tr>
<tr><td class="h"><a name="2662"></a>2662</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2663"></a>2663</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2664"></a>2664</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2665"></a>2665</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bone(@r) if $y -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="2666"></a>2666</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; binf(@r) if $y -&gt; is_negative();</td></tr>
<tr><td class="h"><a name="2667"></a>2667</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2668"></a>2668</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2669"></a>2669</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2670"></a>2670</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_one(&quot;+&quot;)) {</td></tr>
<tr><td class="h"><a name="2671"></a>2671</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2672"></a>2672</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2673"></a>2673</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2674"></a>2674</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_one(&quot;-&quot;)) {</td></tr>
<tr><td class="h"><a name="2675"></a>2675</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r) if $y -&gt; is_odd();</td></tr>
<tr><td class="h"><a name="2676"></a>2676</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bneg(@r);</td></tr>
<tr><td class="h"><a name="2677"></a>2677</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2678"></a>2678</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2679"></a>2679</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bpow($x, $y, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="2680"></a>2680</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2681"></a>2681</td><td></td><td></td><td></td><td></td><td class="s">    # We don't support finite non-integers, so return zero. The reason for</td></tr>
<tr><td class="h"><a name="2682"></a>2682</td><td></td><td></td><td></td><td></td><td class="s">    # returning zero, not NaN, is that all output is in the open interval (0,1),</td></tr>
<tr><td class="h"><a name="2683"></a>2683</td><td></td><td></td><td></td><td></td><td class="s">    # and truncating that to integer gives zero.</td></tr>
<tr><td class="h"><a name="2684"></a>2684</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2685"></a>2685</td><td></td><td></td><td></td><td></td><td class="s">    if ($y-&gt;{sign} eq '-' || !$y -&gt; isa($class)) {</td></tr>
<tr><td class="h"><a name="2686"></a>2686</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2687"></a>2687</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2688"></a>2688</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2689"></a>2689</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="2690"></a>2690</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2691"></a>2691</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB -&gt; _pow($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="2692"></a>2692</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign}  = $x -&gt; is_negative() &amp;&amp; $y -&gt; is_odd() ? '-' : '+';</td></tr>
<tr><td class="h"><a name="2693"></a>2693</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2694"></a>2694</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2695"></a>2695</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2696"></a>2696</td><td></td><td></td><td></td><td></td><td class="s">sub blog {</td></tr>
<tr><td class="h"><a name="2697"></a>2697</td><td></td><td></td><td></td><td></td><td class="s">    # Return the logarithm of the operand. If a second operand is defined, that</td></tr>
<tr><td class="h"><a name="2698"></a>2698</td><td></td><td></td><td></td><td></td><td class="s">    # value is used as the base, otherwise the base is assumed to be Euler's</td></tr>
<tr><td class="h"><a name="2699"></a>2699</td><td></td><td></td><td></td><td></td><td class="s">    # constant.</td></tr>
<tr><td class="h"><a name="2700"></a>2700</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2701"></a>2701</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $base, @r);</td></tr>
<tr><td class="h"><a name="2702"></a>2702</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2703"></a>2703</td><td></td><td></td><td></td><td></td><td class="s">    # Don't objectify the base, since an undefined base, as in $x-&gt;blog() or</td></tr>
<tr><td class="h"><a name="2704"></a>2704</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;blog(undef) signals that the base is Euler's number.</td></tr>
<tr><td class="h"><a name="2705"></a>2705</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2706"></a>2706</td><td></td><td></td><td></td><td></td><td class="s">    if (!ref($_[0]) &amp;&amp; $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i) {</td></tr>
<tr><td class="h"><a name="2707"></a>2707</td><td></td><td></td><td></td><td></td><td class="s">        # E.g., Math::BigInt-&gt;blog(256, 2)</td></tr>
<tr><td class="h"><a name="2708"></a>2708</td><td></td><td></td><td></td><td></td><td class="s">        ($class, $x, $base, @r) =</td></tr>
<tr><td class="h"><a name="2709"></a>2709</td><td></td><td></td><td></td><td></td><td class="s">          defined $_[2] ? objectify(2, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="2710"></a>2710</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="2711"></a>2711</td><td></td><td></td><td></td><td></td><td class="s">        # E.g., $x-&gt;blog(2) or the deprecated Math::BigInt::blog(256, 2)</td></tr>
<tr><td class="h"><a name="2712"></a>2712</td><td></td><td></td><td></td><td></td><td class="s">        ($class, $x, $base, @r) =</td></tr>
<tr><td class="h"><a name="2713"></a>2713</td><td></td><td></td><td></td><td></td><td class="s">          defined $_[1] ? objectify(2, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="2714"></a>2714</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2715"></a>2715</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2716"></a>2716</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('blog');</td></tr>
<tr><td class="h"><a name="2717"></a>2717</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2718"></a>2718</td><td></td><td></td><td></td><td></td><td class="s">    # Handle all exception cases and all trivial cases. I have used Wolfram</td></tr>
<tr><td class="h"><a name="2719"></a>2719</td><td></td><td></td><td></td><td></td><td class="s">    # Alpha (http://www.wolframalpha.com) as the reference for these cases.</td></tr>
<tr><td class="h"><a name="2720"></a>2720</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2721"></a>2721</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r) if $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="2722"></a>2722</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2723"></a>2723</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $base) {</td></tr>
<tr><td class="h"><a name="2724"></a>2724</td><td></td><td></td><td></td><td></td><td class="s">        $base = $class -&gt; new($base) unless ref $base;</td></tr>
<tr><td class="h"><a name="2725"></a>2725</td><td></td><td></td><td></td><td></td><td class="s">        if ($base -&gt; is_nan() || $base -&gt; is_one()) {</td></tr>
<tr><td class="h"><a name="2726"></a>2726</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2727"></a>2727</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($base -&gt; is_inf() || $base -&gt; is_zero()) {</td></tr>
<tr><td class="h"><a name="2728"></a>2728</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; bnan(@r) if $x -&gt; is_inf() || $x -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="2729"></a>2729</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2730"></a>2730</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($base -&gt; is_negative()) {              # -inf &lt; base &lt; 0</td></tr>
<tr><td class="h"><a name="2731"></a>2731</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; bzero(@r) if $x -&gt; is_one();   #     x = 1</td></tr>
<tr><td class="h"><a name="2732"></a>2732</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; bone(@r)  if $x == $base;      #     x = base</td></tr>
<tr><td class="h"><a name="2733"></a>2733</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; bnan(@r);                      #     otherwise</td></tr>
<tr><td class="h"><a name="2734"></a>2734</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2735"></a>2735</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; bone(@r) if $x == $base;   # 0 &lt; base &amp;&amp; 0 &lt; x &lt; inf</td></tr>
<tr><td class="h"><a name="2736"></a>2736</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2737"></a>2737</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2738"></a>2738</td><td></td><td></td><td></td><td></td><td class="s">    # We now know that the base is either undefined or &gt;= 2 and finite.</td></tr>
<tr><td class="h"><a name="2739"></a>2739</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2740"></a>2740</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; binf('+', @r) if $x -&gt; is_inf();       #   x = +/-inf</td></tr>
<tr><td class="h"><a name="2741"></a>2741</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r)      if $x -&gt; is_neg();       #   -inf &lt; x &lt; 0</td></tr>
<tr><td class="h"><a name="2742"></a>2742</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bzero(@r)     if $x -&gt; is_one();       #   x = 1</td></tr>
<tr><td class="h"><a name="2743"></a>2743</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; binf('-', @r) if $x -&gt; is_zero();      #   x = 0</td></tr>
<tr><td class="h"><a name="2744"></a>2744</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2745"></a>2745</td><td></td><td></td><td></td><td></td><td class="s">    # At this point we are done handling all exception cases and trivial cases.</td></tr>
<tr><td class="h"><a name="2746"></a>2746</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2747"></a>2747</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; blog($x, $base, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="2748"></a>2748</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2749"></a>2749</td><td></td><td></td><td></td><td></td><td class="s">    # fix for bug #24969:</td></tr>
<tr><td class="h"><a name="2750"></a>2750</td><td></td><td></td><td></td><td></td><td class="s">    # the default base is e (Euler's number) which is not an integer</td></tr>
<tr><td class="h"><a name="2751"></a>2751</td><td></td><td></td><td></td><td></td><td class="s">    if (!defined $base) {</td></tr>
<tr><td class="h"><a name="2752"></a>2752</td><td></td><td></td><td></td><td></td><td class="s">        require Math::BigFloat;</td></tr>
<tr><td class="h"><a name="2753"></a>2753</td><td></td><td></td><td></td><td></td><td class="s">        my $u = Math::BigFloat-&gt;blog($x)-&gt;as_int();</td></tr>
<tr><td class="h"><a name="2754"></a>2754</td><td></td><td></td><td></td><td></td><td class="s">        # modify $x in place</td></tr>
<tr><td class="h"><a name="2755"></a>2755</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $u-&gt;{value};</td></tr>
<tr><td class="h"><a name="2756"></a>2756</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{sign} = $u-&gt;{sign};</td></tr>
<tr><td class="h"><a name="2757"></a>2757</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2758"></a>2758</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2759"></a>2759</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2760"></a>2760</td><td></td><td></td><td></td><td></td><td class="s">    my ($rc) = $LIB-&gt;_log_int($x-&gt;{value}, $base-&gt;{value});</td></tr>
<tr><td class="h"><a name="2761"></a>2761</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) unless defined $rc; # not possible to take log?</td></tr>
<tr><td class="h"><a name="2762"></a>2762</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $rc;</td></tr>
<tr><td class="h"><a name="2763"></a>2763</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2764"></a>2764</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2765"></a>2765</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2766"></a>2766</td><td></td><td></td><td></td><td></td><td class="s">sub bexp {</td></tr>
<tr><td class="h"><a name="2767"></a>2767</td><td></td><td></td><td></td><td></td><td class="s">    # Calculate e ** $x (Euler's number to the power of X), truncated to</td></tr>
<tr><td class="h"><a name="2768"></a>2768</td><td></td><td></td><td></td><td></td><td class="s">    # an integer value.</td></tr>
<tr><td class="h"><a name="2769"></a>2769</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="2770"></a>2770</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2771"></a>2771</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bexp');</td></tr>
<tr><td class="h"><a name="2772"></a>2772</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2773"></a>2773</td><td></td><td></td><td></td><td></td><td class="s">    # inf, -inf, NaN, &lt;0 =&gt; NaN</td></tr>
<tr><td class="h"><a name="2774"></a>2774</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r)  if $x-&gt;{sign} eq 'NaN';</td></tr>
<tr><td class="h"><a name="2775"></a>2775</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bone(@r)  if $x-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="2776"></a>2776</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; round(@r) if $x-&gt;{sign} eq '+inf';</td></tr>
<tr><td class="h"><a name="2777"></a>2777</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bzero(@r) if $x-&gt;{sign} eq '-inf';</td></tr>
<tr><td class="h"><a name="2778"></a>2778</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2779"></a>2779</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bexp($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="2780"></a>2780</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2781"></a>2781</td><td></td><td></td><td></td><td></td><td class="s">    require Math::BigFloat;</td></tr>
<tr><td class="h"><a name="2782"></a>2782</td><td></td><td></td><td></td><td></td><td class="s">    my $tmp = Math::BigFloat -&gt; bexp($x, @r) -&gt; as_int();</td></tr>
<tr><td class="h"><a name="2783"></a>2783</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $tmp-&gt;{value};</td></tr>
<tr><td class="h"><a name="2784"></a>2784</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2785"></a>2785</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2786"></a>2786</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2787"></a>2787</td><td></td><td></td><td></td><td></td><td class="s">sub bnok {</td></tr>
<tr><td class="h"><a name="2788"></a>2788</td><td></td><td></td><td></td><td></td><td class="s">    # Calculate n over k (binomial coefficient or &quot;choose&quot; function) as</td></tr>
<tr><td class="h"><a name="2789"></a>2789</td><td></td><td></td><td></td><td></td><td class="s">    # integer.</td></tr>
<tr><td class="h"><a name="2790"></a>2790</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2791"></a>2791</td><td></td><td></td><td></td><td></td><td class="s">    # Set up parameters.</td></tr>
<tr><td class="h"><a name="2792"></a>2792</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $n, $k, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="2793"></a>2793</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_)</td></tr>
<tr><td class="h"><a name="2794"></a>2794</td><td></td><td></td><td></td><td></td><td class="s">                            : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="2795"></a>2795</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2796"></a>2796</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="2797"></a>2797</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2798"></a>2798</td><td></td><td></td><td></td><td></td><td class="s">    return $n if $n-&gt;modify('bnok');</td></tr>
<tr><td class="h"><a name="2799"></a>2799</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2800"></a>2800</td><td></td><td></td><td></td><td></td><td class="s">    # All cases where at least one argument is NaN.</td></tr>
<tr><td class="h"><a name="2801"></a>2801</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2802"></a>2802</td><td></td><td></td><td></td><td></td><td class="s">    return $n-&gt;bnan(@r) if $n-&gt;{sign} eq 'NaN' || $k-&gt;{sign} eq 'NaN';</td></tr>
<tr><td class="h"><a name="2803"></a>2803</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2804"></a>2804</td><td></td><td></td><td></td><td></td><td class="s">    # All cases where at least one argument is +/-inf.</td></tr>
<tr><td class="h"><a name="2805"></a>2805</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2806"></a>2806</td><td></td><td></td><td></td><td></td><td class="s">    if ($n -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="2807"></a>2807</td><td></td><td></td><td></td><td></td><td class="s">        if ($k -&gt; is_inf()) {                   # bnok(+/-inf,+/-inf)</td></tr>
<tr><td class="h"><a name="2808"></a>2808</td><td></td><td></td><td></td><td></td><td class="s">            return $n -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2809"></a>2809</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($k -&gt; is_neg()) {              # bnok(+/-inf,k), k &lt; 0</td></tr>
<tr><td class="h"><a name="2810"></a>2810</td><td></td><td></td><td></td><td></td><td class="s">            return $n -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2811"></a>2811</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($k -&gt; is_zero()) {             # bnok(+/-inf,k), k = 0</td></tr>
<tr><td class="h"><a name="2812"></a>2812</td><td></td><td></td><td></td><td></td><td class="s">            return $n -&gt; bone(@r);</td></tr>
<tr><td class="h"><a name="2813"></a>2813</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2814"></a>2814</td><td></td><td></td><td></td><td></td><td class="s">            if ($n -&gt; is_inf(&quot;+&quot;, @r)) {        # bnok(+inf,k), 0 &lt; k &lt; +inf</td></tr>
<tr><td class="h"><a name="2815"></a>2815</td><td></td><td></td><td></td><td></td><td class="s">                return $n -&gt; binf(&quot;+&quot;);</td></tr>
<tr><td class="h"><a name="2816"></a>2816</td><td></td><td></td><td></td><td></td><td class="s">            } else {                            # bnok(-inf,k), k &gt; 0</td></tr>
<tr><td class="h"><a name="2817"></a>2817</td><td></td><td></td><td></td><td></td><td class="s">                my $sign = $k -&gt; is_even() ? &quot;+&quot; : &quot;-&quot;;</td></tr>
<tr><td class="h"><a name="2818"></a>2818</td><td></td><td></td><td></td><td></td><td class="s">                return $n -&gt; binf($sign, @r);</td></tr>
<tr><td class="h"><a name="2819"></a>2819</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2820"></a>2820</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2821"></a>2821</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2822"></a>2822</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2823"></a>2823</td><td></td><td></td><td></td><td></td><td class="s">    elsif ($k -&gt; is_inf()) {            # bnok(n,+/-inf), -inf &lt;= n &lt;= inf</td></tr>
<tr><td class="h"><a name="2824"></a>2824</td><td></td><td></td><td></td><td></td><td class="s">        return $n -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="2825"></a>2825</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2826"></a>2826</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2827"></a>2827</td><td></td><td></td><td></td><td></td><td class="s">    # At this point, both n and k are real numbers.</td></tr>
<tr><td class="h"><a name="2828"></a>2828</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2829"></a>2829</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bnok($n, $k, @r)</td></tr>
<tr><td class="h"><a name="2830"></a>2830</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$n -&gt; isa($class) || !$k -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="2831"></a>2831</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2832"></a>2832</td><td></td><td></td><td></td><td></td><td class="s">    my $sign = 1;</td></tr>
<tr><td class="h"><a name="2833"></a>2833</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2834"></a>2834</td><td></td><td></td><td></td><td></td><td class="s">    if ($n &gt;= 0) {</td></tr>
<tr><td class="h"><a name="2835"></a>2835</td><td></td><td></td><td></td><td></td><td class="s">        if ($k &lt; 0 || $k &gt; $n) {</td></tr>
<tr><td class="h"><a name="2836"></a>2836</td><td></td><td></td><td></td><td></td><td class="s">            return $n -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2837"></a>2837</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2838"></a>2838</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="2839"></a>2839</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2840"></a>2840</td><td></td><td></td><td></td><td></td><td class="s">        if ($k &gt;= 0) {</td></tr>
<tr><td class="h"><a name="2841"></a>2841</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2842"></a>2842</td><td></td><td></td><td></td><td></td><td class="s">            # n &lt; 0 and k &gt;= 0: bnok(n,k) = (-1)^k * bnok(-n+k-1,k)</td></tr>
<tr><td class="h"><a name="2843"></a>2843</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2844"></a>2844</td><td></td><td></td><td></td><td></td><td class="s">            $sign = (-1) ** $k;</td></tr>
<tr><td class="h"><a name="2845"></a>2845</td><td></td><td></td><td></td><td></td><td class="s">            $n = $n -&gt; bneg() -&gt; badd($k) -&gt; bdec();</td></tr>
<tr><td class="h"><a name="2846"></a>2846</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2847"></a>2847</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($k &lt;= $n) {</td></tr>
<tr><td class="h"><a name="2848"></a>2848</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2849"></a>2849</td><td></td><td></td><td></td><td></td><td class="s">            # n &lt; 0 and k &lt;= n: bnok(n,k) = (-1)^(n-k) * bnok(-k-1,n-k)</td></tr>
<tr><td class="h"><a name="2850"></a>2850</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2851"></a>2851</td><td></td><td></td><td></td><td></td><td class="s">            $sign = (-1) ** ($n - $k);</td></tr>
<tr><td class="h"><a name="2852"></a>2852</td><td></td><td></td><td></td><td></td><td class="s">            my $x0 = $n -&gt; copy();</td></tr>
<tr><td class="h"><a name="2853"></a>2853</td><td></td><td></td><td></td><td></td><td class="s">            $n = $n -&gt; bone() -&gt; badd($k) -&gt; bneg();</td></tr>
<tr><td class="h"><a name="2854"></a>2854</td><td></td><td></td><td></td><td></td><td class="s">            $k = $k -&gt; copy();</td></tr>
<tr><td class="h"><a name="2855"></a>2855</td><td></td><td></td><td></td><td></td><td class="s">            $k = $k -&gt; bneg() -&gt; badd($x0);</td></tr>
<tr><td class="h"><a name="2856"></a>2856</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2857"></a>2857</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2858"></a>2858</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2859"></a>2859</td><td></td><td></td><td></td><td></td><td class="s">            # n &lt; 0 and n &lt; k &lt; 0:</td></tr>
<tr><td class="h"><a name="2860"></a>2860</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2861"></a>2861</td><td></td><td></td><td></td><td></td><td class="s">            return $n -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="2862"></a>2862</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2863"></a>2863</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2864"></a>2864</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2865"></a>2865</td><td></td><td></td><td></td><td></td><td class="s">    $n-&gt;{value} = $LIB-&gt;_nok($n-&gt;{value}, $k-&gt;{value});</td></tr>
<tr><td class="h"><a name="2866"></a>2866</td><td></td><td></td><td></td><td></td><td class="s">    $n = $n -&gt; bneg() if $sign == -1;</td></tr>
<tr><td class="h"><a name="2867"></a>2867</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2868"></a>2868</td><td></td><td></td><td></td><td></td><td class="s">    $n -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="2869"></a>2869</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2870"></a>2870</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2871"></a>2871</td><td></td><td></td><td></td><td></td><td class="s">sub buparrow {</td></tr>
<tr><td class="h"><a name="2872"></a>2872</td><td></td><td></td><td></td><td></td><td class="s">    my $a = shift;</td></tr>
<tr><td class="h"><a name="2873"></a>2873</td><td></td><td></td><td></td><td></td><td class="s">    my $y = $a -&gt; uparrow(@_);</td></tr>
<tr><td class="h"><a name="2874"></a>2874</td><td></td><td></td><td></td><td></td><td class="s">    $a -&gt; {value} = $y -&gt; {value};</td></tr>
<tr><td class="h"><a name="2875"></a>2875</td><td></td><td></td><td></td><td></td><td class="s">    return $a;</td></tr>
<tr><td class="h"><a name="2876"></a>2876</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2877"></a>2877</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2878"></a>2878</td><td></td><td></td><td></td><td></td><td class="s">sub uparrow {</td></tr>
<tr><td class="h"><a name="2879"></a>2879</td><td></td><td></td><td></td><td></td><td class="s">    # Knuth's up-arrow notation buparrow(a, n, b)</td></tr>
<tr><td class="h"><a name="2880"></a>2880</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2881"></a>2881</td><td></td><td></td><td></td><td></td><td class="s">    # The following is a simple, recursive implementation of the up-arrow</td></tr>
<tr><td class="h"><a name="2882"></a>2882</td><td></td><td></td><td></td><td></td><td class="s">    # notation, just to show the idea. Such implementations cause &quot;Deep</td></tr>
<tr><td class="h"><a name="2883"></a>2883</td><td></td><td></td><td></td><td></td><td class="s">    # recursion on subroutine ...&quot; warnings, so we use a faster, non-recursive</td></tr>
<tr><td class="h"><a name="2884"></a>2884</td><td></td><td></td><td></td><td></td><td class="s">    # algorithm below with @_ as a stack.</td></tr>
<tr><td class="h"><a name="2885"></a>2885</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2886"></a>2886</td><td></td><td></td><td></td><td></td><td class="s">    #   sub buparrow {</td></tr>
<tr><td class="h"><a name="2887"></a>2887</td><td></td><td></td><td></td><td></td><td class="s">    #       my ($a, $n, $b) = @_;</td></tr>
<tr><td class="h"><a name="2888"></a>2888</td><td></td><td></td><td></td><td></td><td class="s">    #       return $a ** $b if $n == 1;</td></tr>
<tr><td class="h"><a name="2889"></a>2889</td><td></td><td></td><td></td><td></td><td class="s">    #       return $a * $b  if $n == 0;</td></tr>
<tr><td class="h"><a name="2890"></a>2890</td><td></td><td></td><td></td><td></td><td class="s">    #       return 1        if $b == 0;</td></tr>
<tr><td class="h"><a name="2891"></a>2891</td><td></td><td></td><td></td><td></td><td class="s">    #       return buparrow($a, $n - 1, buparrow($a, $n, $b - 1));</td></tr>
<tr><td class="h"><a name="2892"></a>2892</td><td></td><td></td><td></td><td></td><td class="s">    #   }</td></tr>
<tr><td class="h"><a name="2893"></a>2893</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2894"></a>2894</td><td></td><td></td><td></td><td></td><td class="s">    my ($a, $b, $n) = @_;</td></tr>
<tr><td class="h"><a name="2895"></a>2895</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref $a;</td></tr>
<tr><td class="h"><a name="2896"></a>2896</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;a must be non-negative&quot;) if $a &lt; 0;</td></tr>
<tr><td class="h"><a name="2897"></a>2897</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;n must be non-negative&quot;) if $n &lt; 0;</td></tr>
<tr><td class="h"><a name="2898"></a>2898</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;b must be non-negative&quot;) if $b &lt; 0;</td></tr>
<tr><td class="h"><a name="2899"></a>2899</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2900"></a>2900</td><td></td><td></td><td></td><td></td><td class="s">    while (@_ &gt;= 3) {</td></tr>
<tr><td class="h"><a name="2901"></a>2901</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2902"></a>2902</td><td></td><td></td><td></td><td></td><td class="s">        # return $a ** $b if $n == 1;</td></tr>
<tr><td class="h"><a name="2903"></a>2903</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2904"></a>2904</td><td></td><td></td><td></td><td></td><td class="s">        if ($_[-2] == 1) {</td></tr>
<tr><td class="h"><a name="2905"></a>2905</td><td></td><td></td><td></td><td></td><td class="s">            my ($a, $n, $b) = splice @_, -3;</td></tr>
<tr><td class="h"><a name="2906"></a>2906</td><td></td><td></td><td></td><td></td><td class="s">            push @_, $a ** $b;</td></tr>
<tr><td class="h"><a name="2907"></a>2907</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="2908"></a>2908</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2909"></a>2909</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2910"></a>2910</td><td></td><td></td><td></td><td></td><td class="s">        # return $a * $b if $n == 0;</td></tr>
<tr><td class="h"><a name="2911"></a>2911</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2912"></a>2912</td><td></td><td></td><td></td><td></td><td class="s">        if ($_[-2] == 0) {</td></tr>
<tr><td class="h"><a name="2913"></a>2913</td><td></td><td></td><td></td><td></td><td class="s">            my ($a, $n, $b) = splice @_, -3;</td></tr>
<tr><td class="h"><a name="2914"></a>2914</td><td></td><td></td><td></td><td></td><td class="s">            push @_, $a * $b;</td></tr>
<tr><td class="h"><a name="2915"></a>2915</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="2916"></a>2916</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2917"></a>2917</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2918"></a>2918</td><td></td><td></td><td></td><td></td><td class="s">        # return 1 if $b == 0;</td></tr>
<tr><td class="h"><a name="2919"></a>2919</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2920"></a>2920</td><td></td><td></td><td></td><td></td><td class="s">        if ($_[-1] == 0) {</td></tr>
<tr><td class="h"><a name="2921"></a>2921</td><td></td><td></td><td></td><td></td><td class="s">            splice @_, -3;</td></tr>
<tr><td class="h"><a name="2922"></a>2922</td><td></td><td></td><td></td><td></td><td class="s">            push @_, $class -&gt; bone();</td></tr>
<tr><td class="h"><a name="2923"></a>2923</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="2924"></a>2924</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2925"></a>2925</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2926"></a>2926</td><td></td><td></td><td></td><td></td><td class="s">        # return buparrow($a, $n - 1, buparrow($a, $n, $b - 1));</td></tr>
<tr><td class="h"><a name="2927"></a>2927</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2928"></a>2928</td><td></td><td></td><td></td><td></td><td class="s">        my ($a, $n, $b) = splice @_, -3;</td></tr>
<tr><td class="h"><a name="2929"></a>2929</td><td></td><td></td><td></td><td></td><td class="s">        push @_, ($a, $n - 1,</td></tr>
<tr><td class="h"><a name="2930"></a>2930</td><td></td><td></td><td></td><td></td><td class="s">                      $a, $n, $b - 1);</td></tr>
<tr><td class="h"><a name="2931"></a>2931</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2932"></a>2932</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2933"></a>2933</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2934"></a>2934</td><td></td><td></td><td></td><td></td><td class="s">    pop @_;</td></tr>
<tr><td class="h"><a name="2935"></a>2935</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2936"></a>2936</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2937"></a>2937</td><td></td><td></td><td></td><td></td><td class="s">sub backermann {</td></tr>
<tr><td class="h"><a name="2938"></a>2938</td><td></td><td></td><td></td><td></td><td class="s">    my $m = shift;</td></tr>
<tr><td class="h"><a name="2939"></a>2939</td><td></td><td></td><td></td><td></td><td class="s">    my $y = $m -&gt; ackermann(@_);</td></tr>
<tr><td class="h"><a name="2940"></a>2940</td><td></td><td></td><td></td><td></td><td class="s">    $m -&gt; {value} = $y -&gt; {value};</td></tr>
<tr><td class="h"><a name="2941"></a>2941</td><td></td><td></td><td></td><td></td><td class="s">    return $m;</td></tr>
<tr><td class="h"><a name="2942"></a>2942</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2943"></a>2943</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2944"></a>2944</td><td></td><td></td><td></td><td></td><td class="s">sub ackermann {</td></tr>
<tr><td class="h"><a name="2945"></a>2945</td><td></td><td></td><td></td><td></td><td class="s">    # Ackermann's function ackermann(m, n)</td></tr>
<tr><td class="h"><a name="2946"></a>2946</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2947"></a>2947</td><td></td><td></td><td></td><td></td><td class="s">    # The following is a simple, recursive implementation of the ackermann</td></tr>
<tr><td class="h"><a name="2948"></a>2948</td><td></td><td></td><td></td><td></td><td class="s">    # function, just to show the idea. Such implementations cause &quot;Deep</td></tr>
<tr><td class="h"><a name="2949"></a>2949</td><td></td><td></td><td></td><td></td><td class="s">    # recursion on subroutine ...&quot; warnings, so we use a faster, non-recursive</td></tr>
<tr><td class="h"><a name="2950"></a>2950</td><td></td><td></td><td></td><td></td><td class="s">    # algorithm below with @_ as a stack.</td></tr>
<tr><td class="h"><a name="2951"></a>2951</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="2952"></a>2952</td><td></td><td></td><td></td><td></td><td class="s">    # sub ackermann {</td></tr>
<tr><td class="h"><a name="2953"></a>2953</td><td></td><td></td><td></td><td></td><td class="s">    #     my ($m, $n) = @_;</td></tr>
<tr><td class="h"><a name="2954"></a>2954</td><td></td><td></td><td></td><td></td><td class="s">    #     return $n + 1                                  if $m == 0;</td></tr>
<tr><td class="h"><a name="2955"></a>2955</td><td></td><td></td><td></td><td></td><td class="s">    #     return ackermann($m - 1, 1)                    if $m &gt; 0 &amp;&amp; $n == 0;</td></tr>
<tr><td class="h"><a name="2956"></a>2956</td><td></td><td></td><td></td><td></td><td class="s">    #     return ackermann($m - 1, ackermann($m, $n - 1) if $m &gt; 0 &amp;&amp; $n &gt; 0;</td></tr>
<tr><td class="h"><a name="2957"></a>2957</td><td></td><td></td><td></td><td></td><td class="s">    # }</td></tr>
<tr><td class="h"><a name="2958"></a>2958</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2959"></a>2959</td><td></td><td></td><td></td><td></td><td class="s">    my ($m, $n) = @_;</td></tr>
<tr><td class="h"><a name="2960"></a>2960</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref $m;</td></tr>
<tr><td class="h"><a name="2961"></a>2961</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;m must be non-negative&quot;) if $m &lt; 0;</td></tr>
<tr><td class="h"><a name="2962"></a>2962</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;n must be non-negative&quot;) if $n &lt; 0;</td></tr>
<tr><td class="h"><a name="2963"></a>2963</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2964"></a>2964</td><td></td><td></td><td></td><td></td><td class="s">    my $two      = $class -&gt; new(&quot;2&quot;);</td></tr>
<tr><td class="h"><a name="2965"></a>2965</td><td></td><td></td><td></td><td></td><td class="s">    my $three    = $class -&gt; new(&quot;3&quot;);</td></tr>
<tr><td class="h"><a name="2966"></a>2966</td><td></td><td></td><td></td><td></td><td class="s">    my $thirteen = $class -&gt; new(&quot;13&quot;);</td></tr>
<tr><td class="h"><a name="2967"></a>2967</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2968"></a>2968</td><td></td><td></td><td></td><td></td><td class="s">    $n = pop;</td></tr>
<tr><td class="h"><a name="2969"></a>2969</td><td></td><td></td><td></td><td></td><td class="s">    $n = $class -&gt; new($n) unless ref($n);</td></tr>
<tr><td class="h"><a name="2970"></a>2970</td><td></td><td></td><td></td><td></td><td class="s">    while (@_) {</td></tr>
<tr><td class="h"><a name="2971"></a>2971</td><td></td><td></td><td></td><td></td><td class="s">        my $m = pop;</td></tr>
<tr><td class="h"><a name="2972"></a>2972</td><td></td><td></td><td></td><td></td><td class="s">        if ($m &gt; $three) {</td></tr>
<tr><td class="h"><a name="2973"></a>2973</td><td></td><td></td><td></td><td></td><td class="s">            push @_, (--$m) x $n;</td></tr>
<tr><td class="h"><a name="2974"></a>2974</td><td></td><td></td><td></td><td></td><td class="s">            while (--$m &gt;= $three) {</td></tr>
<tr><td class="h"><a name="2975"></a>2975</td><td></td><td></td><td></td><td></td><td class="s">                push @_, $m;</td></tr>
<tr><td class="h"><a name="2976"></a>2976</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="2977"></a>2977</td><td></td><td></td><td></td><td></td><td class="s">            $n = $thirteen;</td></tr>
<tr><td class="h"><a name="2978"></a>2978</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($m == $three) {</td></tr>
<tr><td class="h"><a name="2979"></a>2979</td><td></td><td></td><td></td><td></td><td class="s">            $n = $class -&gt; bone() -&gt; blsft($n + $three) -&gt; bsub($three);</td></tr>
<tr><td class="h"><a name="2980"></a>2980</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($m == $two) {</td></tr>
<tr><td class="h"><a name="2981"></a>2981</td><td></td><td></td><td></td><td></td><td class="s">            $n = $n -&gt; bmul($two) -&gt; badd($three);</td></tr>
<tr><td class="h"><a name="2982"></a>2982</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($m &gt;= 0) {</td></tr>
<tr><td class="h"><a name="2983"></a>2983</td><td></td><td></td><td></td><td></td><td class="s">            $n = $n -&gt; badd($m) -&gt; binc();</td></tr>
<tr><td class="h"><a name="2984"></a>2984</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="2985"></a>2985</td><td></td><td></td><td></td><td></td><td class="s">            die &quot;negative m!&quot;;</td></tr>
<tr><td class="h"><a name="2986"></a>2986</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="2987"></a>2987</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="2988"></a>2988</td><td></td><td></td><td></td><td></td><td class="s">    $n;</td></tr>
<tr><td class="h"><a name="2989"></a>2989</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="2990"></a>2990</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2991"></a>2991</td><td></td><td></td><td></td><td></td><td class="s">sub bsin {</td></tr>
<tr><td class="h"><a name="2992"></a>2992</td><td></td><td></td><td></td><td></td><td class="s">    # Calculate sin(x) to N digits. Unless upgrading is in effect, returns the</td></tr>
<tr><td class="h"><a name="2993"></a>2993</td><td></td><td></td><td></td><td></td><td class="s">    # result truncated to an integer.</td></tr>
<tr><td class="h"><a name="2994"></a>2994</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="2995"></a>2995</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2996"></a>2996</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bsin');</td></tr>
<tr><td class="h"><a name="2997"></a>2997</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="2998"></a>2998</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;{sign} !~ /^[+-]\z/; # -inf +inf or NaN =&gt; NaN</td></tr>
<tr><td class="h"><a name="2999"></a>2999</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bzero(@r) if $x-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="3000"></a>3000</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3001"></a>3001</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bsin($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="3002"></a>3002</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3003"></a>3003</td><td></td><td></td><td></td><td></td><td class="s">    require Math::BigFloat;</td></tr>
<tr><td class="h"><a name="3004"></a>3004</td><td></td><td></td><td></td><td></td><td class="s">    # calculate the result and truncate it to integer</td></tr>
<tr><td class="h"><a name="3005"></a>3005</td><td></td><td></td><td></td><td></td><td class="s">    my $t = Math::BigFloat-&gt;new($x)-&gt;bsin(@r)-&gt;as_int();</td></tr>
<tr><td class="h"><a name="3006"></a>3006</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3007"></a>3007</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x-&gt;bone(@r)  if $t-&gt;is_one();</td></tr>
<tr><td class="h"><a name="3008"></a>3008</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x-&gt;bzero(@r) if $t-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="3009"></a>3009</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3010"></a>3010</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3011"></a>3011</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3012"></a>3012</td><td></td><td></td><td></td><td></td><td class="s">sub bcos {</td></tr>
<tr><td class="h"><a name="3013"></a>3013</td><td></td><td></td><td></td><td></td><td class="s">    # Calculate cos(x) to N digits. Unless upgrading is in effect, returns the</td></tr>
<tr><td class="h"><a name="3014"></a>3014</td><td></td><td></td><td></td><td></td><td class="s">    # result truncated to an integer.</td></tr>
<tr><td class="h"><a name="3015"></a>3015</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3016"></a>3016</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3017"></a>3017</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bcos');</td></tr>
<tr><td class="h"><a name="3018"></a>3018</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3019"></a>3019</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;{sign} !~ /^[+-]\z/; # -inf +inf or NaN =&gt; NaN</td></tr>
<tr><td class="h"><a name="3020"></a>3020</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bone(@r) if $x-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="3021"></a>3021</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3022"></a>3022</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bcos($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="3023"></a>3023</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3024"></a>3024</td><td></td><td></td><td></td><td></td><td class="s">    require Math::BigFloat;</td></tr>
<tr><td class="h"><a name="3025"></a>3025</td><td></td><td></td><td></td><td></td><td class="s">    my $tmp = Math::BigFloat -&gt; bcos($x, @r) -&gt; as_int();</td></tr>
<tr><td class="h"><a name="3026"></a>3026</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $tmp-&gt;{value};</td></tr>
<tr><td class="h"><a name="3027"></a>3027</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="3028"></a>3028</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3029"></a>3029</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3030"></a>3030</td><td></td><td></td><td></td><td></td><td class="s">sub batan {</td></tr>
<tr><td class="h"><a name="3031"></a>3031</td><td></td><td></td><td></td><td></td><td class="s">    # Calculate arctan(x) to N digits. Unless upgrading is in effect, returns</td></tr>
<tr><td class="h"><a name="3032"></a>3032</td><td></td><td></td><td></td><td></td><td class="s">    # the result truncated to an integer.</td></tr>
<tr><td class="h"><a name="3033"></a>3033</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3034"></a>3034</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3035"></a>3035</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('batan');</td></tr>
<tr><td class="h"><a name="3036"></a>3036</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3037"></a>3037</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r)  if $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="3038"></a>3038</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bzero(@r) if $x -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="3039"></a>3039</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3040"></a>3040</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; batan($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="3041"></a>3041</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3042"></a>3042</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bone(&quot;+&quot;, @r) if $x -&gt; bgt(&quot;1&quot;);</td></tr>
<tr><td class="h"><a name="3043"></a>3043</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bone(&quot;-&quot;, @r) if $x -&gt; blt(&quot;-1&quot;);</td></tr>
<tr><td class="h"><a name="3044"></a>3044</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3045"></a>3045</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="3046"></a>3046</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3047"></a>3047</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3048"></a>3048</td><td></td><td></td><td></td><td></td><td class="s">sub batan2 {</td></tr>
<tr><td class="h"><a name="3049"></a>3049</td><td></td><td></td><td></td><td></td><td class="s">    # calculate arcus tangens of ($y/$x)</td></tr>
<tr><td class="h"><a name="3050"></a>3050</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3051"></a>3051</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $y, $x, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="3052"></a>3052</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3053"></a>3053</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3054"></a>3054</td><td></td><td></td><td></td><td></td><td class="s">    return $y if $y-&gt;modify('batan2');</td></tr>
<tr><td class="h"><a name="3055"></a>3055</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3056"></a>3056</td><td></td><td></td><td></td><td></td><td class="s">    return $y-&gt;bnan() if ($y-&gt;{sign} eq $nan) || ($x-&gt;{sign} eq $nan);</td></tr>
<tr><td class="h"><a name="3057"></a>3057</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3058"></a>3058</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;batan2($y, $x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="3059"></a>3059</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3060"></a>3060</td><td></td><td></td><td></td><td></td><td class="s">    # Y    X</td></tr>
<tr><td class="h"><a name="3061"></a>3061</td><td></td><td></td><td></td><td></td><td class="s">    # != 0 -inf result is +- pi</td></tr>
<tr><td class="h"><a name="3062"></a>3062</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;is_inf() || $y-&gt;is_inf()) {</td></tr>
<tr><td class="h"><a name="3063"></a>3063</td><td></td><td></td><td></td><td></td><td class="s">        if ($y-&gt;is_inf()) {</td></tr>
<tr><td class="h"><a name="3064"></a>3064</td><td></td><td></td><td></td><td></td><td class="s">            if ($x-&gt;{sign} eq '-inf') {</td></tr>
<tr><td class="h"><a name="3065"></a>3065</td><td></td><td></td><td></td><td></td><td class="s">                # calculate 3 pi/4 =&gt; 2.3.. =&gt; 2</td></tr>
<tr><td class="h"><a name="3066"></a>3066</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bone(substr($y-&gt;{sign}, 0, 1));</td></tr>
<tr><td class="h"><a name="3067"></a>3067</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bmul($class-&gt;new(2));</td></tr>
<tr><td class="h"><a name="3068"></a>3068</td><td></td><td></td><td></td><td></td><td class="s">            } elsif ($x-&gt;{sign} eq '+inf') {</td></tr>
<tr><td class="h"><a name="3069"></a>3069</td><td></td><td></td><td></td><td></td><td class="s">                # calculate pi/4 =&gt; 0.7 =&gt; 0</td></tr>
<tr><td class="h"><a name="3070"></a>3070</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bzero();</td></tr>
<tr><td class="h"><a name="3071"></a>3071</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="3072"></a>3072</td><td></td><td></td><td></td><td></td><td class="s">                # calculate pi/2 =&gt; 1.5 =&gt; 1</td></tr>
<tr><td class="h"><a name="3073"></a>3073</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bone(substr($y-&gt;{sign}, 0, 1));</td></tr>
<tr><td class="h"><a name="3074"></a>3074</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3075"></a>3075</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="3076"></a>3076</td><td></td><td></td><td></td><td></td><td class="s">            if ($x-&gt;{sign} eq '+inf') {</td></tr>
<tr><td class="h"><a name="3077"></a>3077</td><td></td><td></td><td></td><td></td><td class="s">                # calculate pi/4 =&gt; 0.7 =&gt; 0</td></tr>
<tr><td class="h"><a name="3078"></a>3078</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bzero();</td></tr>
<tr><td class="h"><a name="3079"></a>3079</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="3080"></a>3080</td><td></td><td></td><td></td><td></td><td class="s">                # PI =&gt; 3.1415.. =&gt; 3</td></tr>
<tr><td class="h"><a name="3081"></a>3081</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bone(substr($y-&gt;{sign}, 0, 1));</td></tr>
<tr><td class="h"><a name="3082"></a>3082</td><td></td><td></td><td></td><td></td><td class="s">                $y = $y-&gt;bmul($class-&gt;new(3));</td></tr>
<tr><td class="h"><a name="3083"></a>3083</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3084"></a>3084</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3085"></a>3085</td><td></td><td></td><td></td><td></td><td class="s">        return $y;</td></tr>
<tr><td class="h"><a name="3086"></a>3086</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3087"></a>3087</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3088"></a>3088</td><td></td><td></td><td></td><td></td><td class="s">    require Math::BigFloat;</td></tr>
<tr><td class="h"><a name="3089"></a>3089</td><td></td><td></td><td></td><td></td><td class="s">    my $r = Math::BigFloat-&gt;new($y)</td></tr>
<tr><td class="h"><a name="3090"></a>3090</td><td></td><td></td><td></td><td></td><td class="s">      -&gt;batan2(Math::BigFloat-&gt;new($x), @r)</td></tr>
<tr><td class="h"><a name="3091"></a>3091</td><td></td><td></td><td></td><td></td><td class="s">        -&gt;as_int();</td></tr>
<tr><td class="h"><a name="3092"></a>3092</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3093"></a>3093</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $r-&gt;{value};</td></tr>
<tr><td class="h"><a name="3094"></a>3094</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign} = $r-&gt;{sign};</td></tr>
<tr><td class="h"><a name="3095"></a>3095</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3096"></a>3096</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3097"></a>3097</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3098"></a>3098</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3099"></a>3099</td><td></td><td></td><td></td><td></td><td class="s">sub bsqrt {</td></tr>
<tr><td class="h"><a name="3100"></a>3100</td><td></td><td></td><td></td><td></td><td class="s">    # calculate square root of $x</td></tr>
<tr><td class="h"><a name="3101"></a>3101</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3102"></a>3102</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3103"></a>3103</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bsqrt');</td></tr>
<tr><td class="h"><a name="3104"></a>3104</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3105"></a>3105</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r)  if $x-&gt;{sign} !~ /^\+/;    # -x or -inf or NaN =&gt; NaN</td></tr>
<tr><td class="h"><a name="3106"></a>3106</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r) if $x-&gt;{sign} eq '+inf';   # sqrt(+inf) == inf</td></tr>
<tr><td class="h"><a name="3107"></a>3107</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3108"></a>3108</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;bsqrt($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="3109"></a>3109</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3110"></a>3110</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB-&gt;_sqrt($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3111"></a>3111</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3112"></a>3112</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3113"></a>3113</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3114"></a>3114</td><td></td><td></td><td></td><td></td><td class="s">sub broot {</td></tr>
<tr><td class="h"><a name="3115"></a>3115</td><td></td><td></td><td></td><td></td><td class="s">    # calculate $y'th root of $x</td></tr>
<tr><td class="h"><a name="3116"></a>3116</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3117"></a>3117</td><td></td><td></td><td></td><td></td><td class="s">    # set up parameters</td></tr>
<tr><td class="h"><a name="3118"></a>3118</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3119"></a>3119</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="3120"></a>3120</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3121"></a>3121</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3122"></a>3122</td><td></td><td></td><td></td><td></td><td class="s">    $y = $class-&gt;new(2) unless defined $y;</td></tr>
<tr><td class="h"><a name="3123"></a>3123</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3124"></a>3124</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('broot');</td></tr>
<tr><td class="h"><a name="3125"></a>3125</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3126"></a>3126</td><td></td><td></td><td></td><td></td><td class="s">    # NaN handling: $x ** 1/0, x or y NaN, or y inf/-inf or y == 0</td></tr>
<tr><td class="h"><a name="3127"></a>3127</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;{sign} !~ /^\+/ || $y-&gt;is_zero() ||</td></tr>
<tr><td class="h"><a name="3128"></a>3128</td><td></td><td></td><td></td><td></td><td class="s">                           $y-&gt;{sign} !~ /^\+$/;</td></tr>
<tr><td class="h"><a name="3129"></a>3129</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3130"></a>3130</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r)</td></tr>
<tr><td class="h"><a name="3131"></a>3131</td><td></td><td></td><td></td><td></td><td class="s">      if $x-&gt;is_zero() || $x-&gt;is_one() || $x-&gt;is_inf() || $y-&gt;is_one();</td></tr>
<tr><td class="h"><a name="3132"></a>3132</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3133"></a>3133</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade-&gt;broot($x, $y, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="3134"></a>3134</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3135"></a>3135</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB-&gt;_root($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="3136"></a>3136</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3137"></a>3137</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3138"></a>3138</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3139"></a>3139</td><td></td><td></td><td></td><td></td><td class="s">sub bfac {</td></tr>
<tr><td class="h"><a name="3140"></a>3140</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3141"></a>3141</td><td></td><td></td><td></td><td></td><td class="s">    # compute factorial number from $x, modify $x in place</td></tr>
<tr><td class="h"><a name="3142"></a>3142</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3143"></a>3143</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3144"></a>3144</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bfac') || $x-&gt;{sign} eq '+inf'; # inf =&gt; inf</td></tr>
<tr><td class="h"><a name="3145"></a>3145</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3146"></a>3146</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;{sign} ne '+'; # NaN, &lt;0 =&gt; NaN</td></tr>
<tr><td class="h"><a name="3147"></a>3147</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3148"></a>3148</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bfac($x, @r)</td></tr>
<tr><td class="h"><a name="3149"></a>3149</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3150"></a>3150</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3151"></a>3151</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB-&gt;_fac($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3152"></a>3152</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3153"></a>3153</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3154"></a>3154</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3155"></a>3155</td><td></td><td></td><td></td><td></td><td class="s">sub bdfac {</td></tr>
<tr><td class="h"><a name="3156"></a>3156</td><td></td><td></td><td></td><td></td><td class="s">    # compute double factorial, modify $x in place</td></tr>
<tr><td class="h"><a name="3157"></a>3157</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3158"></a>3158</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3159"></a>3159</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bdfac') || $x-&gt;{sign} eq '+inf'; # inf =&gt; inf</td></tr>
<tr><td class="h"><a name="3160"></a>3160</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3161"></a>3161</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;is_nan() || $x &lt;= -2;</td></tr>
<tr><td class="h"><a name="3162"></a>3162</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bone(@r) if $x &lt;= 1;</td></tr>
<tr><td class="h"><a name="3163"></a>3163</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3164"></a>3164</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bdfac($x, @r)</td></tr>
<tr><td class="h"><a name="3165"></a>3165</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3166"></a>3166</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3167"></a>3167</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;bdfac() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="3168"></a>3168</td><td></td><td></td><td></td><td></td><td class="s">        unless $LIB-&gt;can('_dfac');</td></tr>
<tr><td class="h"><a name="3169"></a>3169</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3170"></a>3170</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB-&gt;_dfac($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3171"></a>3171</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3172"></a>3172</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3173"></a>3173</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3174"></a>3174</td><td></td><td></td><td></td><td></td><td class="s">sub btfac {</td></tr>
<tr><td class="h"><a name="3175"></a>3175</td><td></td><td></td><td></td><td></td><td class="s">    # compute triple factorial, modify $x in place</td></tr>
<tr><td class="h"><a name="3176"></a>3176</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3177"></a>3177</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3178"></a>3178</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('btfac') || $x-&gt;{sign} eq '+inf'; # inf =&gt; inf</td></tr>
<tr><td class="h"><a name="3179"></a>3179</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3180"></a>3180</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;is_nan();</td></tr>
<tr><td class="h"><a name="3181"></a>3181</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3182"></a>3182</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; btfac($x, @r) if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3183"></a>3183</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3184"></a>3184</td><td></td><td></td><td></td><td></td><td class="s">    my $k = $class -&gt; new(&quot;3&quot;);</td></tr>
<tr><td class="h"><a name="3185"></a>3185</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x &lt;= -$k;</td></tr>
<tr><td class="h"><a name="3186"></a>3186</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3187"></a>3187</td><td></td><td></td><td></td><td></td><td class="s">    my $one = $class -&gt; bone();</td></tr>
<tr><td class="h"><a name="3188"></a>3188</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bone(@r) if $x &lt;= $one;</td></tr>
<tr><td class="h"><a name="3189"></a>3189</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3190"></a>3190</td><td></td><td></td><td></td><td></td><td class="s">    my $f = $x -&gt; copy();</td></tr>
<tr><td class="h"><a name="3191"></a>3191</td><td></td><td></td><td></td><td></td><td class="s">    while ($f -&gt; bsub($k) &gt; $one) {</td></tr>
<tr><td class="h"><a name="3192"></a>3192</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; bmul($f);</td></tr>
<tr><td class="h"><a name="3193"></a>3193</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3194"></a>3194</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3195"></a>3195</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3196"></a>3196</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3197"></a>3197</td><td></td><td></td><td></td><td></td><td class="s">sub bmfac {</td></tr>
<tr><td class="h"><a name="3198"></a>3198</td><td></td><td></td><td></td><td></td><td class="s">    # compute multi-factorial</td></tr>
<tr><td class="h"><a name="3199"></a>3199</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3200"></a>3200</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $k, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="3201"></a>3201</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3202"></a>3202</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3203"></a>3203</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bmfac') || $x-&gt;{sign} eq '+inf';</td></tr>
<tr><td class="h"><a name="3204"></a>3204</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;is_nan() || $k-&gt;is_nan() || $k &lt; 1 || $x &lt;= -$k;</td></tr>
<tr><td class="h"><a name="3205"></a>3205</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3206"></a>3206</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bmfac($x, $k, @r)</td></tr>
<tr><td class="h"><a name="3207"></a>3207</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3208"></a>3208</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3209"></a>3209</td><td></td><td></td><td></td><td></td><td class="s">    my $one = $class -&gt; bone();</td></tr>
<tr><td class="h"><a name="3210"></a>3210</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bone(@r) if $x &lt;= $one;</td></tr>
<tr><td class="h"><a name="3211"></a>3211</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3212"></a>3212</td><td></td><td></td><td></td><td></td><td class="s">    my $f = $x -&gt; copy();</td></tr>
<tr><td class="h"><a name="3213"></a>3213</td><td></td><td></td><td></td><td></td><td class="s">    while ($f -&gt; bsub($k) &gt; $one) {</td></tr>
<tr><td class="h"><a name="3214"></a>3214</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; bmul($f);</td></tr>
<tr><td class="h"><a name="3215"></a>3215</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3216"></a>3216</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3217"></a>3217</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3218"></a>3218</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3219"></a>3219</td><td></td><td></td><td></td><td></td><td class="s">sub bfib {</td></tr>
<tr><td class="h"><a name="3220"></a>3220</td><td></td><td></td><td></td><td></td><td class="s">    # compute Fibonacci number(s)</td></tr>
<tr><td class="h"><a name="3221"></a>3221</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3222"></a>3222</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3223"></a>3223</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;bfib() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="3224"></a>3224</td><td></td><td></td><td></td><td></td><td class="s">        unless $LIB-&gt;can('_fib');</td></tr>
<tr><td class="h"><a name="3225"></a>3225</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3226"></a>3226</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bfib');</td></tr>
<tr><td class="h"><a name="3227"></a>3227</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3228"></a>3228</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bfib($x, @r)</td></tr>
<tr><td class="h"><a name="3229"></a>3229</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3230"></a>3230</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3231"></a>3231</td><td></td><td></td><td></td><td></td><td class="s">    # List context.</td></tr>
<tr><td class="h"><a name="3232"></a>3232</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3233"></a>3233</td><td></td><td></td><td></td><td></td><td class="s">    if (wantarray) {</td></tr>
<tr><td class="h"><a name="3234"></a>3234</td><td></td><td></td><td></td><td></td><td class="s">        return () if $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="3235"></a>3235</td><td></td><td></td><td></td><td></td><td class="s">        croak(&quot;bfib() can't return an infinitely long list of numbers&quot;)</td></tr>
<tr><td class="h"><a name="3236"></a>3236</td><td></td><td></td><td></td><td></td><td class="s">          if $x -&gt; is_inf();</td></tr>
<tr><td class="h"><a name="3237"></a>3237</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3238"></a>3238</td><td></td><td></td><td></td><td></td><td class="s">        # Use the backend library to compute the first $x Fibonacci numbers.</td></tr>
<tr><td class="h"><a name="3239"></a>3239</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3240"></a>3240</td><td></td><td></td><td></td><td></td><td class="s">        my @values = $LIB-&gt;_fib($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3241"></a>3241</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3242"></a>3242</td><td></td><td></td><td></td><td></td><td class="s">        # Make objects out of them. The last element in the array is the</td></tr>
<tr><td class="h"><a name="3243"></a>3243</td><td></td><td></td><td></td><td></td><td class="s">        # invocand.</td></tr>
<tr><td class="h"><a name="3244"></a>3244</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3245"></a>3245</td><td></td><td></td><td></td><td></td><td class="s">        for (my $i = 0 ; $i &lt; $#values ; ++ $i) {</td></tr>
<tr><td class="h"><a name="3246"></a>3246</td><td></td><td></td><td></td><td></td><td class="s">            my $fib = $class -&gt; bzero();</td></tr>
<tr><td class="h"><a name="3247"></a>3247</td><td></td><td></td><td></td><td></td><td class="s">            $fib -&gt; {value} = $values[$i];</td></tr>
<tr><td class="h"><a name="3248"></a>3248</td><td></td><td></td><td></td><td></td><td class="s">            $values[$i] = $fib;</td></tr>
<tr><td class="h"><a name="3249"></a>3249</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3250"></a>3250</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3251"></a>3251</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {value} = $values[-1];</td></tr>
<tr><td class="h"><a name="3252"></a>3252</td><td></td><td></td><td></td><td></td><td class="s">        $values[-1] = $x;</td></tr>
<tr><td class="h"><a name="3253"></a>3253</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3254"></a>3254</td><td></td><td></td><td></td><td></td><td class="s">        # If negative, insert sign as appropriate.</td></tr>
<tr><td class="h"><a name="3255"></a>3255</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3256"></a>3256</td><td></td><td></td><td></td><td></td><td class="s">        if ($x -&gt; is_neg()) {</td></tr>
<tr><td class="h"><a name="3257"></a>3257</td><td></td><td></td><td></td><td></td><td class="s">            for (my $i = 2 ; $i &lt;= $#values ; $i += 2) {</td></tr>
<tr><td class="h"><a name="3258"></a>3258</td><td></td><td></td><td></td><td></td><td class="s">                $values[$i]{sign} = '-';</td></tr>
<tr><td class="h"><a name="3259"></a>3259</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3260"></a>3260</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3261"></a>3261</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3262"></a>3262</td><td></td><td></td><td></td><td></td><td class="s">        @values = map { $_ -&gt; round(@r) } @values;</td></tr>
<tr><td class="h"><a name="3263"></a>3263</td><td></td><td></td><td></td><td></td><td class="s">        return @values;</td></tr>
<tr><td class="h"><a name="3264"></a>3264</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3265"></a>3265</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3266"></a>3266</td><td></td><td></td><td></td><td></td><td class="s">    # Scalar context.</td></tr>
<tr><td class="h"><a name="3267"></a>3267</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3268"></a>3268</td><td></td><td></td><td></td><td></td><td class="s">    else {</td></tr>
<tr><td class="h"><a name="3269"></a>3269</td><td></td><td></td><td></td><td></td><td class="s">        return $x if $x-&gt;modify('bdfac') || $x -&gt;  is_inf('+');</td></tr>
<tr><td class="h"><a name="3270"></a>3270</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;bnan() if $x -&gt; is_nan() || $x -&gt; is_inf('-');</td></tr>
<tr><td class="h"><a name="3271"></a>3271</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3272"></a>3272</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{sign}  = $x -&gt; is_neg() &amp;&amp; $x -&gt; is_even() ? '-' : '+';</td></tr>
<tr><td class="h"><a name="3273"></a>3273</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_fib($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3274"></a>3274</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3275"></a>3275</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3276"></a>3276</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3277"></a>3277</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3278"></a>3278</td><td></td><td></td><td></td><td></td><td class="s">sub blucas {</td></tr>
<tr><td class="h"><a name="3279"></a>3279</td><td></td><td></td><td></td><td></td><td class="s">    # compute Lucas number(s)</td></tr>
<tr><td class="h"><a name="3280"></a>3280</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3281"></a>3281</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3282"></a>3282</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;blucas() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="3283"></a>3283</td><td></td><td></td><td></td><td></td><td class="s">        unless $LIB-&gt;can('_lucas');</td></tr>
<tr><td class="h"><a name="3284"></a>3284</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3285"></a>3285</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('blucas');</td></tr>
<tr><td class="h"><a name="3286"></a>3286</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3287"></a>3287</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; blucas($x, @r)</td></tr>
<tr><td class="h"><a name="3288"></a>3288</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3289"></a>3289</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3290"></a>3290</td><td></td><td></td><td></td><td></td><td class="s">    # List context.</td></tr>
<tr><td class="h"><a name="3291"></a>3291</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3292"></a>3292</td><td></td><td></td><td></td><td></td><td class="s">    if (wantarray) {</td></tr>
<tr><td class="h"><a name="3293"></a>3293</td><td></td><td></td><td></td><td></td><td class="s">        return () if $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="3294"></a>3294</td><td></td><td></td><td></td><td></td><td class="s">        croak(&quot;blucas() can't return an infinitely long list of numbers&quot;)</td></tr>
<tr><td class="h"><a name="3295"></a>3295</td><td></td><td></td><td></td><td></td><td class="s">            if $x -&gt; is_inf();</td></tr>
<tr><td class="h"><a name="3296"></a>3296</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3297"></a>3297</td><td></td><td></td><td></td><td></td><td class="s">        # Use the backend library to compute the first $x Lucas numbers.</td></tr>
<tr><td class="h"><a name="3298"></a>3298</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3299"></a>3299</td><td></td><td></td><td></td><td></td><td class="s">        my @values = $LIB-&gt;_lucas($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3300"></a>3300</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3301"></a>3301</td><td></td><td></td><td></td><td></td><td class="s">        # Make objects out of them. The last element in the array is the</td></tr>
<tr><td class="h"><a name="3302"></a>3302</td><td></td><td></td><td></td><td></td><td class="s">        # invocand.</td></tr>
<tr><td class="h"><a name="3303"></a>3303</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3304"></a>3304</td><td></td><td></td><td></td><td></td><td class="s">        for (my $i = 0 ; $i &lt; $#values ; ++ $i) {</td></tr>
<tr><td class="h"><a name="3305"></a>3305</td><td></td><td></td><td></td><td></td><td class="s">            my $lucas =  $class -&gt; bzero();</td></tr>
<tr><td class="h"><a name="3306"></a>3306</td><td></td><td></td><td></td><td></td><td class="s">            $lucas -&gt; {value} = $values[$i];</td></tr>
<tr><td class="h"><a name="3307"></a>3307</td><td></td><td></td><td></td><td></td><td class="s">            $values[$i] = $lucas;</td></tr>
<tr><td class="h"><a name="3308"></a>3308</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3309"></a>3309</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3310"></a>3310</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {value} = $values[-1];</td></tr>
<tr><td class="h"><a name="3311"></a>3311</td><td></td><td></td><td></td><td></td><td class="s">        $values[-1] = $x;</td></tr>
<tr><td class="h"><a name="3312"></a>3312</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3313"></a>3313</td><td></td><td></td><td></td><td></td><td class="s">        # If negative, insert sign as appropriate.</td></tr>
<tr><td class="h"><a name="3314"></a>3314</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3315"></a>3315</td><td></td><td></td><td></td><td></td><td class="s">        if ($x -&gt; is_neg()) {</td></tr>
<tr><td class="h"><a name="3316"></a>3316</td><td></td><td></td><td></td><td></td><td class="s">            for (my $i = 2 ; $i &lt;= $#values ; $i += 2) {</td></tr>
<tr><td class="h"><a name="3317"></a>3317</td><td></td><td></td><td></td><td></td><td class="s">                $values[$i]{sign} = '-';</td></tr>
<tr><td class="h"><a name="3318"></a>3318</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3319"></a>3319</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3320"></a>3320</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3321"></a>3321</td><td></td><td></td><td></td><td></td><td class="s">        @values = map { $_ -&gt; round(@r) } @values;</td></tr>
<tr><td class="h"><a name="3322"></a>3322</td><td></td><td></td><td></td><td></td><td class="s">        return @values;</td></tr>
<tr><td class="h"><a name="3323"></a>3323</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3324"></a>3324</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3325"></a>3325</td><td></td><td></td><td></td><td></td><td class="s">    # Scalar context.</td></tr>
<tr><td class="h"><a name="3326"></a>3326</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3327"></a>3327</td><td></td><td></td><td></td><td></td><td class="s">    else {</td></tr>
<tr><td class="h"><a name="3328"></a>3328</td><td></td><td></td><td></td><td></td><td class="s">        return $x if $x -&gt;  is_inf('+');</td></tr>
<tr><td class="h"><a name="3329"></a>3329</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;bnan() if $x -&gt; is_nan() || $x -&gt; is_inf('-');</td></tr>
<tr><td class="h"><a name="3330"></a>3330</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3331"></a>3331</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{sign}  = $x -&gt; is_neg() &amp;&amp; $x -&gt; is_even() ? '-' : '+';</td></tr>
<tr><td class="h"><a name="3332"></a>3332</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_lucas($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3333"></a>3333</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3334"></a>3334</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3335"></a>3335</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3336"></a>3336</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3337"></a>3337</td><td></td><td></td><td></td><td></td><td class="s">sub blsft {</td></tr>
<tr><td class="h"><a name="3338"></a>3338</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3339"></a>3339</td><td></td><td></td><td></td><td></td><td class="s">    # compute x &lt;&lt; y, base n, y &gt;= 0</td></tr>
<tr><td class="h"><a name="3340"></a>3340</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3341"></a>3341</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, $b, @r);</td></tr>
<tr><td class="h"><a name="3342"></a>3342</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3343"></a>3343</td><td></td><td></td><td></td><td></td><td class="s">    # Objectify the base only when it is defined, since an undefined base, as</td></tr>
<tr><td class="h"><a name="3344"></a>3344</td><td></td><td></td><td></td><td></td><td class="s">    # in $x-&gt;blsft(3) or $x-&gt;blog(3, undef) means use the default base 2.</td></tr>
<tr><td class="h"><a name="3345"></a>3345</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3346"></a>3346</td><td></td><td></td><td></td><td></td><td class="s">    if (!ref($_[0]) &amp;&amp; $_[0] =~ /^[A-Za-z]|::/) {</td></tr>
<tr><td class="h"><a name="3347"></a>3347</td><td></td><td></td><td></td><td></td><td class="s">        # E.g., Math::BigInt-&gt;blog(256, 5, 2)</td></tr>
<tr><td class="h"><a name="3348"></a>3348</td><td></td><td></td><td></td><td></td><td class="s">        ($class, $x, $y, $b, @r) =</td></tr>
<tr><td class="h"><a name="3349"></a>3349</td><td></td><td></td><td></td><td></td><td class="s">          defined $_[3] ? objectify(3, @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3350"></a>3350</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="3351"></a>3351</td><td></td><td></td><td></td><td></td><td class="s">        # E.g., Math::BigInt::blog(256, 5, 2) or $x-&gt;blog(5, 2)</td></tr>
<tr><td class="h"><a name="3352"></a>3352</td><td></td><td></td><td></td><td></td><td class="s">        ($class, $x, $y, $b, @r) =</td></tr>
<tr><td class="h"><a name="3353"></a>3353</td><td></td><td></td><td></td><td></td><td class="s">          defined $_[2] ? objectify(3, @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3354"></a>3354</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3355"></a>3355</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3356"></a>3356</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('blsft');</td></tr>
<tr><td class="h"><a name="3357"></a>3357</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan() if ($x -&gt; {sign} !~ /^[+-]$/ ||</td></tr>
<tr><td class="h"><a name="3358"></a>3358</td><td></td><td></td><td></td><td></td><td class="s">                            $y -&gt; {sign} !~ /^[+-]$/);</td></tr>
<tr><td class="h"><a name="3359"></a>3359</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; round(@r) if $y -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="3360"></a>3360</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bzero(@r) if $x -&gt; is_zero(); # 0 =&gt; 0</td></tr>
<tr><td class="h"><a name="3361"></a>3361</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3362"></a>3362</td><td></td><td></td><td></td><td></td><td class="s">    $b = 2 if !defined $b;</td></tr>
<tr><td class="h"><a name="3363"></a>3363</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r) if $b &lt;= 0 || $y -&gt; {sign} eq '-';</td></tr>
<tr><td class="h"><a name="3364"></a>3364</td><td></td><td></td><td></td><td></td><td class="s">    $b = $class -&gt; new($b) unless defined(blessed($b));</td></tr>
<tr><td class="h"><a name="3365"></a>3365</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3366"></a>3366</td><td></td><td></td><td></td><td></td><td class="s">    #return $upgrade -&gt; blsft($x, $y, $b, @r)</td></tr>
<tr><td class="h"><a name="3367"></a>3367</td><td></td><td></td><td></td><td></td><td class="s">    #  if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3368"></a>3368</td><td></td><td></td><td></td><td></td><td class="s">    #                           !$y -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3369"></a>3369</td><td></td><td></td><td></td><td></td><td class="s">    #                           !$b -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="3370"></a>3370</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3371"></a>3371</td><td></td><td></td><td></td><td></td><td class="s">    # shift by a negative amount?</td></tr>
<tr><td class="h"><a name="3372"></a>3372</td><td></td><td></td><td></td><td></td><td class="s">    #return $x -&gt; brsft($y -&gt; copy() -&gt; babs(), $b) if $y -&gt; {sign} =~ /^-/;</td></tr>
<tr><td class="h"><a name="3373"></a>3373</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3374"></a>3374</td><td></td><td></td><td></td><td></td><td class="s">    # While some of the libraries support an arbitrarily large base, not all of</td></tr>
<tr><td class="h"><a name="3375"></a>3375</td><td></td><td></td><td></td><td></td><td class="s">    # them do, so rather than returning an incorrect result in those cases,</td></tr>
<tr><td class="h"><a name="3376"></a>3376</td><td></td><td></td><td></td><td></td><td class="s">    # disallow bases that don't work with all libraries.</td></tr>
<tr><td class="h"><a name="3377"></a>3377</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3378"></a>3378</td><td></td><td></td><td></td><td></td><td class="s">    my $uintmax = ~0;</td></tr>
<tr><td class="h"><a name="3379"></a>3379</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;Base is too large.&quot;) if $b &gt; $uintmax;</td></tr>
<tr><td class="h"><a name="3380"></a>3380</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3381"></a>3381</td><td></td><td></td><td></td><td></td><td class="s">    $b = $b -&gt; numify();</td></tr>
<tr><td class="h"><a name="3382"></a>3382</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3383"></a>3383</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan() if $b &lt;= 0 || $y -&gt; {sign} eq '-';</td></tr>
<tr><td class="h"><a name="3384"></a>3384</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3385"></a>3385</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {value} = $LIB -&gt; _lsft($x -&gt; {value}, $y -&gt; {value}, $b);</td></tr>
<tr><td class="h"><a name="3386"></a>3386</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="3387"></a>3387</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3388"></a>3388</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3389"></a>3389</td><td></td><td></td><td></td><td></td><td class="s">sub brsft {</td></tr>
<tr><td class="h"><a name="3390"></a>3390</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3391"></a>3391</td><td></td><td></td><td></td><td></td><td class="s">    # compute x &gt;&gt; y, base n, y &gt;= 0</td></tr>
<tr><td class="h"><a name="3392"></a>3392</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3393"></a>3393</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, $b, @r) = (ref($_[0]), @_);</td></tr>
<tr><td class="h"><a name="3394"></a>3394</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3395"></a>3395</td><td></td><td></td><td></td><td></td><td class="s">    # Objectify the base only when it is defined, since an undefined base, as</td></tr>
<tr><td class="h"><a name="3396"></a>3396</td><td></td><td></td><td></td><td></td><td class="s">    # in $x-&gt;blsft(3) or $x-&gt;blog(3, undef) means use the default base 2.</td></tr>
<tr><td class="h"><a name="3397"></a>3397</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3398"></a>3398</td><td></td><td></td><td></td><td></td><td class="s">    if (!ref($_[0]) &amp;&amp; $_[0] =~ /^[A-Za-z]|::/) {</td></tr>
<tr><td class="h"><a name="3399"></a>3399</td><td></td><td></td><td></td><td></td><td class="s">        # E.g., Math::BigInt-&gt;blog(256, 5, 2)</td></tr>
<tr><td class="h"><a name="3400"></a>3400</td><td></td><td></td><td></td><td></td><td class="s">        ($class, $x, $y, $b, @r) =</td></tr>
<tr><td class="h"><a name="3401"></a>3401</td><td></td><td></td><td></td><td></td><td class="s">          defined $_[3] ? objectify(3, @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3402"></a>3402</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="3403"></a>3403</td><td></td><td></td><td></td><td></td><td class="s">        # E.g., Math::BigInt::blog(256, 5, 2) or $x-&gt;blog(5, 2)</td></tr>
<tr><td class="h"><a name="3404"></a>3404</td><td></td><td></td><td></td><td></td><td class="s">        ($class, $x, $y, $b, @r) =</td></tr>
<tr><td class="h"><a name="3405"></a>3405</td><td></td><td></td><td></td><td></td><td class="s">          defined $_[2] ? objectify(3, @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3406"></a>3406</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3407"></a>3407</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3408"></a>3408</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x -&gt; modify('brsft');</td></tr>
<tr><td class="h"><a name="3409"></a>3409</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r)  if $x -&gt; {sign} !~ /^[+-]$/ ||</td></tr>
<tr><td class="h"><a name="3410"></a>3410</td><td></td><td></td><td></td><td></td><td class="s">                              $y -&gt; {sign} !~ /^[+-]$/;</td></tr>
<tr><td class="h"><a name="3411"></a>3411</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; round(@r) if $y -&gt; is_zero();</td></tr>
<tr><td class="h"><a name="3412"></a>3412</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bzero(@r) if $x -&gt; is_zero(); # 0 =&gt; 0</td></tr>
<tr><td class="h"><a name="3413"></a>3413</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3414"></a>3414</td><td></td><td></td><td></td><td></td><td class="s">    $b = 2 if !defined $b;</td></tr>
<tr><td class="h"><a name="3415"></a>3415</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan(@r) if $b &lt;= 0 || $y -&gt; {sign} eq '-';</td></tr>
<tr><td class="h"><a name="3416"></a>3416</td><td></td><td></td><td></td><td></td><td class="s">    $b = $class -&gt; new($b) unless defined(blessed($b));</td></tr>
<tr><td class="h"><a name="3417"></a>3417</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3418"></a>3418</td><td></td><td></td><td></td><td></td><td class="s">    # Shifting right by a positive amount might lead to a non-integer result, so</td></tr>
<tr><td class="h"><a name="3419"></a>3419</td><td></td><td></td><td></td><td></td><td class="s">    # include this case in the test.</td></tr>
<tr><td class="h"><a name="3420"></a>3420</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3421"></a>3421</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; brsft($x, $y, $b, @r)</td></tr>
<tr><td class="h"><a name="3422"></a>3422</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3423"></a>3423</td><td></td><td></td><td></td><td></td><td class="s">                               !$y -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3424"></a>3424</td><td></td><td></td><td></td><td></td><td class="s">                               !$b -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3425"></a>3425</td><td></td><td></td><td></td><td></td><td class="s">                               $y -&gt; is_pos());</td></tr>
<tr><td class="h"><a name="3426"></a>3426</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3427"></a>3427</td><td></td><td></td><td></td><td></td><td class="s">    # While some of the libraries support an arbitrarily large base, not all of</td></tr>
<tr><td class="h"><a name="3428"></a>3428</td><td></td><td></td><td></td><td></td><td class="s">    # them do, so rather than returning an incorrect result in those cases,</td></tr>
<tr><td class="h"><a name="3429"></a>3429</td><td></td><td></td><td></td><td></td><td class="s">    # disallow bases that don't work with all libraries.</td></tr>
<tr><td class="h"><a name="3430"></a>3430</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3431"></a>3431</td><td></td><td></td><td></td><td></td><td class="s">    my $uintmax = ~0;</td></tr>
<tr><td class="h"><a name="3432"></a>3432</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;Base is too large.&quot;) if $b &gt; $uintmax;</td></tr>
<tr><td class="h"><a name="3433"></a>3433</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3434"></a>3434</td><td></td><td></td><td></td><td></td><td class="s">    $b = $b -&gt; numify();</td></tr>
<tr><td class="h"><a name="3435"></a>3435</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3436"></a>3436</td><td></td><td></td><td></td><td></td><td class="s">    # this only works for negative numbers when shifting in base 2</td></tr>
<tr><td class="h"><a name="3437"></a>3437</td><td></td><td></td><td></td><td></td><td class="s">    if (($x -&gt; {sign} eq '-') &amp;&amp; ($b == 2)) {</td></tr>
<tr><td class="h"><a name="3438"></a>3438</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; round(@r) if $x -&gt; is_one('-'); # -1 =&gt; -1</td></tr>
<tr><td class="h"><a name="3439"></a>3439</td><td></td><td></td><td></td><td></td><td class="s">        if (!$y -&gt; is_one()) {</td></tr>
<tr><td class="h"><a name="3440"></a>3440</td><td></td><td></td><td></td><td></td><td class="s">            # although this is O(N*N) in calc (as_bin!) it is O(N) in Pari et</td></tr>
<tr><td class="h"><a name="3441"></a>3441</td><td></td><td></td><td></td><td></td><td class="s">            # al but perhaps there is a better emulation for two's complement</td></tr>
<tr><td class="h"><a name="3442"></a>3442</td><td></td><td></td><td></td><td></td><td class="s">            # shift...</td></tr>
<tr><td class="h"><a name="3443"></a>3443</td><td></td><td></td><td></td><td></td><td class="s">            # if $y != 1, we must simulate it by doing:</td></tr>
<tr><td class="h"><a name="3444"></a>3444</td><td></td><td></td><td></td><td></td><td class="s">            # convert to bin, flip all bits, shift, and be done</td></tr>
<tr><td class="h"><a name="3445"></a>3445</td><td></td><td></td><td></td><td></td><td class="s">            $x = $x -&gt; binc();           # -3 =&gt; -2</td></tr>
<tr><td class="h"><a name="3446"></a>3446</td><td></td><td></td><td></td><td></td><td class="s">            my $bin = $x -&gt; as_bin();</td></tr>
<tr><td class="h"><a name="3447"></a>3447</td><td></td><td></td><td></td><td></td><td class="s">            $bin =~ s/^-0b//;       # strip '-0b' prefix</td></tr>
<tr><td class="h"><a name="3448"></a>3448</td><td></td><td></td><td></td><td></td><td class="s">            $bin =~ tr/10/01/;      # flip bits</td></tr>
<tr><td class="h"><a name="3449"></a>3449</td><td></td><td></td><td></td><td></td><td class="s">            # now shift</td></tr>
<tr><td class="h"><a name="3450"></a>3450</td><td></td><td></td><td></td><td></td><td class="s">            if ($y &gt;= CORE::length($bin)) {</td></tr>
<tr><td class="h"><a name="3451"></a>3451</td><td></td><td></td><td></td><td></td><td class="s">                $bin = '0';         # shifting to far right creates -1</td></tr>
<tr><td class="h"><a name="3452"></a>3452</td><td></td><td></td><td></td><td></td><td class="s">                                    # 0, because later increment makes</td></tr>
<tr><td class="h"><a name="3453"></a>3453</td><td></td><td></td><td></td><td></td><td class="s">                                    # that 1, attached '-' makes it '-1'</td></tr>
<tr><td class="h"><a name="3454"></a>3454</td><td></td><td></td><td></td><td></td><td class="s">                                    # because -1 &gt;&gt; x == -1 !</td></tr>
<tr><td class="h"><a name="3455"></a>3455</td><td></td><td></td><td></td><td></td><td class="s">            } else {</td></tr>
<tr><td class="h"><a name="3456"></a>3456</td><td></td><td></td><td></td><td></td><td class="s">                $bin =~ s/.{$y}$//; # cut off at the right side</td></tr>
<tr><td class="h"><a name="3457"></a>3457</td><td></td><td></td><td></td><td></td><td class="s">                $bin = '1' . $bin;  # extend left side by one dummy '1'</td></tr>
<tr><td class="h"><a name="3458"></a>3458</td><td></td><td></td><td></td><td></td><td class="s">                $bin =~ tr/10/01/;  # flip bits back</td></tr>
<tr><td class="h"><a name="3459"></a>3459</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3460"></a>3460</td><td></td><td></td><td></td><td></td><td class="s">            my $res = $class -&gt; new('0b' . $bin); # add prefix and convert back</td></tr>
<tr><td class="h"><a name="3461"></a>3461</td><td></td><td></td><td></td><td></td><td class="s">            $res = $res -&gt; binc();                       # remember to increment</td></tr>
<tr><td class="h"><a name="3462"></a>3462</td><td></td><td></td><td></td><td></td><td class="s">            $x -&gt; {value} = $res -&gt; {value};      # take over value</td></tr>
<tr><td class="h"><a name="3463"></a>3463</td><td></td><td></td><td></td><td></td><td class="s">            return $x -&gt; round(@r); # we are done now, magic, isn't?</td></tr>
<tr><td class="h"><a name="3464"></a>3464</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3465"></a>3465</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3466"></a>3466</td><td></td><td></td><td></td><td></td><td class="s">        # x &lt; 0, n == 2, y == 1</td></tr>
<tr><td class="h"><a name="3467"></a>3467</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x -&gt; bdec();           # n == 2, but $y == 1: this fixes it</td></tr>
<tr><td class="h"><a name="3468"></a>3468</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3469"></a>3469</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3470"></a>3470</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {value} = $LIB -&gt; _rsft($x -&gt; {value}, $y -&gt; {value}, $b);</td></tr>
<tr><td class="h"><a name="3471"></a>3471</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="3472"></a>3472</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3473"></a>3473</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3474"></a>3474</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3475"></a>3475</td><td></td><td></td><td></td><td></td><td class="s"># Bitwise methods</td></tr>
<tr><td class="h"><a name="3476"></a>3476</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3477"></a>3477</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3478"></a>3478</td><td></td><td></td><td></td><td></td><td class="s">sub band {</td></tr>
<tr><td class="h"><a name="3479"></a>3479</td><td></td><td></td><td></td><td></td><td class="s">    #(BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3480"></a>3480</td><td></td><td></td><td></td><td></td><td class="s">    # compute x &amp; y</td></tr>
<tr><td class="h"><a name="3481"></a>3481</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3482"></a>3482</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="3483"></a>3483</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3484"></a>3484</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3485"></a>3485</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('band');</td></tr>
<tr><td class="h"><a name="3486"></a>3486</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3487"></a>3487</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; band($x, $y, @r)</td></tr>
<tr><td class="h"><a name="3488"></a>3488</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3489"></a>3489</td><td></td><td></td><td></td><td></td><td class="s">                               !$y -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="3490"></a>3490</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3491"></a>3491</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="3492"></a>3492</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3493"></a>3493</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;{sign} !~ /^[+-]$/ || $y-&gt;{sign} !~ /^[+-]$/;</td></tr>
<tr><td class="h"><a name="3494"></a>3494</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3495"></a>3495</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq '+' &amp;&amp; $y-&gt;{sign} eq '+') {</td></tr>
<tr><td class="h"><a name="3496"></a>3496</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_and($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="3497"></a>3497</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="3498"></a>3498</td><td></td><td></td><td></td><td></td><td class="s">        ($x-&gt;{value}, $x-&gt;{sign}) = $LIB-&gt;_sand($x-&gt;{value}, $x-&gt;{sign},</td></tr>
<tr><td class="h"><a name="3499"></a>3499</td><td></td><td></td><td></td><td></td><td class="s">                                                $y-&gt;{value}, $y-&gt;{sign});</td></tr>
<tr><td class="h"><a name="3500"></a>3500</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3501"></a>3501</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3502"></a>3502</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3503"></a>3503</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3504"></a>3504</td><td></td><td></td><td></td><td></td><td class="s">sub bior {</td></tr>
<tr><td class="h"><a name="3505"></a>3505</td><td></td><td></td><td></td><td></td><td class="s">    #(BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3506"></a>3506</td><td></td><td></td><td></td><td></td><td class="s">    # compute x | y</td></tr>
<tr><td class="h"><a name="3507"></a>3507</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3508"></a>3508</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="3509"></a>3509</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3510"></a>3510</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3511"></a>3511</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bior');</td></tr>
<tr><td class="h"><a name="3512"></a>3512</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3513"></a>3513</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bior($x, $y, @r)</td></tr>
<tr><td class="h"><a name="3514"></a>3514</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3515"></a>3515</td><td></td><td></td><td></td><td></td><td class="s">                               !$y -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="3516"></a>3516</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3517"></a>3517</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="3518"></a>3518</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3519"></a>3519</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan() if ($x-&gt;{sign} !~ /^[+-]$/ || $y-&gt;{sign} !~ /^[+-]$/);</td></tr>
<tr><td class="h"><a name="3520"></a>3520</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3521"></a>3521</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq '+' &amp;&amp; $y-&gt;{sign} eq '+') {</td></tr>
<tr><td class="h"><a name="3522"></a>3522</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_or($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="3523"></a>3523</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="3524"></a>3524</td><td></td><td></td><td></td><td></td><td class="s">        ($x-&gt;{value}, $x-&gt;{sign}) = $LIB-&gt;_sor($x-&gt;{value}, $x-&gt;{sign},</td></tr>
<tr><td class="h"><a name="3525"></a>3525</td><td></td><td></td><td></td><td></td><td class="s">                                               $y-&gt;{value}, $y-&gt;{sign});</td></tr>
<tr><td class="h"><a name="3526"></a>3526</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3527"></a>3527</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3528"></a>3528</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3529"></a>3529</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3530"></a>3530</td><td></td><td></td><td></td><td></td><td class="s">sub bxor {</td></tr>
<tr><td class="h"><a name="3531"></a>3531</td><td></td><td></td><td></td><td></td><td class="s">    #(BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3532"></a>3532</td><td></td><td></td><td></td><td></td><td class="s">    # compute x ^ y</td></tr>
<tr><td class="h"><a name="3533"></a>3533</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3534"></a>3534</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $y, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="3535"></a>3535</td><td></td><td></td><td></td><td></td><td class="s">                            ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="3536"></a>3536</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3537"></a>3537</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bxor');</td></tr>
<tr><td class="h"><a name="3538"></a>3538</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3539"></a>3539</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bxor($x, $y, @r)</td></tr>
<tr><td class="h"><a name="3540"></a>3540</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) ||</td></tr>
<tr><td class="h"><a name="3541"></a>3541</td><td></td><td></td><td></td><td></td><td class="s">                               !$y -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="3542"></a>3542</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3543"></a>3543</td><td></td><td></td><td></td><td></td><td class="s">    $r[3] = $y;                 # no push!</td></tr>
<tr><td class="h"><a name="3544"></a>3544</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3545"></a>3545</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bnan(@r) if $x-&gt;{sign} !~ /^[+-]$/ || $y-&gt;{sign} !~ /^[+-]$/;</td></tr>
<tr><td class="h"><a name="3546"></a>3546</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3547"></a>3547</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} eq '+' &amp;&amp; $y-&gt;{sign} eq '+') {</td></tr>
<tr><td class="h"><a name="3548"></a>3548</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_xor($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="3549"></a>3549</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="3550"></a>3550</td><td></td><td></td><td></td><td></td><td class="s">        ($x-&gt;{value}, $x-&gt;{sign}) = $LIB-&gt;_sxor($x-&gt;{value}, $x-&gt;{sign},</td></tr>
<tr><td class="h"><a name="3551"></a>3551</td><td></td><td></td><td></td><td></td><td class="s">                                               $y-&gt;{value}, $y-&gt;{sign});</td></tr>
<tr><td class="h"><a name="3552"></a>3552</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3553"></a>3553</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3554"></a>3554</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3555"></a>3555</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3556"></a>3556</td><td></td><td></td><td></td><td></td><td class="s">sub bnot {</td></tr>
<tr><td class="h"><a name="3557"></a>3557</td><td></td><td></td><td></td><td></td><td class="s">    # (num_str or BINT) return BINT</td></tr>
<tr><td class="h"><a name="3558"></a>3558</td><td></td><td></td><td></td><td></td><td class="s">    # represent ~x as twos-complement number</td></tr>
<tr><td class="h"><a name="3559"></a>3559</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3560"></a>3560</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3561"></a>3561</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;modify('bnot');</td></tr>
<tr><td class="h"><a name="3562"></a>3562</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3563"></a>3563</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bnot($x, @r)</td></tr>
<tr><td class="h"><a name="3564"></a>3564</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3565"></a>3565</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3566"></a>3566</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; binc() -&gt; bneg(@r);</td></tr>
<tr><td class="h"><a name="3567"></a>3567</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3568"></a>3568</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3569"></a>3569</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3570"></a>3570</td><td></td><td></td><td></td><td></td><td class="s"># Rounding methods</td></tr>
<tr><td class="h"><a name="3571"></a>3571</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3572"></a>3572</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3573"></a>3573</td><td></td><td></td><td></td><td></td><td class="s">sub round {</td></tr>
<tr><td class="h"><a name="3574"></a>3574</td><td></td><td></td><td></td><td></td><td class="s">    # Round $self according to given parameters, or given second argument's</td></tr>
<tr><td class="h"><a name="3575"></a>3575</td><td></td><td></td><td></td><td></td><td class="s">    # parameters or global defaults</td></tr>
<tr><td class="h"><a name="3576"></a>3576</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3577"></a>3577</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $self, @args) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3578"></a>3578</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3579"></a>3579</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;round(undef, undef) signals no rounding</td></tr>
<tr><td class="h"><a name="3580"></a>3580</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3581"></a>3581</td><td></td><td></td><td></td><td></td><td class="s">    if (@args &gt;= 2 &amp;&amp; @args &lt;= 3 &amp;&amp; !defined($args[0]) &amp;&amp; !defined($args[1])) {</td></tr>
<tr><td class="h"><a name="3582"></a>3582</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_a} = undef;</td></tr>
<tr><td class="h"><a name="3583"></a>3583</td><td></td><td></td><td></td><td></td><td class="s">        $self-&gt;{_p} = undef;</td></tr>
<tr><td class="h"><a name="3584"></a>3584</td><td></td><td></td><td></td><td></td><td class="s">        return $self;</td></tr>
<tr><td class="h"><a name="3585"></a>3585</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3586"></a>3586</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3587"></a>3587</td><td></td><td></td><td></td><td></td><td class="s">    my ($a, $p, $r) = splice @args, 0, 3;</td></tr>
<tr><td class="h"><a name="3588"></a>3588</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3589"></a>3589</td><td></td><td></td><td></td><td></td><td class="s">    # $a accuracy, if given by caller</td></tr>
<tr><td class="h"><a name="3590"></a>3590</td><td></td><td></td><td></td><td></td><td class="s">    # $p precision, if given by caller</td></tr>
<tr><td class="h"><a name="3591"></a>3591</td><td></td><td></td><td></td><td></td><td class="s">    # $r round_mode, if given by caller</td></tr>
<tr><td class="h"><a name="3592"></a>3592</td><td></td><td></td><td></td><td></td><td class="s">    # @args all 'other' arguments (0 for unary, 1 for binary ops)</td></tr>
<tr><td class="h"><a name="3593"></a>3593</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3594"></a>3594</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $a) {</td></tr>
<tr><td class="h"><a name="3595"></a>3595</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;accuracy must be a number, not '$a'&quot;</td></tr>
<tr><td class="h"><a name="3596"></a>3596</td><td></td><td></td><td></td><td></td><td class="s">          unless $a =~/^[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?\z/;</td></tr>
<tr><td class="h"><a name="3597"></a>3597</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3598"></a>3598</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3599"></a>3599</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $p) {</td></tr>
<tr><td class="h"><a name="3600"></a>3600</td><td></td><td></td><td></td><td></td><td class="s">        croak &quot;precision must be a number, not '$p'&quot;</td></tr>
<tr><td class="h"><a name="3601"></a>3601</td><td></td><td></td><td></td><td></td><td class="s">          unless $p =~/^[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?\z/;</td></tr>
<tr><td class="h"><a name="3602"></a>3602</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3603"></a>3603</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3604"></a>3604</td><td></td><td></td><td></td><td></td><td class="s">    # now pick $a or $p, but only if we have got &quot;arguments&quot;</td></tr>
<tr><td class="h"><a name="3605"></a>3605</td><td></td><td></td><td></td><td></td><td class="s">    if (!defined $a) {</td></tr>
<tr><td class="h"><a name="3606"></a>3606</td><td></td><td></td><td></td><td></td><td class="s">        foreach ($self, @args) {</td></tr>
<tr><td class="h"><a name="3607"></a>3607</td><td></td><td></td><td></td><td></td><td class="s">            # take the defined one, or if both defined, the one that is smaller</td></tr>
<tr><td class="h"><a name="3608"></a>3608</td><td></td><td></td><td></td><td></td><td class="s">            $a = $_-&gt;{_a}</td></tr>
<tr><td class="h"><a name="3609"></a>3609</td><td></td><td></td><td></td><td></td><td class="s">              if (defined $_-&gt;{_a}) &amp;&amp; (!defined $a || $_-&gt;{_a} &lt; $a);</td></tr>
<tr><td class="h"><a name="3610"></a>3610</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3611"></a>3611</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3612"></a>3612</td><td></td><td></td><td></td><td></td><td class="s">    if (!defined $p) {</td></tr>
<tr><td class="h"><a name="3613"></a>3613</td><td></td><td></td><td></td><td></td><td class="s">        # even if $a is defined, take $p, to signal error for both defined</td></tr>
<tr><td class="h"><a name="3614"></a>3614</td><td></td><td></td><td></td><td></td><td class="s">        foreach ($self, @args) {</td></tr>
<tr><td class="h"><a name="3615"></a>3615</td><td></td><td></td><td></td><td></td><td class="s">            # take the defined one, or if both defined, the one that is bigger</td></tr>
<tr><td class="h"><a name="3616"></a>3616</td><td></td><td></td><td></td><td></td><td class="s">            # -2 &gt; -3, and 3 &gt; 2</td></tr>
<tr><td class="h"><a name="3617"></a>3617</td><td></td><td></td><td></td><td></td><td class="s">            $p = $_-&gt;{_p}</td></tr>
<tr><td class="h"><a name="3618"></a>3618</td><td></td><td></td><td></td><td></td><td class="s">              if (defined $_-&gt;{_p}) &amp;&amp; (!defined $p || $_-&gt;{_p} &gt; $p);</td></tr>
<tr><td class="h"><a name="3619"></a>3619</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3620"></a>3620</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3621"></a>3621</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3622"></a>3622</td><td class="c1">2</td><td class="c0"><span title="Avg 2.95ms">5.91ms</span></td><td class="c3">2</td><td class="c0">38Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 27Âµs (16+11) within Math::BigInt::BEGIN@3622 which was called:
#    once (16Âµs+11Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#3622">line 3622</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    27Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#3622">Math::BigInt::BEGIN@3622</a>
    # spent    11Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="3623"></a>3623</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3624"></a>3624</td><td></td><td></td><td></td><td></td><td class="s">    # if still none defined, use globals</td></tr>
<tr><td class="h"><a name="3625"></a>3625</td><td></td><td></td><td></td><td></td><td class="s">    unless (defined $a || defined $p) {</td></tr>
<tr><td class="h"><a name="3626"></a>3626</td><td></td><td></td><td></td><td></td><td class="s">        $a = ${&quot;$class\::accuracy&quot;};</td></tr>
<tr><td class="h"><a name="3627"></a>3627</td><td></td><td></td><td></td><td></td><td class="s">        $p = ${&quot;$class\::precision&quot;};</td></tr>
<tr><td class="h"><a name="3628"></a>3628</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3629"></a>3629</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3630"></a>3630</td><td></td><td></td><td></td><td></td><td class="s">    # A == 0 is useless, so undef it to signal no rounding</td></tr>
<tr><td class="h"><a name="3631"></a>3631</td><td></td><td></td><td></td><td></td><td class="s">    $a = undef if defined $a &amp;&amp; $a == 0;</td></tr>
<tr><td class="h"><a name="3632"></a>3632</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3633"></a>3633</td><td></td><td></td><td></td><td></td><td class="s">    # no rounding today?</td></tr>
<tr><td class="h"><a name="3634"></a>3634</td><td></td><td></td><td></td><td></td><td class="s">    return $self unless defined $a || defined $p; # early out</td></tr>
<tr><td class="h"><a name="3635"></a>3635</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3636"></a>3636</td><td></td><td></td><td></td><td></td><td class="s">    # set A and set P is an fatal error</td></tr>
<tr><td class="h"><a name="3637"></a>3637</td><td></td><td></td><td></td><td></td><td class="s">    return $self-&gt;bnan() if defined $a &amp;&amp; defined $p;</td></tr>
<tr><td class="h"><a name="3638"></a>3638</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3639"></a>3639</td><td></td><td></td><td></td><td></td><td class="s">    $r = ${&quot;$class\::round_mode&quot;} unless defined $r;</td></tr>
<tr><td class="h"><a name="3640"></a>3640</td><td></td><td></td><td></td><td></td><td class="s">    if ($r !~ /^(even|odd|[+-]inf|zero|trunc|common)$/) {</td></tr>
<tr><td class="h"><a name="3641"></a>3641</td><td></td><td></td><td></td><td></td><td class="s">        croak(&quot;Unknown round mode '$r'&quot;);</td></tr>
<tr><td class="h"><a name="3642"></a>3642</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3643"></a>3643</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3644"></a>3644</td><td></td><td></td><td></td><td></td><td class="s">    # now round, by calling either bround or bfround:</td></tr>
<tr><td class="h"><a name="3645"></a>3645</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $a) {</td></tr>
<tr><td class="h"><a name="3646"></a>3646</td><td></td><td></td><td></td><td></td><td class="s">        $self = $self-&gt;bround(int($a), $r)</td></tr>
<tr><td class="h"><a name="3647"></a>3647</td><td></td><td></td><td></td><td></td><td class="s">          if !defined $self-&gt;{_a} || $self-&gt;{_a} &gt;= $a;</td></tr>
<tr><td class="h"><a name="3648"></a>3648</td><td></td><td></td><td></td><td></td><td class="s">    } else {                  # both can't be undefined due to early out</td></tr>
<tr><td class="h"><a name="3649"></a>3649</td><td></td><td></td><td></td><td></td><td class="s">        $self = $self-&gt;bfround(int($p), $r)</td></tr>
<tr><td class="h"><a name="3650"></a>3650</td><td></td><td></td><td></td><td></td><td class="s">          if !defined $self-&gt;{_p} || $self-&gt;{_p} &lt;= $p;</td></tr>
<tr><td class="h"><a name="3651"></a>3651</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3652"></a>3652</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3653"></a>3653</td><td></td><td></td><td></td><td></td><td class="s">    # bround() or bfround() already called bnorm() if nec.</td></tr>
<tr><td class="h"><a name="3654"></a>3654</td><td></td><td></td><td></td><td></td><td class="s">    $self;</td></tr>
<tr><td class="h"><a name="3655"></a>3655</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3656"></a>3656</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3657"></a>3657</td><td></td><td></td><td></td><td></td><td class="s">sub bround {</td></tr>
<tr><td class="h"><a name="3658"></a>3658</td><td></td><td></td><td></td><td></td><td class="s">    # accuracy: +$n preserve $n digits from left,</td></tr>
<tr><td class="h"><a name="3659"></a>3659</td><td></td><td></td><td></td><td></td><td class="s">    #           -$n preserve $n digits from right (f.i. for 0.1234 style in MBF)</td></tr>
<tr><td class="h"><a name="3660"></a>3660</td><td></td><td></td><td></td><td></td><td class="s">    # no-op for $n == 0</td></tr>
<tr><td class="h"><a name="3661"></a>3661</td><td></td><td></td><td></td><td></td><td class="s">    # and overwrite the rest with 0's, return normalized number</td></tr>
<tr><td class="h"><a name="3662"></a>3662</td><td></td><td></td><td></td><td></td><td class="s">    # do not return $x-&gt;bnorm(), but $x</td></tr>
<tr><td class="h"><a name="3663"></a>3663</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3664"></a>3664</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @a) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3665"></a>3665</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3666"></a>3666</td><td></td><td></td><td></td><td></td><td class="s">    my ($scale, $mode) = $x-&gt;_scale_a(@a);</td></tr>
<tr><td class="h"><a name="3667"></a>3667</td><td></td><td></td><td></td><td></td><td class="s">    return $x if !defined $scale || $x-&gt;modify('bround'); # no-op</td></tr>
<tr><td class="h"><a name="3668"></a>3668</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3669"></a>3669</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;is_zero() || $scale == 0) {</td></tr>
<tr><td class="h"><a name="3670"></a>3670</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{_a} = $scale if !defined $x-&gt;{_a} || $x-&gt;{_a} &gt; $scale; # 3 &gt; 2</td></tr>
<tr><td class="h"><a name="3671"></a>3671</td><td></td><td></td><td></td><td></td><td class="s">        return $x;</td></tr>
<tr><td class="h"><a name="3672"></a>3672</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3673"></a>3673</td><td></td><td></td><td></td><td></td><td class="s">    return $x if $x-&gt;{sign} !~ /^[+-]$/; # inf, NaN</td></tr>
<tr><td class="h"><a name="3674"></a>3674</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3675"></a>3675</td><td></td><td></td><td></td><td></td><td class="s">    # we have fewer digits than we want to scale to</td></tr>
<tr><td class="h"><a name="3676"></a>3676</td><td></td><td></td><td></td><td></td><td class="s">    my $len = $x-&gt;length();</td></tr>
<tr><td class="h"><a name="3677"></a>3677</td><td></td><td></td><td></td><td></td><td class="s">    # convert $scale to a scalar in case it is an object (put's a limit on the</td></tr>
<tr><td class="h"><a name="3678"></a>3678</td><td></td><td></td><td></td><td></td><td class="s">    # number length, but this would already limited by memory constraints),</td></tr>
<tr><td class="h"><a name="3679"></a>3679</td><td></td><td></td><td></td><td></td><td class="s">    # makes it faster</td></tr>
<tr><td class="h"><a name="3680"></a>3680</td><td></td><td></td><td></td><td></td><td class="s">    $scale = $scale-&gt;numify() if ref ($scale);</td></tr>
<tr><td class="h"><a name="3681"></a>3681</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3682"></a>3682</td><td></td><td></td><td></td><td></td><td class="s">    # scale &lt; 0, but &gt; -len (not &gt;=!)</td></tr>
<tr><td class="h"><a name="3683"></a>3683</td><td></td><td></td><td></td><td></td><td class="s">    if (($scale &lt; 0 &amp;&amp; $scale &lt; -$len-1) || ($scale &gt;= $len)) {</td></tr>
<tr><td class="h"><a name="3684"></a>3684</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{_a} = $scale if !defined $x-&gt;{_a} || $x-&gt;{_a} &gt; $scale; # 3 &gt; 2</td></tr>
<tr><td class="h"><a name="3685"></a>3685</td><td></td><td></td><td></td><td></td><td class="s">        return $x;</td></tr>
<tr><td class="h"><a name="3686"></a>3686</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3687"></a>3687</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3688"></a>3688</td><td></td><td></td><td></td><td></td><td class="s">    # count of 0's to pad, from left (+) or right (-): 9 - +6 =&gt; 3, or |-6| =&gt; 6</td></tr>
<tr><td class="h"><a name="3689"></a>3689</td><td></td><td></td><td></td><td></td><td class="s">    my ($pad, $digit_round, $digit_after);</td></tr>
<tr><td class="h"><a name="3690"></a>3690</td><td></td><td></td><td></td><td></td><td class="s">    $pad = $len - $scale;</td></tr>
<tr><td class="h"><a name="3691"></a>3691</td><td></td><td></td><td></td><td></td><td class="s">    $pad = abs($scale-1) if $scale &lt; 0;</td></tr>
<tr><td class="h"><a name="3692"></a>3692</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3693"></a>3693</td><td></td><td></td><td></td><td></td><td class="s">    # do not use digit(), it is very costly for binary =&gt; decimal</td></tr>
<tr><td class="h"><a name="3694"></a>3694</td><td></td><td></td><td></td><td></td><td class="s">    # getting the entire string is also costly, but we need to do it only once</td></tr>
<tr><td class="h"><a name="3695"></a>3695</td><td></td><td></td><td></td><td></td><td class="s">    my $xs = $LIB-&gt;_str($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3696"></a>3696</td><td></td><td></td><td></td><td></td><td class="s">    my $pl = -$pad-1;</td></tr>
<tr><td class="h"><a name="3697"></a>3697</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3698"></a>3698</td><td></td><td></td><td></td><td></td><td class="s">    # pad:   123: 0 =&gt; -1, at 1 =&gt; -2, at 2 =&gt; -3, at 3 =&gt; -4</td></tr>
<tr><td class="h"><a name="3699"></a>3699</td><td></td><td></td><td></td><td></td><td class="s">    # pad+1: 123: 0 =&gt; 0, at 1 =&gt; -1, at 2 =&gt; -2, at 3 =&gt; -3</td></tr>
<tr><td class="h"><a name="3700"></a>3700</td><td></td><td></td><td></td><td></td><td class="s">    $digit_round = '0';</td></tr>
<tr><td class="h"><a name="3701"></a>3701</td><td></td><td></td><td></td><td></td><td class="s">    $digit_round = substr($xs, $pl, 1) if $pad &lt;= $len;</td></tr>
<tr><td class="h"><a name="3702"></a>3702</td><td></td><td></td><td></td><td></td><td class="s">    $pl++;</td></tr>
<tr><td class="h"><a name="3703"></a>3703</td><td></td><td></td><td></td><td></td><td class="s">    $pl ++ if $pad &gt;= $len;</td></tr>
<tr><td class="h"><a name="3704"></a>3704</td><td></td><td></td><td></td><td></td><td class="s">    $digit_after = '0';</td></tr>
<tr><td class="h"><a name="3705"></a>3705</td><td></td><td></td><td></td><td></td><td class="s">    $digit_after = substr($xs, $pl, 1) if $pad &gt; 0;</td></tr>
<tr><td class="h"><a name="3706"></a>3706</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3707"></a>3707</td><td></td><td></td><td></td><td></td><td class="s">    # in case of 01234 we round down, for 6789 up, and only in case 5 we look</td></tr>
<tr><td class="h"><a name="3708"></a>3708</td><td></td><td></td><td></td><td></td><td class="s">    # closer at the remaining digits of the original $x, remember decision</td></tr>
<tr><td class="h"><a name="3709"></a>3709</td><td></td><td></td><td></td><td></td><td class="s">    my $round_up = 1;           # default round up</td></tr>
<tr><td class="h"><a name="3710"></a>3710</td><td></td><td></td><td></td><td></td><td class="s">    $round_up -- if</td></tr>
<tr><td class="h"><a name="3711"></a>3711</td><td></td><td></td><td></td><td></td><td class="s">      ($mode eq 'trunc')                      ||   # trunc by round down</td></tr>
<tr><td class="h"><a name="3712"></a>3712</td><td></td><td></td><td></td><td></td><td class="s">        ($digit_after =~ /[01234]/)           ||   # round down anyway,</td></tr>
<tr><td class="h"><a name="3713"></a>3713</td><td></td><td></td><td></td><td></td><td class="s">          # 6789 =&gt; round up</td></tr>
<tr><td class="h"><a name="3714"></a>3714</td><td></td><td></td><td></td><td></td><td class="s">          ($digit_after eq '5')               &amp;&amp;   # not 5000...0000</td></tr>
<tr><td class="h"><a name="3715"></a>3715</td><td></td><td></td><td></td><td></td><td class="s">            ($x-&gt;_scan_for_nonzero($pad, $xs, $len) == 0)   &amp;&amp;</td></tr>
<tr><td class="h"><a name="3716"></a>3716</td><td></td><td></td><td></td><td></td><td class="s">              (</td></tr>
<tr><td class="h"><a name="3717"></a>3717</td><td></td><td></td><td></td><td></td><td class="s">               ($mode eq 'even') &amp;&amp; ($digit_round =~ /[24680]/) ||</td></tr>
<tr><td class="h"><a name="3718"></a>3718</td><td></td><td></td><td></td><td></td><td class="s">               ($mode eq 'odd')  &amp;&amp; ($digit_round =~ /[13579]/) ||</td></tr>
<tr><td class="h"><a name="3719"></a>3719</td><td></td><td></td><td></td><td></td><td class="s">               ($mode eq '+inf') &amp;&amp; ($x-&gt;{sign} eq '-')         ||</td></tr>
<tr><td class="h"><a name="3720"></a>3720</td><td></td><td></td><td></td><td></td><td class="s">               ($mode eq '-inf') &amp;&amp; ($x-&gt;{sign} eq '+')         ||</td></tr>
<tr><td class="h"><a name="3721"></a>3721</td><td></td><td></td><td></td><td></td><td class="s">               ($mode eq 'zero') # round down if zero, sign adjusted below</td></tr>
<tr><td class="h"><a name="3722"></a>3722</td><td></td><td></td><td></td><td></td><td class="s">              );</td></tr>
<tr><td class="h"><a name="3723"></a>3723</td><td></td><td></td><td></td><td></td><td class="s">    my $put_back = 0;           # not yet modified</td></tr>
<tr><td class="h"><a name="3724"></a>3724</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3725"></a>3725</td><td></td><td></td><td></td><td></td><td class="s">    if (($pad &gt; 0) &amp;&amp; ($pad &lt;= $len)) {</td></tr>
<tr><td class="h"><a name="3726"></a>3726</td><td></td><td></td><td></td><td></td><td class="s">        substr($xs, -$pad, $pad) = '0' x $pad; # replace with '00...'</td></tr>
<tr><td class="h"><a name="3727"></a>3727</td><td></td><td></td><td></td><td></td><td class="s">        $xs =~ s/^0+(\d)/$1/;                  # &quot;00000&quot; -&gt; &quot;0&quot;</td></tr>
<tr><td class="h"><a name="3728"></a>3728</td><td></td><td></td><td></td><td></td><td class="s">        $put_back = 1;                         # need to put back</td></tr>
<tr><td class="h"><a name="3729"></a>3729</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($pad &gt; $len) {</td></tr>
<tr><td class="h"><a name="3730"></a>3730</td><td></td><td></td><td></td><td></td><td class="s">        $x = $x-&gt;bzero();            # round to '0'</td></tr>
<tr><td class="h"><a name="3731"></a>3731</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3732"></a>3732</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3733"></a>3733</td><td></td><td></td><td></td><td></td><td class="s">    if ($round_up) {            # what gave test above?</td></tr>
<tr><td class="h"><a name="3734"></a>3734</td><td></td><td></td><td></td><td></td><td class="s">        $put_back = 1;                               # need to put back</td></tr>
<tr><td class="h"><a name="3735"></a>3735</td><td></td><td></td><td></td><td></td><td class="s">        $pad = $len, $xs = '0' x $pad if $scale &lt; 0; # tlr: whack 0.51=&gt;1.0</td></tr>
<tr><td class="h"><a name="3736"></a>3736</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3737"></a>3737</td><td></td><td></td><td></td><td></td><td class="s">        # we modify directly the string variant instead of creating a number and</td></tr>
<tr><td class="h"><a name="3738"></a>3738</td><td></td><td></td><td></td><td></td><td class="s">        # adding it, since that is faster (we already have the string)</td></tr>
<tr><td class="h"><a name="3739"></a>3739</td><td></td><td></td><td></td><td></td><td class="s">        my $c = 0;</td></tr>
<tr><td class="h"><a name="3740"></a>3740</td><td></td><td></td><td></td><td></td><td class="s">        $pad ++;                # for $pad == $len case</td></tr>
<tr><td class="h"><a name="3741"></a>3741</td><td></td><td></td><td></td><td></td><td class="s">        while ($pad &lt;= $len) {</td></tr>
<tr><td class="h"><a name="3742"></a>3742</td><td></td><td></td><td></td><td></td><td class="s">            $c = substr($xs, -$pad, 1) + 1;</td></tr>
<tr><td class="h"><a name="3743"></a>3743</td><td></td><td></td><td></td><td></td><td class="s">            $c = '0' if $c eq '10';</td></tr>
<tr><td class="h"><a name="3744"></a>3744</td><td></td><td></td><td></td><td></td><td class="s">            substr($xs, -$pad, 1) = $c;</td></tr>
<tr><td class="h"><a name="3745"></a>3745</td><td></td><td></td><td></td><td></td><td class="s">            $pad++;</td></tr>
<tr><td class="h"><a name="3746"></a>3746</td><td></td><td></td><td></td><td></td><td class="s">            last if $c != 0;    # no overflow =&gt; early out</td></tr>
<tr><td class="h"><a name="3747"></a>3747</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3748"></a>3748</td><td></td><td></td><td></td><td></td><td class="s">        $xs = '1'.$xs if $c == 0;</td></tr>
<tr><td class="h"><a name="3749"></a>3749</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3750"></a>3750</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{value} = $LIB-&gt;_new($xs) if $put_back == 1; # put back, if needed</td></tr>
<tr><td class="h"><a name="3751"></a>3751</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3752"></a>3752</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{_a} = $scale if $scale &gt;= 0;</td></tr>
<tr><td class="h"><a name="3753"></a>3753</td><td></td><td></td><td></td><td></td><td class="s">    if ($scale &lt; 0) {</td></tr>
<tr><td class="h"><a name="3754"></a>3754</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{_a} = $len+$scale;</td></tr>
<tr><td class="h"><a name="3755"></a>3755</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{_a} = 0 if $scale &lt; -$len;</td></tr>
<tr><td class="h"><a name="3756"></a>3756</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3757"></a>3757</td><td></td><td></td><td></td><td></td><td class="s">    $x;</td></tr>
<tr><td class="h"><a name="3758"></a>3758</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3759"></a>3759</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3760"></a>3760</td><td></td><td></td><td></td><td></td><td class="s">sub bfround {</td></tr>
<tr><td class="h"><a name="3761"></a>3761</td><td></td><td></td><td></td><td></td><td class="s">    # precision: round to the $Nth digit left (+$n) or right (-$n) from the '.'</td></tr>
<tr><td class="h"><a name="3762"></a>3762</td><td></td><td></td><td></td><td></td><td class="s">    # $n == 0 || $n == 1 =&gt; round to integer</td></tr>
<tr><td class="h"><a name="3763"></a>3763</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3764"></a>3764</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @p) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3765"></a>3765</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3766"></a>3766</td><td></td><td></td><td></td><td></td><td class="s">    my ($scale, $mode) = $x-&gt;_scale_p(@p);</td></tr>
<tr><td class="h"><a name="3767"></a>3767</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3768"></a>3768</td><td></td><td></td><td></td><td></td><td class="s">    return $x if !defined $scale || $x-&gt;modify('bfround'); # no-op</td></tr>
<tr><td class="h"><a name="3769"></a>3769</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3770"></a>3770</td><td></td><td></td><td></td><td></td><td class="s">    # no-op for Math::BigInt objects if $n &lt;= 0</td></tr>
<tr><td class="h"><a name="3771"></a>3771</td><td></td><td></td><td></td><td></td><td class="s">    $x = $x-&gt;bround($x-&gt;length()-$scale, $mode) if $scale &gt; 0;</td></tr>
<tr><td class="h"><a name="3772"></a>3772</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3773"></a>3773</td><td></td><td></td><td></td><td></td><td class="s">    delete $x-&gt;{_a};            # delete to save memory</td></tr>
<tr><td class="h"><a name="3774"></a>3774</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{_p} = $scale;          # store new _p</td></tr>
<tr><td class="h"><a name="3775"></a>3775</td><td></td><td></td><td></td><td></td><td class="s">    $x;</td></tr>
<tr><td class="h"><a name="3776"></a>3776</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3777"></a>3777</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3778"></a>3778</td><td></td><td></td><td></td><td></td><td class="s">sub fround {</td></tr>
<tr><td class="h"><a name="3779"></a>3779</td><td></td><td></td><td></td><td></td><td class="s">    # Exists to make life easier for switch between MBF and MBI (should we</td></tr>
<tr><td class="h"><a name="3780"></a>3780</td><td></td><td></td><td></td><td></td><td class="s">    # autoload fxxx() like MBF does for bxxx()?)</td></tr>
<tr><td class="h"><a name="3781"></a>3781</td><td></td><td></td><td></td><td></td><td class="s">    my $x = shift;</td></tr>
<tr><td class="h"><a name="3782"></a>3782</td><td></td><td></td><td></td><td></td><td class="s">    $x = __PACKAGE__-&gt;new($x) unless ref $x;</td></tr>
<tr><td class="h"><a name="3783"></a>3783</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;bround(@_);</td></tr>
<tr><td class="h"><a name="3784"></a>3784</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3785"></a>3785</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3786"></a>3786</td><td></td><td></td><td></td><td></td><td class="s">sub bfloor {</td></tr>
<tr><td class="h"><a name="3787"></a>3787</td><td></td><td></td><td></td><td></td><td class="s">    # round towards minus infinity; no-op since it's already integer</td></tr>
<tr><td class="h"><a name="3788"></a>3788</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3789"></a>3789</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3790"></a>3790</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bfloor($x)</td></tr>
<tr><td class="h"><a name="3791"></a>3791</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3792"></a>3792</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3793"></a>3793</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3794"></a>3794</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3795"></a>3795</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3796"></a>3796</td><td></td><td></td><td></td><td></td><td class="s">sub bceil {</td></tr>
<tr><td class="h"><a name="3797"></a>3797</td><td></td><td></td><td></td><td></td><td class="s">    # round towards plus infinity; no-op since it's already int</td></tr>
<tr><td class="h"><a name="3798"></a>3798</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3799"></a>3799</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3800"></a>3800</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bceil($x)</td></tr>
<tr><td class="h"><a name="3801"></a>3801</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3802"></a>3802</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3803"></a>3803</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3804"></a>3804</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3805"></a>3805</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3806"></a>3806</td><td></td><td></td><td></td><td></td><td class="s">sub bint {</td></tr>
<tr><td class="h"><a name="3807"></a>3807</td><td></td><td></td><td></td><td></td><td class="s">    # round towards zero; no-op since it's already integer</td></tr>
<tr><td class="h"><a name="3808"></a>3808</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3809"></a>3809</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3810"></a>3810</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bint($x)</td></tr>
<tr><td class="h"><a name="3811"></a>3811</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3812"></a>3812</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3813"></a>3813</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;round(@r);</td></tr>
<tr><td class="h"><a name="3814"></a>3814</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3815"></a>3815</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3816"></a>3816</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3817"></a>3817</td><td></td><td></td><td></td><td></td><td class="s"># Other mathematical methods</td></tr>
<tr><td class="h"><a name="3818"></a>3818</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3819"></a>3819</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3820"></a>3820</td><td></td><td></td><td></td><td></td><td class="s">sub bgcd {</td></tr>
<tr><td class="h"><a name="3821"></a>3821</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3822"></a>3822</td><td></td><td></td><td></td><td></td><td class="s">    # does not modify arguments, but returns new object</td></tr>
<tr><td class="h"><a name="3823"></a>3823</td><td></td><td></td><td></td><td></td><td class="s">    # GCD -- Euclid's algorithm, variant C (Knuth Vol 3, pg 341 ff)</td></tr>
<tr><td class="h"><a name="3824"></a>3824</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3825"></a>3825</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="3826"></a>3826</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="3827"></a>3827</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="3828"></a>3828</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="3829"></a>3829</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="3830"></a>3830</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="3831"></a>3831</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="3832"></a>3832</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3833"></a>3833</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3834"></a>3834</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, @args) = objectify(0, @_);</td></tr>
<tr><td class="h"><a name="3835"></a>3835</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3836"></a>3836</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="3837"></a>3837</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3838"></a>3838</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $upgrade) {</td></tr>
<tr><td class="h"><a name="3839"></a>3839</td><td></td><td></td><td></td><td></td><td class="s">        my $do_upgrade = 0;</td></tr>
<tr><td class="h"><a name="3840"></a>3840</td><td></td><td></td><td></td><td></td><td class="s">        for my $arg (@args) {</td></tr>
<tr><td class="h"><a name="3841"></a>3841</td><td></td><td></td><td></td><td></td><td class="s">            unless ($arg -&gt; isa($class)) {</td></tr>
<tr><td class="h"><a name="3842"></a>3842</td><td></td><td></td><td></td><td></td><td class="s">                $do_upgrade = 1;</td></tr>
<tr><td class="h"><a name="3843"></a>3843</td><td></td><td></td><td></td><td></td><td class="s">                last;</td></tr>
<tr><td class="h"><a name="3844"></a>3844</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3845"></a>3845</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3846"></a>3846</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; bgcd(@args) if $do_upgrade;</td></tr>
<tr><td class="h"><a name="3847"></a>3847</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3848"></a>3848</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3849"></a>3849</td><td></td><td></td><td></td><td></td><td class="s">    my $x = shift @args;</td></tr>
<tr><td class="h"><a name="3850"></a>3850</td><td></td><td></td><td></td><td></td><td class="s">    $x = ref($x) &amp;&amp; $x -&gt; isa($class) ? $x -&gt; copy() : $class -&gt; new($x);</td></tr>
<tr><td class="h"><a name="3851"></a>3851</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3852"></a>3852</td><td></td><td></td><td></td><td></td><td class="s">    return $class-&gt;bnan() if $x-&gt;{sign} !~ /^[+-]$/;    # x NaN?</td></tr>
<tr><td class="h"><a name="3853"></a>3853</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3854"></a>3854</td><td></td><td></td><td></td><td></td><td class="s">    while (@args) {</td></tr>
<tr><td class="h"><a name="3855"></a>3855</td><td></td><td></td><td></td><td></td><td class="s">        my $y = shift @args;</td></tr>
<tr><td class="h"><a name="3856"></a>3856</td><td></td><td></td><td></td><td></td><td class="s">        $y = $class-&gt;new($y) unless ref($y) &amp;&amp; $y -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3857"></a>3857</td><td></td><td></td><td></td><td></td><td class="s">        return $class-&gt;bnan() if $y-&gt;{sign} !~ /^[+-]$/;    # y NaN?</td></tr>
<tr><td class="h"><a name="3858"></a>3858</td><td></td><td></td><td></td><td></td><td class="s">        $x-&gt;{value} = $LIB-&gt;_gcd($x-&gt;{value}, $y-&gt;{value});</td></tr>
<tr><td class="h"><a name="3859"></a>3859</td><td></td><td></td><td></td><td></td><td class="s">        last if $LIB-&gt;_is_one($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3860"></a>3860</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3861"></a>3861</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3862"></a>3862</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; babs();</td></tr>
<tr><td class="h"><a name="3863"></a>3863</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3864"></a>3864</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3865"></a>3865</td><td></td><td></td><td></td><td></td><td class="s">sub blcm {</td></tr>
<tr><td class="h"><a name="3866"></a>3866</td><td></td><td></td><td></td><td></td><td class="s">    # (BINT or num_str, BINT or num_str) return BINT</td></tr>
<tr><td class="h"><a name="3867"></a>3867</td><td></td><td></td><td></td><td></td><td class="s">    # does not modify arguments, but returns new object</td></tr>
<tr><td class="h"><a name="3868"></a>3868</td><td></td><td></td><td></td><td></td><td class="s">    # Least Common Multiple</td></tr>
<tr><td class="h"><a name="3869"></a>3869</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3870"></a>3870</td><td></td><td></td><td></td><td></td><td class="s">    # Class::method(...) -&gt; Class-&gt;method(...)</td></tr>
<tr><td class="h"><a name="3871"></a>3871</td><td></td><td></td><td></td><td></td><td class="s">    unless (@_ &amp;&amp; (defined(blessed($_[0])) &amp;&amp; $_[0] -&gt; isa(__PACKAGE__) ||</td></tr>
<tr><td class="h"><a name="3872"></a>3872</td><td></td><td></td><td></td><td></td><td class="s">                   $_[0] =~ /^[a-z]\w*(?:::[a-z]\w*)*$/i))</td></tr>
<tr><td class="h"><a name="3873"></a>3873</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="3874"></a>3874</td><td></td><td></td><td></td><td></td><td class="s">        #carp &quot;Using &quot;, (caller(0))[3], &quot;() as a function is deprecated;&quot;,</td></tr>
<tr><td class="h"><a name="3875"></a>3875</td><td></td><td></td><td></td><td></td><td class="s">        #  &quot; use is as a method instead&quot;;</td></tr>
<tr><td class="h"><a name="3876"></a>3876</td><td></td><td></td><td></td><td></td><td class="s">        unshift @_, __PACKAGE__;</td></tr>
<tr><td class="h"><a name="3877"></a>3877</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3878"></a>3878</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3879"></a>3879</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, @args) = objectify(0, @_);</td></tr>
<tr><td class="h"><a name="3880"></a>3880</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3881"></a>3881</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="3882"></a>3882</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3883"></a>3883</td><td></td><td></td><td></td><td></td><td class="s">    if (defined $upgrade) {</td></tr>
<tr><td class="h"><a name="3884"></a>3884</td><td></td><td></td><td></td><td></td><td class="s">        my $do_upgrade = 0;</td></tr>
<tr><td class="h"><a name="3885"></a>3885</td><td></td><td></td><td></td><td></td><td class="s">        for my $arg (@args) {</td></tr>
<tr><td class="h"><a name="3886"></a>3886</td><td></td><td></td><td></td><td></td><td class="s">            unless ($arg -&gt; isa($class)) {</td></tr>
<tr><td class="h"><a name="3887"></a>3887</td><td></td><td></td><td></td><td></td><td class="s">                $do_upgrade = 1;</td></tr>
<tr><td class="h"><a name="3888"></a>3888</td><td></td><td></td><td></td><td></td><td class="s">                last;</td></tr>
<tr><td class="h"><a name="3889"></a>3889</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="3890"></a>3890</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="3891"></a>3891</td><td></td><td></td><td></td><td></td><td class="s">        return $upgrade -&gt; blcm(@args) if $do_upgrade;</td></tr>
<tr><td class="h"><a name="3892"></a>3892</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3893"></a>3893</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3894"></a>3894</td><td></td><td></td><td></td><td></td><td class="s">    my $x = shift @args;</td></tr>
<tr><td class="h"><a name="3895"></a>3895</td><td></td><td></td><td></td><td></td><td class="s">    $x = ref($x) &amp;&amp; $x -&gt; isa($class) ? $x -&gt; copy() : $class -&gt; new($x);</td></tr>
<tr><td class="h"><a name="3896"></a>3896</td><td></td><td></td><td></td><td></td><td class="s">    return $class-&gt;bnan() if $x-&gt;{sign} !~ /^[+-]$/;    # x NaN?</td></tr>
<tr><td class="h"><a name="3897"></a>3897</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3898"></a>3898</td><td></td><td></td><td></td><td></td><td class="s">    while (@args) {</td></tr>
<tr><td class="h"><a name="3899"></a>3899</td><td></td><td></td><td></td><td></td><td class="s">        my $y = shift @args;</td></tr>
<tr><td class="h"><a name="3900"></a>3900</td><td></td><td></td><td></td><td></td><td class="s">        $y = $class -&gt; new($y) unless ref($y) &amp;&amp; $y -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3901"></a>3901</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;bnan() if $y-&gt;{sign} !~ /^[+-]$/;     # y not integer</td></tr>
<tr><td class="h"><a name="3902"></a>3902</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {value} = $LIB-&gt;_lcm($x -&gt; {value}, $y -&gt; {value});</td></tr>
<tr><td class="h"><a name="3903"></a>3903</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3904"></a>3904</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3905"></a>3905</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; babs();</td></tr>
<tr><td class="h"><a name="3906"></a>3906</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3907"></a>3907</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3908"></a>3908</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3909"></a>3909</td><td></td><td></td><td></td><td></td><td class="s"># Object property methods</td></tr>
<tr><td class="h"><a name="3910"></a>3910</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="3911"></a>3911</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3912"></a>3912</td><td></td><td></td><td></td><td></td><td class="s">sub sign {</td></tr>
<tr><td class="h"><a name="3913"></a>3913</td><td></td><td></td><td></td><td></td><td class="s">    # return the sign of the number: +/-/-inf/+inf/NaN</td></tr>
<tr><td class="h"><a name="3914"></a>3914</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3915"></a>3915</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3916"></a>3916</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3917"></a>3917</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3918"></a>3918</td><td></td><td></td><td></td><td></td><td class="s">    $x-&gt;{sign};</td></tr>
<tr><td class="h"><a name="3919"></a>3919</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3920"></a>3920</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3921"></a>3921</td><td></td><td></td><td></td><td></td><td class="s">sub digit {</td></tr>
<tr><td class="h"><a name="3922"></a>3922</td><td></td><td></td><td></td><td></td><td class="s">    # return the nth decimal digit, negative values count backward, 0 is right</td></tr>
<tr><td class="h"><a name="3923"></a>3923</td><td></td><td></td><td></td><td></td><td class="s">    my (undef, $x, $n, @r) = ref($_[0]) ? (undef, @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3924"></a>3924</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3925"></a>3925</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3926"></a>3926</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3927"></a>3927</td><td></td><td></td><td></td><td></td><td class="s">    $n = $n-&gt;numify() if ref($n);</td></tr>
<tr><td class="h"><a name="3928"></a>3928</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_digit($x-&gt;{value}, $n || 0);</td></tr>
<tr><td class="h"><a name="3929"></a>3929</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3930"></a>3930</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3931"></a>3931</td><td></td><td></td><td></td><td></td><td class="s">sub bdigitsum {</td></tr>
<tr><td class="h"><a name="3932"></a>3932</td><td></td><td></td><td></td><td></td><td class="s">    # like digitsum(), but assigns the result to the invocand</td></tr>
<tr><td class="h"><a name="3933"></a>3933</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3934"></a>3934</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3935"></a>3935</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3936"></a>3936</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3937"></a>3937</td><td></td><td></td><td></td><td></td><td class="s">    return $x           if $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="3938"></a>3938</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; bnan() if $x -&gt; is_inf();</td></tr>
<tr><td class="h"><a name="3939"></a>3939</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3940"></a>3940</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {value} = $LIB -&gt; _digitsum($x -&gt; {value});</td></tr>
<tr><td class="h"><a name="3941"></a>3941</td><td></td><td></td><td></td><td></td><td class="s">    $x -&gt; {sign}  = '+';</td></tr>
<tr><td class="h"><a name="3942"></a>3942</td><td></td><td></td><td></td><td></td><td class="s">    return $x;</td></tr>
<tr><td class="h"><a name="3943"></a>3943</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3944"></a>3944</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3945"></a>3945</td><td></td><td></td><td></td><td></td><td class="s">sub digitsum {</td></tr>
<tr><td class="h"><a name="3946"></a>3946</td><td></td><td></td><td></td><td></td><td class="s">    # compute sum of decimal digits and return it</td></tr>
<tr><td class="h"><a name="3947"></a>3947</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3948"></a>3948</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3949"></a>3949</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3950"></a>3950</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3951"></a>3951</td><td></td><td></td><td></td><td></td><td class="s">    return $class -&gt; bnan() if $x -&gt; is_nan();</td></tr>
<tr><td class="h"><a name="3952"></a>3952</td><td></td><td></td><td></td><td></td><td class="s">    return $class -&gt; bnan() if $x -&gt; is_inf();</td></tr>
<tr><td class="h"><a name="3953"></a>3953</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3954"></a>3954</td><td></td><td></td><td></td><td></td><td class="s">    my $y = $class -&gt; bzero();</td></tr>
<tr><td class="h"><a name="3955"></a>3955</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; {value} = $LIB -&gt; _digitsum($x -&gt; {value});</td></tr>
<tr><td class="h"><a name="3956"></a>3956</td><td></td><td></td><td></td><td></td><td class="s">    $y -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="3957"></a>3957</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3958"></a>3958</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3959"></a>3959</td><td></td><td></td><td></td><td></td><td class="s">sub length {</td></tr>
<tr><td class="h"><a name="3960"></a>3960</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3961"></a>3961</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3962"></a>3962</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3963"></a>3963</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3964"></a>3964</td><td></td><td></td><td></td><td></td><td class="s">    my $e = $LIB-&gt;_len($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="3965"></a>3965</td><td></td><td></td><td></td><td></td><td class="s">    wantarray ? ($e, 0) : $e;</td></tr>
<tr><td class="h"><a name="3966"></a>3966</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3967"></a>3967</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3968"></a>3968</td><td></td><td></td><td></td><td></td><td class="s">sub exponent {</td></tr>
<tr><td class="h"><a name="3969"></a>3969</td><td></td><td></td><td></td><td></td><td class="s">    # return a copy of the exponent (here always 0, NaN or 1 for $m == 0)</td></tr>
<tr><td class="h"><a name="3970"></a>3970</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3971"></a>3971</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3972"></a>3972</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3973"></a>3973</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3974"></a>3974</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="3975"></a>3975</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3976"></a>3976</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; exponent($x, @r)</td></tr>
<tr><td class="h"><a name="3977"></a>3977</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="3978"></a>3978</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3979"></a>3979</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} !~ /^[+-]$/) {</td></tr>
<tr><td class="h"><a name="3980"></a>3980</td><td></td><td></td><td></td><td></td><td class="s">        my $s = $x-&gt;{sign};</td></tr>
<tr><td class="h"><a name="3981"></a>3981</td><td></td><td></td><td></td><td></td><td class="s">        $s =~ s/^[+-]//; # NaN, -inf, +inf =&gt; NaN or inf</td></tr>
<tr><td class="h"><a name="3982"></a>3982</td><td></td><td></td><td></td><td></td><td class="s">        return $class-&gt;new($s, @r);</td></tr>
<tr><td class="h"><a name="3983"></a>3983</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="3984"></a>3984</td><td></td><td></td><td></td><td></td><td class="s">    return $class-&gt;bzero(@r) if $x-&gt;is_zero();</td></tr>
<tr><td class="h"><a name="3985"></a>3985</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3986"></a>3986</td><td></td><td></td><td></td><td></td><td class="s">    # 12300 =&gt; 2 trailing zeros =&gt; exponent is 2</td></tr>
<tr><td class="h"><a name="3987"></a>3987</td><td></td><td></td><td></td><td></td><td class="s">    $class-&gt;new($LIB-&gt;_zeros($x-&gt;{value}), @r);</td></tr>
<tr><td class="h"><a name="3988"></a>3988</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="3989"></a>3989</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3990"></a>3990</td><td></td><td></td><td></td><td></td><td class="s">sub mantissa {</td></tr>
<tr><td class="h"><a name="3991"></a>3991</td><td></td><td></td><td></td><td></td><td class="s">    # return the mantissa (compatible to Math::BigFloat, e.g. reduced)</td></tr>
<tr><td class="h"><a name="3992"></a>3992</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="3993"></a>3993</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3994"></a>3994</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="3995"></a>3995</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3996"></a>3996</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="3997"></a>3997</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="3998"></a>3998</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; mantissa($x, @r)</td></tr>
<tr><td class="h"><a name="3999"></a>3999</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4000"></a>4000</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4001"></a>4001</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} !~ /^[+-]$/) {</td></tr>
<tr><td class="h"><a name="4002"></a>4002</td><td></td><td></td><td></td><td></td><td class="s">        # for NaN, +inf, -inf: keep the sign</td></tr>
<tr><td class="h"><a name="4003"></a>4003</td><td></td><td></td><td></td><td></td><td class="s">        return $class-&gt;new($x-&gt;{sign}, @r);</td></tr>
<tr><td class="h"><a name="4004"></a>4004</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4005"></a>4005</td><td></td><td></td><td></td><td></td><td class="s">    my $m = $x-&gt;copy();</td></tr>
<tr><td class="h"><a name="4006"></a>4006</td><td></td><td></td><td></td><td></td><td class="s">    delete $m-&gt;{_p};</td></tr>
<tr><td class="h"><a name="4007"></a>4007</td><td></td><td></td><td></td><td></td><td class="s">    delete $m-&gt;{_a};</td></tr>
<tr><td class="h"><a name="4008"></a>4008</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4009"></a>4009</td><td></td><td></td><td></td><td></td><td class="s">    # that's a bit inefficient:</td></tr>
<tr><td class="h"><a name="4010"></a>4010</td><td></td><td></td><td></td><td></td><td class="s">    my $zeros = $LIB-&gt;_zeros($m-&gt;{value});</td></tr>
<tr><td class="h"><a name="4011"></a>4011</td><td></td><td></td><td></td><td></td><td class="s">    $m = $m-&gt;brsft($zeros, 10) if $zeros != 0;</td></tr>
<tr><td class="h"><a name="4012"></a>4012</td><td></td><td></td><td></td><td></td><td class="s">    $m -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="4013"></a>4013</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4014"></a>4014</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4015"></a>4015</td><td></td><td></td><td></td><td></td><td class="s">sub parts {</td></tr>
<tr><td class="h"><a name="4016"></a>4016</td><td></td><td></td><td></td><td></td><td class="s">    # return a copy of both the exponent and the mantissa</td></tr>
<tr><td class="h"><a name="4017"></a>4017</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4018"></a>4018</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4019"></a>4019</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4020"></a>4020</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4021"></a>4021</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4022"></a>4022</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4023"></a>4023</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; parts($x, @r)</td></tr>
<tr><td class="h"><a name="4024"></a>4024</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4025"></a>4025</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4026"></a>4026</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;mantissa(@r), $x-&gt;exponent(@r));</td></tr>
<tr><td class="h"><a name="4027"></a>4027</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4028"></a>4028</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4029"></a>4029</td><td></td><td></td><td></td><td></td><td class="s"># Parts used for scientific notation with significand/mantissa and exponent as</td></tr>
<tr><td class="h"><a name="4030"></a>4030</td><td></td><td></td><td></td><td></td><td class="s"># integers. E.g., &quot;12345.6789&quot; is returned as &quot;123456789&quot; (mantissa) and &quot;-4&quot;</td></tr>
<tr><td class="h"><a name="4031"></a>4031</td><td></td><td></td><td></td><td></td><td class="s"># (exponent).</td></tr>
<tr><td class="h"><a name="4032"></a>4032</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4033"></a>4033</td><td></td><td></td><td></td><td></td><td class="s">sub sparts {</td></tr>
<tr><td class="h"><a name="4034"></a>4034</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4035"></a>4035</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4036"></a>4036</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4037"></a>4037</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4038"></a>4038</td><td></td><td></td><td></td><td></td><td class="s">    # Not-a-number.</td></tr>
<tr><td class="h"><a name="4039"></a>4039</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4040"></a>4040</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="4041"></a>4041</td><td></td><td></td><td></td><td></td><td class="s">        my $mant = $class -&gt; bnan(@r);          # mantissa</td></tr>
<tr><td class="h"><a name="4042"></a>4042</td><td></td><td></td><td></td><td></td><td class="s">        return $mant unless wantarray;          # scalar context</td></tr>
<tr><td class="h"><a name="4043"></a>4043</td><td></td><td></td><td></td><td></td><td class="s">        my $expo = $class -&gt; bnan(@r);          # exponent</td></tr>
<tr><td class="h"><a name="4044"></a>4044</td><td></td><td></td><td></td><td></td><td class="s">        return ($mant, $expo);                  # list context</td></tr>
<tr><td class="h"><a name="4045"></a>4045</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4046"></a>4046</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4047"></a>4047</td><td></td><td></td><td></td><td></td><td class="s">    # Infinity.</td></tr>
<tr><td class="h"><a name="4048"></a>4048</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4049"></a>4049</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="4050"></a>4050</td><td></td><td></td><td></td><td></td><td class="s">        my $mant = $class -&gt; binf($x-&gt;{sign}, @r);  # mantissa</td></tr>
<tr><td class="h"><a name="4051"></a>4051</td><td></td><td></td><td></td><td></td><td class="s">        return $mant unless wantarray;              # scalar context</td></tr>
<tr><td class="h"><a name="4052"></a>4052</td><td></td><td></td><td></td><td></td><td class="s">        my $expo = $class -&gt; binf('+', @r);         # exponent</td></tr>
<tr><td class="h"><a name="4053"></a>4053</td><td></td><td></td><td></td><td></td><td class="s">        return ($mant, $expo);                      # list context</td></tr>
<tr><td class="h"><a name="4054"></a>4054</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4055"></a>4055</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4056"></a>4056</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4057"></a>4057</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4058"></a>4058</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; sparts($x, @r)</td></tr>
<tr><td class="h"><a name="4059"></a>4059</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4060"></a>4060</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4061"></a>4061</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number.</td></tr>
<tr><td class="h"><a name="4062"></a>4062</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4063"></a>4063</td><td></td><td></td><td></td><td></td><td class="s">    my $mant   = $x -&gt; copy();</td></tr>
<tr><td class="h"><a name="4064"></a>4064</td><td></td><td></td><td></td><td></td><td class="s">    my $nzeros = $LIB -&gt; _zeros($mant -&gt; {value});</td></tr>
<tr><td class="h"><a name="4065"></a>4065</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4066"></a>4066</td><td></td><td></td><td></td><td></td><td class="s">    $mant -&gt; {value}</td></tr>
<tr><td class="h"><a name="4067"></a>4067</td><td></td><td></td><td></td><td></td><td class="s">      = $LIB -&gt; _rsft($mant -&gt; {value}, $LIB -&gt; _new($nzeros), 10)</td></tr>
<tr><td class="h"><a name="4068"></a>4068</td><td></td><td></td><td></td><td></td><td class="s">        if $nzeros != 0;</td></tr>
<tr><td class="h"><a name="4069"></a>4069</td><td></td><td></td><td></td><td></td><td class="s">    return $mant unless wantarray;</td></tr>
<tr><td class="h"><a name="4070"></a>4070</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4071"></a>4071</td><td></td><td></td><td></td><td></td><td class="s">    my $expo = $class -&gt; new($nzeros, @r);</td></tr>
<tr><td class="h"><a name="4072"></a>4072</td><td></td><td></td><td></td><td></td><td class="s">    return ($mant, $expo);</td></tr>
<tr><td class="h"><a name="4073"></a>4073</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4074"></a>4074</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4075"></a>4075</td><td></td><td></td><td></td><td></td><td class="s"># Parts used for normalized notation with significand/mantissa as either 0 or a</td></tr>
<tr><td class="h"><a name="4076"></a>4076</td><td></td><td></td><td></td><td></td><td class="s"># number in the semi-open interval [1,10). E.g., &quot;12345.6789&quot; is returned as</td></tr>
<tr><td class="h"><a name="4077"></a>4077</td><td></td><td></td><td></td><td></td><td class="s"># &quot;1.23456789&quot; and &quot;4&quot;.</td></tr>
<tr><td class="h"><a name="4078"></a>4078</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4079"></a>4079</td><td></td><td></td><td></td><td></td><td class="s">sub nparts {</td></tr>
<tr><td class="h"><a name="4080"></a>4080</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4081"></a>4081</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4082"></a>4082</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4083"></a>4083</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4084"></a>4084</td><td></td><td></td><td></td><td></td><td class="s">    # Not-a-Number and Infinity.</td></tr>
<tr><td class="h"><a name="4085"></a>4085</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4086"></a>4086</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; sparts(@r) if $x -&gt; is_nan() || $x -&gt; is_inf();</td></tr>
<tr><td class="h"><a name="4087"></a>4087</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4088"></a>4088</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4089"></a>4089</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4090"></a>4090</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; nparts($x, @r)</td></tr>
<tr><td class="h"><a name="4091"></a>4091</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4092"></a>4092</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4093"></a>4093</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number.</td></tr>
<tr><td class="h"><a name="4094"></a>4094</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4095"></a>4095</td><td></td><td></td><td></td><td></td><td class="s">    my ($mant, $expo) = $x -&gt; sparts(@r);</td></tr>
<tr><td class="h"><a name="4096"></a>4096</td><td></td><td></td><td></td><td></td><td class="s">    if ($mant -&gt; bcmp(0)) {</td></tr>
<tr><td class="h"><a name="4097"></a>4097</td><td></td><td></td><td></td><td></td><td class="s">        my ($ndigtot, $ndigfrac) = $mant -&gt; length();</td></tr>
<tr><td class="h"><a name="4098"></a>4098</td><td></td><td></td><td></td><td></td><td class="s">        my $expo10adj = $ndigtot - $ndigfrac - 1;</td></tr>
<tr><td class="h"><a name="4099"></a>4099</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4100"></a>4100</td><td></td><td></td><td></td><td></td><td class="s">        if ($expo10adj &gt; 0) {          # if mantissa is not an integer</td></tr>
<tr><td class="h"><a name="4101"></a>4101</td><td></td><td></td><td></td><td></td><td class="s">            return $upgrade -&gt; nparts($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="4102"></a>4102</td><td></td><td></td><td></td><td></td><td class="s">            $mant = $mant -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="4103"></a>4103</td><td></td><td></td><td></td><td></td><td class="s">            return $mant unless wantarray;</td></tr>
<tr><td class="h"><a name="4104"></a>4104</td><td></td><td></td><td></td><td></td><td class="s">            $expo = $expo -&gt; badd($expo10adj, @r);</td></tr>
<tr><td class="h"><a name="4105"></a>4105</td><td></td><td></td><td></td><td></td><td class="s">            return ($mant, $expo);</td></tr>
<tr><td class="h"><a name="4106"></a>4106</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4107"></a>4107</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4108"></a>4108</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4109"></a>4109</td><td></td><td></td><td></td><td></td><td class="s">    return $mant unless wantarray;</td></tr>
<tr><td class="h"><a name="4110"></a>4110</td><td></td><td></td><td></td><td></td><td class="s">    return ($mant, $expo);</td></tr>
<tr><td class="h"><a name="4111"></a>4111</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4112"></a>4112</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4113"></a>4113</td><td></td><td></td><td></td><td></td><td class="s"># Parts used for engineering notation with significand/mantissa as either 0 or a</td></tr>
<tr><td class="h"><a name="4114"></a>4114</td><td></td><td></td><td></td><td></td><td class="s"># number in the semi-open interval [1,1000) and the exponent is a multiple of 3.</td></tr>
<tr><td class="h"><a name="4115"></a>4115</td><td></td><td></td><td></td><td></td><td class="s"># E.g., &quot;12345.6789&quot; is returned as &quot;12.3456789&quot; and &quot;3&quot;.</td></tr>
<tr><td class="h"><a name="4116"></a>4116</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4117"></a>4117</td><td></td><td></td><td></td><td></td><td class="s">sub eparts {</td></tr>
<tr><td class="h"><a name="4118"></a>4118</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4119"></a>4119</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4120"></a>4120</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4121"></a>4121</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4122"></a>4122</td><td></td><td></td><td></td><td></td><td class="s">    # Not-a-number and Infinity.</td></tr>
<tr><td class="h"><a name="4123"></a>4123</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4124"></a>4124</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; sparts(@r) if $x -&gt; is_nan() || $x -&gt; is_inf();</td></tr>
<tr><td class="h"><a name="4125"></a>4125</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4126"></a>4126</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4127"></a>4127</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4128"></a>4128</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; eparts($x, @r)</td></tr>
<tr><td class="h"><a name="4129"></a>4129</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4130"></a>4130</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4131"></a>4131</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number.</td></tr>
<tr><td class="h"><a name="4132"></a>4132</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4133"></a>4133</td><td></td><td></td><td></td><td></td><td class="s">    my ($mant, $expo) = $x -&gt; sparts(@r);</td></tr>
<tr><td class="h"><a name="4134"></a>4134</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4135"></a>4135</td><td></td><td></td><td></td><td></td><td class="s">    if ($mant -&gt; bcmp(0)) {</td></tr>
<tr><td class="h"><a name="4136"></a>4136</td><td></td><td></td><td></td><td></td><td class="s">        my $ndigmant  = $mant -&gt; length();</td></tr>
<tr><td class="h"><a name="4137"></a>4137</td><td></td><td></td><td></td><td></td><td class="s">        $expo = $expo -&gt; badd($ndigmant, @r);</td></tr>
<tr><td class="h"><a name="4138"></a>4138</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4139"></a>4139</td><td></td><td></td><td></td><td></td><td class="s">        # $c is the number of digits that will be in the integer part of the</td></tr>
<tr><td class="h"><a name="4140"></a>4140</td><td></td><td></td><td></td><td></td><td class="s">        # final mantissa.</td></tr>
<tr><td class="h"><a name="4141"></a>4141</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4142"></a>4142</td><td></td><td></td><td></td><td></td><td class="s">        my $c = $expo -&gt; copy() -&gt; bdec() -&gt; bmod(3) -&gt; binc();</td></tr>
<tr><td class="h"><a name="4143"></a>4143</td><td></td><td></td><td></td><td></td><td class="s">        $expo = $expo -&gt; bsub($c);</td></tr>
<tr><td class="h"><a name="4144"></a>4144</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4145"></a>4145</td><td></td><td></td><td></td><td></td><td class="s">        if ($ndigmant &gt; $c) {</td></tr>
<tr><td class="h"><a name="4146"></a>4146</td><td></td><td></td><td></td><td></td><td class="s">            return $upgrade -&gt; eparts($x, @r) if defined $upgrade;</td></tr>
<tr><td class="h"><a name="4147"></a>4147</td><td></td><td></td><td></td><td></td><td class="s">            $mant = $mant -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="4148"></a>4148</td><td></td><td></td><td></td><td></td><td class="s">            return $mant unless wantarray;</td></tr>
<tr><td class="h"><a name="4149"></a>4149</td><td></td><td></td><td></td><td></td><td class="s">            return ($mant, $expo);</td></tr>
<tr><td class="h"><a name="4150"></a>4150</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4151"></a>4151</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4152"></a>4152</td><td></td><td></td><td></td><td></td><td class="s">        $mant = $mant -&gt; blsft($c - $ndigmant, 10, @r);</td></tr>
<tr><td class="h"><a name="4153"></a>4153</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4154"></a>4154</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4155"></a>4155</td><td></td><td></td><td></td><td></td><td class="s">    return $mant unless wantarray;</td></tr>
<tr><td class="h"><a name="4156"></a>4156</td><td></td><td></td><td></td><td></td><td class="s">    return ($mant, $expo);</td></tr>
<tr><td class="h"><a name="4157"></a>4157</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4158"></a>4158</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4159"></a>4159</td><td></td><td></td><td></td><td></td><td class="s"># Parts used for decimal notation, e.g., &quot;12345.6789&quot; is returned as &quot;12345&quot;</td></tr>
<tr><td class="h"><a name="4160"></a>4160</td><td></td><td></td><td></td><td></td><td class="s"># (integer part) and &quot;0.6789&quot; (fraction part).</td></tr>
<tr><td class="h"><a name="4161"></a>4161</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4162"></a>4162</td><td></td><td></td><td></td><td></td><td class="s">sub dparts {</td></tr>
<tr><td class="h"><a name="4163"></a>4163</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4164"></a>4164</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4165"></a>4165</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4166"></a>4166</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4167"></a>4167</td><td></td><td></td><td></td><td></td><td class="s">    # Not-a-number.</td></tr>
<tr><td class="h"><a name="4168"></a>4168</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4169"></a>4169</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="4170"></a>4170</td><td></td><td></td><td></td><td></td><td class="s">        my $int = $class -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="4171"></a>4171</td><td></td><td></td><td></td><td></td><td class="s">        return $int unless wantarray;</td></tr>
<tr><td class="h"><a name="4172"></a>4172</td><td></td><td></td><td></td><td></td><td class="s">        my $frc = $class -&gt; bzero(@r);    # or NaN?</td></tr>
<tr><td class="h"><a name="4173"></a>4173</td><td></td><td></td><td></td><td></td><td class="s">        return ($int, $frc);</td></tr>
<tr><td class="h"><a name="4174"></a>4174</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4175"></a>4175</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4176"></a>4176</td><td></td><td></td><td></td><td></td><td class="s">    # Infinity.</td></tr>
<tr><td class="h"><a name="4177"></a>4177</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4178"></a>4178</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="4179"></a>4179</td><td></td><td></td><td></td><td></td><td class="s">        my $int = $class -&gt; binf($x-&gt;{sign}, @r);</td></tr>
<tr><td class="h"><a name="4180"></a>4180</td><td></td><td></td><td></td><td></td><td class="s">        return $int unless wantarray;</td></tr>
<tr><td class="h"><a name="4181"></a>4181</td><td></td><td></td><td></td><td></td><td class="s">        my $frc = $class -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="4182"></a>4182</td><td></td><td></td><td></td><td></td><td class="s">        return ($int, $frc);</td></tr>
<tr><td class="h"><a name="4183"></a>4183</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4184"></a>4184</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4185"></a>4185</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4186"></a>4186</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4187"></a>4187</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; dparts($x, @r)</td></tr>
<tr><td class="h"><a name="4188"></a>4188</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4189"></a>4189</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4190"></a>4190</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number.</td></tr>
<tr><td class="h"><a name="4191"></a>4191</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4192"></a>4192</td><td></td><td></td><td></td><td></td><td class="s">    my $int = $x -&gt; copy() -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="4193"></a>4193</td><td></td><td></td><td></td><td></td><td class="s">    return $int unless wantarray;</td></tr>
<tr><td class="h"><a name="4194"></a>4194</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4195"></a>4195</td><td></td><td></td><td></td><td></td><td class="s">    my $frc = $class -&gt; bzero(@r);</td></tr>
<tr><td class="h"><a name="4196"></a>4196</td><td></td><td></td><td></td><td></td><td class="s">    return ($int, $frc);</td></tr>
<tr><td class="h"><a name="4197"></a>4197</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4198"></a>4198</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4199"></a>4199</td><td></td><td></td><td></td><td></td><td class="s"># Fractional parts with the numerator and denominator as integers. E.g.,</td></tr>
<tr><td class="h"><a name="4200"></a>4200</td><td></td><td></td><td></td><td></td><td class="s"># &quot;123.4375&quot; is returned as &quot;1975&quot; and &quot;16&quot;.</td></tr>
<tr><td class="h"><a name="4201"></a>4201</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4202"></a>4202</td><td></td><td></td><td></td><td></td><td class="s">sub fparts {</td></tr>
<tr><td class="h"><a name="4203"></a>4203</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4204"></a>4204</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4205"></a>4205</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4206"></a>4206</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4207"></a>4207</td><td></td><td></td><td></td><td></td><td class="s">    # NaN =&gt; NaN/NaN</td></tr>
<tr><td class="h"><a name="4208"></a>4208</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4209"></a>4209</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="4210"></a>4210</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; bnan(@r) unless wantarray;</td></tr>
<tr><td class="h"><a name="4211"></a>4211</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; bnan(@r), $class -&gt; bnan(@r);</td></tr>
<tr><td class="h"><a name="4212"></a>4212</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4213"></a>4213</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4214"></a>4214</td><td></td><td></td><td></td><td></td><td class="s">    # Â±Inf =&gt; Â±Inf/1</td></tr>
<tr><td class="h"><a name="4215"></a>4215</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4216"></a>4216</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="4217"></a>4217</td><td></td><td></td><td></td><td></td><td class="s">        my $numer = $class -&gt; binf($x-&gt;{sign}, @r);</td></tr>
<tr><td class="h"><a name="4218"></a>4218</td><td></td><td></td><td></td><td></td><td class="s">        return $numer unless wantarray;</td></tr>
<tr><td class="h"><a name="4219"></a>4219</td><td></td><td></td><td></td><td></td><td class="s">        my $denom = $class -&gt; bone(@r);</td></tr>
<tr><td class="h"><a name="4220"></a>4220</td><td></td><td></td><td></td><td></td><td class="s">        return $numer, $denom;</td></tr>
<tr><td class="h"><a name="4221"></a>4221</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4222"></a>4222</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4223"></a>4223</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4224"></a>4224</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4225"></a>4225</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; fparts($x, @r)</td></tr>
<tr><td class="h"><a name="4226"></a>4226</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4227"></a>4227</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4228"></a>4228</td><td></td><td></td><td></td><td></td><td class="s">    # N =&gt; N/1</td></tr>
<tr><td class="h"><a name="4229"></a>4229</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4230"></a>4230</td><td></td><td></td><td></td><td></td><td class="s">    my $numer = $x -&gt; copy() -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="4231"></a>4231</td><td></td><td></td><td></td><td></td><td class="s">    return $numer unless wantarray;</td></tr>
<tr><td class="h"><a name="4232"></a>4232</td><td></td><td></td><td></td><td></td><td class="s">    my $denom = $class -&gt; bone(@r);</td></tr>
<tr><td class="h"><a name="4233"></a>4233</td><td></td><td></td><td></td><td></td><td class="s">    return $numer, $denom;</td></tr>
<tr><td class="h"><a name="4234"></a>4234</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4235"></a>4235</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4236"></a>4236</td><td></td><td></td><td></td><td></td><td class="s">sub numerator {</td></tr>
<tr><td class="h"><a name="4237"></a>4237</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4238"></a>4238</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4239"></a>4239</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4240"></a>4240</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4241"></a>4241</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; numerator($x, @r)</td></tr>
<tr><td class="h"><a name="4242"></a>4242</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4243"></a>4243</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4244"></a>4244</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; copy() -&gt; round(@r);</td></tr>
<tr><td class="h"><a name="4245"></a>4245</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4246"></a>4246</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4247"></a>4247</td><td></td><td></td><td></td><td></td><td class="s">sub denominator {</td></tr>
<tr><td class="h"><a name="4248"></a>4248</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4249"></a>4249</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4250"></a>4250</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4251"></a>4251</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4252"></a>4252</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; denominator($x, @r)</td></tr>
<tr><td class="h"><a name="4253"></a>4253</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4254"></a>4254</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4255"></a>4255</td><td></td><td></td><td></td><td></td><td class="s">    return $x -&gt; is_nan() ? $class -&gt; bnan(@r) : $class -&gt; bone(@r);</td></tr>
<tr><td class="h"><a name="4256"></a>4256</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4257"></a>4257</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4258"></a>4258</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="4259"></a>4259</td><td></td><td></td><td></td><td></td><td class="s"># String conversion methods</td></tr>
<tr><td class="h"><a name="4260"></a>4260</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="4261"></a>4261</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4262"></a>4262</td><td></td><td></td><td></td><td></td><td class="s">sub bstr {</td></tr>
<tr><td class="h"><a name="4263"></a>4263</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4264"></a>4264</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4265"></a>4265</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4266"></a>4266</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4267"></a>4267</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4268"></a>4268</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4269"></a>4269</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4270"></a>4270</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf'; # -inf, NaN</td></tr>
<tr><td class="h"><a name="4271"></a>4271</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                  # +inf</td></tr>
<tr><td class="h"><a name="4272"></a>4272</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4273"></a>4273</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4274"></a>4274</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4275"></a>4275</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4276"></a>4276</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bstr($x, @r)</td></tr>
<tr><td class="h"><a name="4277"></a>4277</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4278"></a>4278</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4279"></a>4279</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4280"></a>4280</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4281"></a>4281</td><td></td><td></td><td></td><td></td><td class="s">    my $str = $LIB-&gt;_str($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4282"></a>4282</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$str&quot; : $str;</td></tr>
<tr><td class="h"><a name="4283"></a>4283</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4284"></a>4284</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4285"></a>4285</td><td></td><td></td><td></td><td></td><td class="s"># Scientific notation with significand/mantissa as an integer, e.g., &quot;12345&quot; is</td></tr>
<tr><td class="h"><a name="4286"></a>4286</td><td></td><td></td><td></td><td></td><td class="s"># written as &quot;1.2345e+4&quot;.</td></tr>
<tr><td class="h"><a name="4287"></a>4287</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4288"></a>4288</td><td></td><td></td><td></td><td></td><td class="s">sub bsstr {</td></tr>
<tr><td class="h"><a name="4289"></a>4289</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4290"></a>4290</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4291"></a>4291</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4292"></a>4292</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4293"></a>4293</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4294"></a>4294</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4295"></a>4295</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4296"></a>4296</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4297"></a>4297</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4298"></a>4298</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4299"></a>4299</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4300"></a>4300</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4301"></a>4301</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4302"></a>4302</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bsstr($x, @r)</td></tr>
<tr><td class="h"><a name="4303"></a>4303</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4304"></a>4304</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4305"></a>4305</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4306"></a>4306</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4307"></a>4307</td><td></td><td></td><td></td><td></td><td class="s">    my $expo = $LIB -&gt; _zeros($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4308"></a>4308</td><td></td><td></td><td></td><td></td><td class="s">    my $mant = $LIB -&gt; _str($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4309"></a>4309</td><td></td><td></td><td></td><td></td><td class="s">    $mant = substr($mant, 0, -$expo) if $expo;  # strip trailing zeros</td></tr>
<tr><td class="h"><a name="4310"></a>4310</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4311"></a>4311</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{sign} eq '-' ? '-' : '') . $mant . 'e+' . $expo;</td></tr>
<tr><td class="h"><a name="4312"></a>4312</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4313"></a>4313</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4314"></a>4314</td><td></td><td></td><td></td><td></td><td class="s"># Normalized notation, e.g., &quot;12345&quot; is written as &quot;1.2345e+4&quot;.</td></tr>
<tr><td class="h"><a name="4315"></a>4315</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4316"></a>4316</td><td></td><td></td><td></td><td></td><td class="s">sub bnstr {</td></tr>
<tr><td class="h"><a name="4317"></a>4317</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4318"></a>4318</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4319"></a>4319</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4320"></a>4320</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4321"></a>4321</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4322"></a>4322</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4323"></a>4323</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4324"></a>4324</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4325"></a>4325</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4326"></a>4326</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4327"></a>4327</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4328"></a>4328</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4329"></a>4329</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4330"></a>4330</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bnstr($x, @r)</td></tr>
<tr><td class="h"><a name="4331"></a>4331</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4332"></a>4332</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4333"></a>4333</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4334"></a>4334</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4335"></a>4335</td><td></td><td></td><td></td><td></td><td class="s">    my $expo = $LIB -&gt; _zeros($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4336"></a>4336</td><td></td><td></td><td></td><td></td><td class="s">    my $mant = $LIB -&gt; _str($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4337"></a>4337</td><td></td><td></td><td></td><td></td><td class="s">    $mant = substr($mant, 0, -$expo) if $expo;  # strip trailing zeros</td></tr>
<tr><td class="h"><a name="4338"></a>4338</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4339"></a>4339</td><td></td><td></td><td></td><td></td><td class="s">    my $mantlen = CORE::length($mant);</td></tr>
<tr><td class="h"><a name="4340"></a>4340</td><td></td><td></td><td></td><td></td><td class="s">    if ($mantlen &gt; 1) {</td></tr>
<tr><td class="h"><a name="4341"></a>4341</td><td></td><td></td><td></td><td></td><td class="s">        $expo += $mantlen - 1;                  # adjust exponent</td></tr>
<tr><td class="h"><a name="4342"></a>4342</td><td></td><td></td><td></td><td></td><td class="s">        substr $mant, 1, 0, &quot;.&quot;;                # insert decimal point</td></tr>
<tr><td class="h"><a name="4343"></a>4343</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4344"></a>4344</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4345"></a>4345</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{sign} eq '-' ? '-' : '') . $mant . 'e+' . $expo;</td></tr>
<tr><td class="h"><a name="4346"></a>4346</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4347"></a>4347</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4348"></a>4348</td><td></td><td></td><td></td><td></td><td class="s"># Engineering notation, e.g., &quot;12345&quot; is written as &quot;12.345e+3&quot;.</td></tr>
<tr><td class="h"><a name="4349"></a>4349</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4350"></a>4350</td><td></td><td></td><td></td><td></td><td class="s">sub bestr {</td></tr>
<tr><td class="h"><a name="4351"></a>4351</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4352"></a>4352</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4353"></a>4353</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4354"></a>4354</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4355"></a>4355</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4356"></a>4356</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4357"></a>4357</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4358"></a>4358</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4359"></a>4359</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4360"></a>4360</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4361"></a>4361</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4362"></a>4362</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4363"></a>4363</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4364"></a>4364</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bestr($x, @r)</td></tr>
<tr><td class="h"><a name="4365"></a>4365</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4366"></a>4366</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4367"></a>4367</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4368"></a>4368</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4369"></a>4369</td><td></td><td></td><td></td><td></td><td class="s">    my $expo = $LIB -&gt; _zeros($x-&gt;{value});     # number of trailing zeros</td></tr>
<tr><td class="h"><a name="4370"></a>4370</td><td></td><td></td><td></td><td></td><td class="s">    my $mant = $LIB -&gt; _str($x-&gt;{value});       # mantissa as a string</td></tr>
<tr><td class="h"><a name="4371"></a>4371</td><td></td><td></td><td></td><td></td><td class="s">    $mant = substr($mant, 0, -$expo) if $expo;  # strip trailing zeros</td></tr>
<tr><td class="h"><a name="4372"></a>4372</td><td></td><td></td><td></td><td></td><td class="s">    my $mantlen = CORE::length($mant);          # length of mantissa</td></tr>
<tr><td class="h"><a name="4373"></a>4373</td><td></td><td></td><td></td><td></td><td class="s">    $expo += $mantlen;</td></tr>
<tr><td class="h"><a name="4374"></a>4374</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4375"></a>4375</td><td></td><td></td><td></td><td></td><td class="s">    my $dotpos = ($expo - 1) % 3 + 1;           # offset of decimal point</td></tr>
<tr><td class="h"><a name="4376"></a>4376</td><td></td><td></td><td></td><td></td><td class="s">    $expo -= $dotpos;</td></tr>
<tr><td class="h"><a name="4377"></a>4377</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4378"></a>4378</td><td></td><td></td><td></td><td></td><td class="s">    if ($dotpos &lt; $mantlen) {</td></tr>
<tr><td class="h"><a name="4379"></a>4379</td><td></td><td></td><td></td><td></td><td class="s">        substr $mant, $dotpos, 0, &quot;.&quot;;          # insert decimal point</td></tr>
<tr><td class="h"><a name="4380"></a>4380</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($dotpos &gt; $mantlen) {</td></tr>
<tr><td class="h"><a name="4381"></a>4381</td><td></td><td></td><td></td><td></td><td class="s">        $mant .= &quot;0&quot; x ($dotpos - $mantlen);    # append zeros</td></tr>
<tr><td class="h"><a name="4382"></a>4382</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4383"></a>4383</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4384"></a>4384</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{sign} eq '-' ? '-' : '') . $mant . 'e+' . $expo;</td></tr>
<tr><td class="h"><a name="4385"></a>4385</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4386"></a>4386</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4387"></a>4387</td><td></td><td></td><td></td><td></td><td class="s"># Decimal notation, e.g., &quot;12345&quot; (no exponent).</td></tr>
<tr><td class="h"><a name="4388"></a>4388</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4389"></a>4389</td><td></td><td></td><td></td><td></td><td class="s">sub bdstr {</td></tr>
<tr><td class="h"><a name="4390"></a>4390</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4391"></a>4391</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4392"></a>4392</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4393"></a>4393</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4394"></a>4394</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4395"></a>4395</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4396"></a>4396</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4397"></a>4397</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4398"></a>4398</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4399"></a>4399</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4400"></a>4400</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4401"></a>4401</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4402"></a>4402</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4403"></a>4403</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bdstr($x, @r)</td></tr>
<tr><td class="h"><a name="4404"></a>4404</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4405"></a>4405</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4406"></a>4406</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4407"></a>4407</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4408"></a>4408</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{sign} eq '-' ? '-' : '') . $LIB-&gt;_str($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4409"></a>4409</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4410"></a>4410</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4411"></a>4411</td><td></td><td></td><td></td><td></td><td class="s"># Fraction notation, e.g., &quot;123.4375&quot; is written as &quot;1975/16&quot;, but &quot;123&quot; is</td></tr>
<tr><td class="h"><a name="4412"></a>4412</td><td></td><td></td><td></td><td></td><td class="s"># written as &quot;123&quot;, not &quot;123/1&quot;.</td></tr>
<tr><td class="h"><a name="4413"></a>4413</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4414"></a>4414</td><td></td><td></td><td></td><td></td><td class="s">sub bfstr {</td></tr>
<tr><td class="h"><a name="4415"></a>4415</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4416"></a>4416</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4417"></a>4417</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4418"></a>4418</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4419"></a>4419</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4420"></a>4420</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4421"></a>4421</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4422"></a>4422</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4423"></a>4423</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4424"></a>4424</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4425"></a>4425</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4426"></a>4426</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4427"></a>4427</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4428"></a>4428</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; bfstr($x, @r)</td></tr>
<tr><td class="h"><a name="4429"></a>4429</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4430"></a>4430</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4431"></a>4431</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4432"></a>4432</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4433"></a>4433</td><td></td><td></td><td></td><td></td><td class="s">    ($x-&gt;{sign} eq '-' ? '-' : '') . $LIB-&gt;_str($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4434"></a>4434</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4435"></a>4435</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4436"></a>4436</td><td></td><td></td><td></td><td></td><td class="s">sub to_hex {</td></tr>
<tr><td class="h"><a name="4437"></a>4437</td><td></td><td></td><td></td><td></td><td class="s">    # return as hex string with no prefix</td></tr>
<tr><td class="h"><a name="4438"></a>4438</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4439"></a>4439</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4440"></a>4440</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4441"></a>4441</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4442"></a>4442</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4443"></a>4443</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4444"></a>4444</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4445"></a>4445</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4446"></a>4446</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4447"></a>4447</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4448"></a>4448</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4449"></a>4449</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4450"></a>4450</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4451"></a>4451</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4452"></a>4452</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; to_hex($x, @r)</td></tr>
<tr><td class="h"><a name="4453"></a>4453</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4454"></a>4454</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4455"></a>4455</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4456"></a>4456</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4457"></a>4457</td><td></td><td></td><td></td><td></td><td class="s">    my $hex = $LIB-&gt;_to_hex($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4458"></a>4458</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$hex&quot; : $hex;</td></tr>
<tr><td class="h"><a name="4459"></a>4459</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4460"></a>4460</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4461"></a>4461</td><td></td><td></td><td></td><td></td><td class="s">sub to_oct {</td></tr>
<tr><td class="h"><a name="4462"></a>4462</td><td></td><td></td><td></td><td></td><td class="s">    # return as octal string with no prefix</td></tr>
<tr><td class="h"><a name="4463"></a>4463</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4464"></a>4464</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4465"></a>4465</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4466"></a>4466</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4467"></a>4467</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4468"></a>4468</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4469"></a>4469</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4470"></a>4470</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4471"></a>4471</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4472"></a>4472</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4473"></a>4473</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4474"></a>4474</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4475"></a>4475</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4476"></a>4476</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4477"></a>4477</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; to_oct($x, @r)</td></tr>
<tr><td class="h"><a name="4478"></a>4478</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4479"></a>4479</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4480"></a>4480</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4481"></a>4481</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4482"></a>4482</td><td></td><td></td><td></td><td></td><td class="s">    my $oct = $LIB-&gt;_to_oct($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4483"></a>4483</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$oct&quot; : $oct;</td></tr>
<tr><td class="h"><a name="4484"></a>4484</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4485"></a>4485</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4486"></a>4486</td><td></td><td></td><td></td><td></td><td class="s">sub to_bin {</td></tr>
<tr><td class="h"><a name="4487"></a>4487</td><td></td><td></td><td></td><td></td><td class="s">    # return as binary string with no prefix</td></tr>
<tr><td class="h"><a name="4488"></a>4488</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4489"></a>4489</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4490"></a>4490</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4491"></a>4491</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4492"></a>4492</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4493"></a>4493</td><td></td><td></td><td></td><td></td><td class="s">    # Inf and NaN</td></tr>
<tr><td class="h"><a name="4494"></a>4494</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4495"></a>4495</td><td></td><td></td><td></td><td></td><td class="s">    if ($x-&gt;{sign} ne '+' &amp;&amp; $x-&gt;{sign} ne '-') {</td></tr>
<tr><td class="h"><a name="4496"></a>4496</td><td></td><td></td><td></td><td></td><td class="s">        return $x-&gt;{sign} unless $x-&gt;{sign} eq '+inf';  # -inf, NaN</td></tr>
<tr><td class="h"><a name="4497"></a>4497</td><td></td><td></td><td></td><td></td><td class="s">        return 'inf';                                   # +inf</td></tr>
<tr><td class="h"><a name="4498"></a>4498</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4499"></a>4499</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4500"></a>4500</td><td></td><td></td><td></td><td></td><td class="s">    # Upgrade?</td></tr>
<tr><td class="h"><a name="4501"></a>4501</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4502"></a>4502</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; to_bin($x, @r)</td></tr>
<tr><td class="h"><a name="4503"></a>4503</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4504"></a>4504</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4505"></a>4505</td><td></td><td></td><td></td><td></td><td class="s">    # Finite number</td></tr>
<tr><td class="h"><a name="4506"></a>4506</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4507"></a>4507</td><td></td><td></td><td></td><td></td><td class="s">    my $bin = $LIB-&gt;_to_bin($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4508"></a>4508</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$bin&quot; : $bin;</td></tr>
<tr><td class="h"><a name="4509"></a>4509</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4510"></a>4510</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4511"></a>4511</td><td></td><td></td><td></td><td></td><td class="s">sub to_bytes {</td></tr>
<tr><td class="h"><a name="4512"></a>4512</td><td></td><td></td><td></td><td></td><td class="s">    # return a byte string</td></tr>
<tr><td class="h"><a name="4513"></a>4513</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4514"></a>4514</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4515"></a>4515</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4516"></a>4516</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4517"></a>4517</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4518"></a>4518</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;to_bytes() requires a finite, non-negative integer&quot;)</td></tr>
<tr><td class="h"><a name="4519"></a>4519</td><td></td><td></td><td></td><td></td><td class="s">        if $x -&gt; is_neg() || ! $x -&gt; is_int();</td></tr>
<tr><td class="h"><a name="4520"></a>4520</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4521"></a>4521</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; to_bytes($x, @r)</td></tr>
<tr><td class="h"><a name="4522"></a>4522</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4523"></a>4523</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4524"></a>4524</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;to_bytes() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="4525"></a>4525</td><td></td><td></td><td></td><td></td><td class="s">        unless $LIB-&gt;can('_to_bytes');</td></tr>
<tr><td class="h"><a name="4526"></a>4526</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4527"></a>4527</td><td></td><td></td><td></td><td></td><td class="s">    return $LIB-&gt;_to_bytes($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4528"></a>4528</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4529"></a>4529</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4530"></a>4530</td><td></td><td></td><td></td><td></td><td class="s">sub to_base {</td></tr>
<tr><td class="h"><a name="4531"></a>4531</td><td></td><td></td><td></td><td></td><td class="s">    # return a base anything string</td></tr>
<tr><td class="h"><a name="4532"></a>4532</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4533"></a>4533</td><td></td><td></td><td></td><td></td><td class="s">    # $cs is the collation sequence</td></tr>
<tr><td class="h"><a name="4534"></a>4534</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $base, $cs, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="4535"></a>4535</td><td></td><td></td><td></td><td></td><td class="s">                                    ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="4536"></a>4536</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4537"></a>4537</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4538"></a>4538</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4539"></a>4539</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;the value to convert must be a finite, non-negative integer&quot;)</td></tr>
<tr><td class="h"><a name="4540"></a>4540</td><td></td><td></td><td></td><td></td><td class="s">      if $x -&gt; is_neg() || !$x -&gt; is_int();</td></tr>
<tr><td class="h"><a name="4541"></a>4541</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4542"></a>4542</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;the base must be a finite integer &gt;= 2&quot;)</td></tr>
<tr><td class="h"><a name="4543"></a>4543</td><td></td><td></td><td></td><td></td><td class="s">      if $base &lt; 2 || ! $base -&gt; is_int();</td></tr>
<tr><td class="h"><a name="4544"></a>4544</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4545"></a>4545</td><td></td><td></td><td></td><td></td><td class="s">    # If no collating sequence is given, pass some of the conversions to</td></tr>
<tr><td class="h"><a name="4546"></a>4546</td><td></td><td></td><td></td><td></td><td class="s">    # methods optimized for those cases.</td></tr>
<tr><td class="h"><a name="4547"></a>4547</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4548"></a>4548</td><td></td><td></td><td></td><td></td><td class="s">    unless (defined $cs) {</td></tr>
<tr><td class="h"><a name="4549"></a>4549</td><td></td><td></td><td></td><td></td><td class="s">        return    $x -&gt; to_bin() if $base == 2;</td></tr>
<tr><td class="h"><a name="4550"></a>4550</td><td></td><td></td><td></td><td></td><td class="s">        return    $x -&gt; to_oct() if $base == 8;</td></tr>
<tr><td class="h"><a name="4551"></a>4551</td><td></td><td></td><td></td><td></td><td class="s">        return uc $x -&gt; to_hex() if $base == 16;</td></tr>
<tr><td class="h"><a name="4552"></a>4552</td><td></td><td></td><td></td><td></td><td class="s">        return    $x -&gt; bstr()   if $base == 10;</td></tr>
<tr><td class="h"><a name="4553"></a>4553</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4554"></a>4554</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4555"></a>4555</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;to_base() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="4556"></a>4556</td><td></td><td></td><td></td><td></td><td class="s">      unless $LIB-&gt;can('_to_base');</td></tr>
<tr><td class="h"><a name="4557"></a>4557</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4558"></a>4558</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; to_base($x, $base, $cs, @r)</td></tr>
<tr><td class="h"><a name="4559"></a>4559</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) || !$base -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="4560"></a>4560</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4561"></a>4561</td><td></td><td></td><td></td><td></td><td class="s">    return $LIB-&gt;_to_base($x-&gt;{value}, $base -&gt; {value},</td></tr>
<tr><td class="h"><a name="4562"></a>4562</td><td></td><td></td><td></td><td></td><td class="s">                          defined($cs) ? $cs : ());</td></tr>
<tr><td class="h"><a name="4563"></a>4563</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4564"></a>4564</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4565"></a>4565</td><td></td><td></td><td></td><td></td><td class="s">sub to_base_num {</td></tr>
<tr><td class="h"><a name="4566"></a>4566</td><td></td><td></td><td></td><td></td><td class="s">    # return a base anything array ref, e.g.,</td></tr>
<tr><td class="h"><a name="4567"></a>4567</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigInt -&gt; new(255) -&gt; to_base_num(10) returns [2, 5, 5];</td></tr>
<tr><td class="h"><a name="4568"></a>4568</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4569"></a>4569</td><td></td><td></td><td></td><td></td><td class="s">    # $cs is the collation sequence</td></tr>
<tr><td class="h"><a name="4570"></a>4570</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, $base, @r) = ref($_[0]) &amp;&amp; ref($_[0]) eq ref($_[1])</td></tr>
<tr><td class="h"><a name="4571"></a>4571</td><td></td><td></td><td></td><td></td><td class="s">                               ? (ref($_[0]), @_) : objectify(2, @_);</td></tr>
<tr><td class="h"><a name="4572"></a>4572</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4573"></a>4573</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4574"></a>4574</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4575"></a>4575</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;the value to convert must be a finite non-negative integer&quot;)</td></tr>
<tr><td class="h"><a name="4576"></a>4576</td><td></td><td></td><td></td><td></td><td class="s">      if $x -&gt; is_neg() || !$x -&gt; is_int();</td></tr>
<tr><td class="h"><a name="4577"></a>4577</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4578"></a>4578</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;the base must be a finite integer &gt;= 2&quot;)</td></tr>
<tr><td class="h"><a name="4579"></a>4579</td><td></td><td></td><td></td><td></td><td class="s">      if $base &lt; 2 || ! $base -&gt; is_int();</td></tr>
<tr><td class="h"><a name="4580"></a>4580</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4581"></a>4581</td><td></td><td></td><td></td><td></td><td class="s">    croak(&quot;to_base() requires a newer version of the $LIB library.&quot;)</td></tr>
<tr><td class="h"><a name="4582"></a>4582</td><td></td><td></td><td></td><td></td><td class="s">      unless $LIB-&gt;can('_to_base');</td></tr>
<tr><td class="h"><a name="4583"></a>4583</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4584"></a>4584</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; to_base_num($x, $base, @r)</td></tr>
<tr><td class="h"><a name="4585"></a>4585</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; (!$x -&gt; isa($class) || !$base -&gt; isa($class));</td></tr>
<tr><td class="h"><a name="4586"></a>4586</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4587"></a>4587</td><td></td><td></td><td></td><td></td><td class="s">    # Get a reference to an array of library thingies, and replace each element</td></tr>
<tr><td class="h"><a name="4588"></a>4588</td><td></td><td></td><td></td><td></td><td class="s">    # with a Math::BigInt object using that thingy.</td></tr>
<tr><td class="h"><a name="4589"></a>4589</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4590"></a>4590</td><td></td><td></td><td></td><td></td><td class="s">    my $vals = $LIB -&gt; _to_base_num($x-&gt;{value}, $base -&gt; {value});</td></tr>
<tr><td class="h"><a name="4591"></a>4591</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4592"></a>4592</td><td></td><td></td><td></td><td></td><td class="s">    for my $i (0 .. $#$vals) {</td></tr>
<tr><td class="h"><a name="4593"></a>4593</td><td></td><td></td><td></td><td></td><td class="s">        my $x = $class -&gt; bzero();</td></tr>
<tr><td class="h"><a name="4594"></a>4594</td><td></td><td></td><td></td><td></td><td class="s">        $x -&gt; {value} = $vals -&gt; [$i];</td></tr>
<tr><td class="h"><a name="4595"></a>4595</td><td></td><td></td><td></td><td></td><td class="s">        $vals -&gt; [$i] = $x;</td></tr>
<tr><td class="h"><a name="4596"></a>4596</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4597"></a>4597</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4598"></a>4598</td><td></td><td></td><td></td><td></td><td class="s">    return $vals;</td></tr>
<tr><td class="h"><a name="4599"></a>4599</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4600"></a>4600</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4601"></a>4601</td><td></td><td></td><td></td><td></td><td class="s">sub as_hex {</td></tr>
<tr><td class="h"><a name="4602"></a>4602</td><td></td><td></td><td></td><td></td><td class="s">    # return as hex string, with prefixed 0x</td></tr>
<tr><td class="h"><a name="4603"></a>4603</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4604"></a>4604</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4605"></a>4605</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4606"></a>4606</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4607"></a>4607</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4608"></a>4608</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bstr() if $x-&gt;{sign} !~ /^[+-]$/; # inf, nan etc</td></tr>
<tr><td class="h"><a name="4609"></a>4609</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4610"></a>4610</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; as_hex($x, @r)</td></tr>
<tr><td class="h"><a name="4611"></a>4611</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4612"></a>4612</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4613"></a>4613</td><td></td><td></td><td></td><td></td><td class="s">    my $hex = $LIB-&gt;_as_hex($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4614"></a>4614</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$hex&quot; : $hex;</td></tr>
<tr><td class="h"><a name="4615"></a>4615</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4616"></a>4616</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4617"></a>4617</td><td></td><td></td><td></td><td></td><td class="s">sub as_oct {</td></tr>
<tr><td class="h"><a name="4618"></a>4618</td><td></td><td></td><td></td><td></td><td class="s">    # return as octal string, with prefixed 0</td></tr>
<tr><td class="h"><a name="4619"></a>4619</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4620"></a>4620</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4621"></a>4621</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4622"></a>4622</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4623"></a>4623</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4624"></a>4624</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bstr() if $x-&gt;{sign} !~ /^[+-]$/; # inf, nan etc</td></tr>
<tr><td class="h"><a name="4625"></a>4625</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4626"></a>4626</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; as_oct($x, @r)</td></tr>
<tr><td class="h"><a name="4627"></a>4627</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4628"></a>4628</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4629"></a>4629</td><td></td><td></td><td></td><td></td><td class="s">    my $oct = $LIB-&gt;_as_oct($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4630"></a>4630</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$oct&quot; : $oct;</td></tr>
<tr><td class="h"><a name="4631"></a>4631</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4632"></a>4632</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4633"></a>4633</td><td></td><td></td><td></td><td></td><td class="s">sub as_bin {</td></tr>
<tr><td class="h"><a name="4634"></a>4634</td><td></td><td></td><td></td><td></td><td class="s">    # return as binary string, with prefixed 0b</td></tr>
<tr><td class="h"><a name="4635"></a>4635</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4636"></a>4636</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4637"></a>4637</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4638"></a>4638</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4639"></a>4639</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4640"></a>4640</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;bstr() if $x-&gt;{sign} !~ /^[+-]$/; # inf, nan etc</td></tr>
<tr><td class="h"><a name="4641"></a>4641</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4642"></a>4642</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; as_bin($x, @r)</td></tr>
<tr><td class="h"><a name="4643"></a>4643</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4644"></a>4644</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4645"></a>4645</td><td></td><td></td><td></td><td></td><td class="s">    my $bin = $LIB-&gt;_as_bin($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4646"></a>4646</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? &quot;-$bin&quot; : $bin;</td></tr>
<tr><td class="h"><a name="4647"></a>4647</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4648"></a>4648</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4649"></a>4649</td><td class="c3">1</td><td class="c3"><span title="Avg 2Âµs">2Âµs</span></td><td></td><td></td><td class="s">*as_bytes = \&amp;to_bytes;</td></tr>
<tr><td class="h"><a name="4650"></a>4650</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4651"></a>4651</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="4652"></a>4652</td><td></td><td></td><td></td><td></td><td class="s"># Other conversion methods</td></tr>
<tr><td class="h"><a name="4653"></a>4653</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="4654"></a>4654</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4655"></a>4655</td><td></td><td></td><td></td><td></td><td class="s">sub numify {</td></tr>
<tr><td class="h"><a name="4656"></a>4656</td><td></td><td></td><td></td><td></td><td class="s">    # Make a Perl scalar number from a Math::BigInt object.</td></tr>
<tr><td class="h"><a name="4657"></a>4657</td><td></td><td></td><td></td><td></td><td class="s">    my ($class, $x, @r) = ref($_[0]) ? (ref($_[0]), @_) : objectify(1, @_);</td></tr>
<tr><td class="h"><a name="4658"></a>4658</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4659"></a>4659</td><td></td><td></td><td></td><td></td><td class="s">    carp &quot;Rounding is not supported for &quot;, (caller(0))[3], &quot;()&quot; if @r;</td></tr>
<tr><td class="h"><a name="4660"></a>4660</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4661"></a>4661</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_nan()) {</td></tr>
<tr><td class="h"><a name="4662"></a>4662</td><td></td><td></td><td></td><td></td><td class="s">        require Math::Complex;</td></tr>
<tr><td class="h"><a name="4663"></a>4663</td><td></td><td></td><td></td><td></td><td class="s">        my $inf = $Math::Complex::Inf;</td></tr>
<tr><td class="h"><a name="4664"></a>4664</td><td></td><td></td><td></td><td></td><td class="s">        return $inf - $inf;</td></tr>
<tr><td class="h"><a name="4665"></a>4665</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4666"></a>4666</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4667"></a>4667</td><td></td><td></td><td></td><td></td><td class="s">    if ($x -&gt; is_inf()) {</td></tr>
<tr><td class="h"><a name="4668"></a>4668</td><td></td><td></td><td></td><td></td><td class="s">        require Math::Complex;</td></tr>
<tr><td class="h"><a name="4669"></a>4669</td><td></td><td></td><td></td><td></td><td class="s">        my $inf = $Math::Complex::Inf;</td></tr>
<tr><td class="h"><a name="4670"></a>4670</td><td></td><td></td><td></td><td></td><td class="s">        return $x -&gt; is_negative() ? -$inf : $inf;</td></tr>
<tr><td class="h"><a name="4671"></a>4671</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4672"></a>4672</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4673"></a>4673</td><td></td><td></td><td></td><td></td><td class="s">    return $upgrade -&gt; numify($x, @r)</td></tr>
<tr><td class="h"><a name="4674"></a>4674</td><td></td><td></td><td></td><td></td><td class="s">      if defined($upgrade) &amp;&amp; !$x -&gt; isa($class);</td></tr>
<tr><td class="h"><a name="4675"></a>4675</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4676"></a>4676</td><td></td><td></td><td></td><td></td><td class="s">    my $num = 0 + $LIB-&gt;_num($x-&gt;{value});</td></tr>
<tr><td class="h"><a name="4677"></a>4677</td><td></td><td></td><td></td><td></td><td class="s">    return $x-&gt;{sign} eq '-' ? -$num : $num;</td></tr>
<tr><td class="h"><a name="4678"></a>4678</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4679"></a>4679</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4680"></a>4680</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="4681"></a>4681</td><td></td><td></td><td></td><td></td><td class="s"># Private methods and functions.</td></tr>
<tr><td class="h"><a name="4682"></a>4682</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="4683"></a>4683</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4684"></a>4684</td><td></td><td></td><td></td><td></td><td class="s">sub objectify {</td></tr>
<tr><td class="h"><a name="4685"></a>4685</td><td></td><td></td><td></td><td></td><td class="s">    # Convert strings and &quot;foreign objects&quot; to the objects we want.</td></tr>
<tr><td class="h"><a name="4686"></a>4686</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4687"></a>4687</td><td></td><td></td><td></td><td></td><td class="s">    # The first argument, $count, is the number of following arguments that</td></tr>
<tr><td class="h"><a name="4688"></a>4688</td><td></td><td></td><td></td><td></td><td class="s">    # objectify() looks at and converts to objects. The first is a classname.</td></tr>
<tr><td class="h"><a name="4689"></a>4689</td><td></td><td></td><td></td><td></td><td class="s">    # If the given count is 0, all arguments will be used.</td></tr>
<tr><td class="h"><a name="4690"></a>4690</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4691"></a>4691</td><td></td><td></td><td></td><td></td><td class="s">    # After the count is read, objectify obtains the name of the class to which</td></tr>
<tr><td class="h"><a name="4692"></a>4692</td><td></td><td></td><td></td><td></td><td class="s">    # the following arguments are converted. If the second argument is a</td></tr>
<tr><td class="h"><a name="4693"></a>4693</td><td></td><td></td><td></td><td></td><td class="s">    # reference, use the reference type as the class name. Otherwise, if it is</td></tr>
<tr><td class="h"><a name="4694"></a>4694</td><td></td><td></td><td></td><td></td><td class="s">    # a string that looks like a class name, use that. Otherwise, use $class.</td></tr>
<tr><td class="h"><a name="4695"></a>4695</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4696"></a>4696</td><td></td><td></td><td></td><td></td><td class="s">    # Caller:                        Gives us:</td></tr>
<tr><td class="h"><a name="4697"></a>4697</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="4698"></a>4698</td><td></td><td></td><td></td><td></td><td class="s">    # $x-&gt;badd(1);                =&gt; ref x, scalar y</td></tr>
<tr><td class="h"><a name="4699"></a>4699</td><td></td><td></td><td></td><td></td><td class="s">    # Class-&gt;badd(1, 2);           =&gt; classname x (scalar), scalar x, scalar y</td></tr>
<tr><td class="h"><a name="4700"></a>4700</td><td></td><td></td><td></td><td></td><td class="s">    # Class-&gt;badd(Class-&gt;(1), 2);  =&gt; classname x (scalar), ref x, scalar y</td></tr>
<tr><td class="h"><a name="4701"></a>4701</td><td></td><td></td><td></td><td></td><td class="s">    # Math::BigInt::badd(1, 2);    =&gt; scalar x, scalar y</td></tr>
<tr><td class="h"><a name="4702"></a>4702</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4703"></a>4703</td><td></td><td></td><td></td><td></td><td class="s">    # A shortcut for the common case $x-&gt;unary_op(), in which case the argument</td></tr>
<tr><td class="h"><a name="4704"></a>4704</td><td></td><td></td><td></td><td></td><td class="s">    # list is (0, $x) or (1, $x).</td></tr>
<tr><td class="h"><a name="4705"></a>4705</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4706"></a>4706</td><td></td><td></td><td></td><td></td><td class="s">    return (ref($_[1]), $_[1]) if @_ == 2 &amp;&amp; ($_[0] || 0) == 1 &amp;&amp; ref($_[1]);</td></tr>
<tr><td class="h"><a name="4707"></a>4707</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4708"></a>4708</td><td></td><td></td><td></td><td></td><td class="s">    # Check the context.</td></tr>
<tr><td class="h"><a name="4709"></a>4709</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4710"></a>4710</td><td></td><td></td><td></td><td></td><td class="s">    unless (wantarray) {</td></tr>
<tr><td class="h"><a name="4711"></a>4711</td><td></td><td></td><td></td><td></td><td class="s">        croak(__PACKAGE__ . &quot;::objectify() needs list context&quot;);</td></tr>
<tr><td class="h"><a name="4712"></a>4712</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4713"></a>4713</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4714"></a>4714</td><td></td><td></td><td></td><td></td><td class="s">    # Get the number of arguments to objectify.</td></tr>
<tr><td class="h"><a name="4715"></a>4715</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4716"></a>4716</td><td></td><td></td><td></td><td></td><td class="s">    my $count = shift;</td></tr>
<tr><td class="h"><a name="4717"></a>4717</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4718"></a>4718</td><td></td><td></td><td></td><td></td><td class="s">    # Initialize the output array.</td></tr>
<tr><td class="h"><a name="4719"></a>4719</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4720"></a>4720</td><td></td><td></td><td></td><td></td><td class="s">    my @a = @_;</td></tr>
<tr><td class="h"><a name="4721"></a>4721</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4722"></a>4722</td><td></td><td></td><td></td><td></td><td class="s">    # If the first argument is a reference, use that reference type as our</td></tr>
<tr><td class="h"><a name="4723"></a>4723</td><td></td><td></td><td></td><td></td><td class="s">    # class name. Otherwise, if the first argument looks like a class name,</td></tr>
<tr><td class="h"><a name="4724"></a>4724</td><td></td><td></td><td></td><td></td><td class="s">    # then use that as our class name. Otherwise, use the default class name.</td></tr>
<tr><td class="h"><a name="4725"></a>4725</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4726"></a>4726</td><td></td><td></td><td></td><td></td><td class="s">    my $class;</td></tr>
<tr><td class="h"><a name="4727"></a>4727</td><td></td><td></td><td></td><td></td><td class="s">    if (ref($a[0])) {                   # reference?</td></tr>
<tr><td class="h"><a name="4728"></a>4728</td><td></td><td></td><td></td><td></td><td class="s">        $class = ref($a[0]);</td></tr>
<tr><td class="h"><a name="4729"></a>4729</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($a[0] =~ /^[A-Z].*::/) {   # string with class name?</td></tr>
<tr><td class="h"><a name="4730"></a>4730</td><td></td><td></td><td></td><td></td><td class="s">        $class = shift @a;</td></tr>
<tr><td class="h"><a name="4731"></a>4731</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="4732"></a>4732</td><td></td><td></td><td></td><td></td><td class="s">        $class = __PACKAGE__;           # default class name</td></tr>
<tr><td class="h"><a name="4733"></a>4733</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4734"></a>4734</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4735"></a>4735</td><td></td><td></td><td></td><td></td><td class="s">    $count ||= @a;</td></tr>
<tr><td class="h"><a name="4736"></a>4736</td><td></td><td></td><td></td><td></td><td class="s">    unshift @a, $class;</td></tr>
<tr><td class="h"><a name="4737"></a>4737</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4738"></a>4738</td><td class="c1">2</td><td class="c0"><span title="Avg 618Âµs">1.24ms</span></td><td class="c3">2</td><td class="c0">39Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 29Âµs (19+10) within Math::BigInt::BEGIN@4738 which was called:
#    once (19Âµs+10Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#4738">line 4738</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    29Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#4738">Math::BigInt::BEGIN@4738</a>
    # spent    10Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="4739"></a>4739</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4740"></a>4740</td><td></td><td></td><td></td><td></td><td class="s">    # What we upgrade to, if anything. Note that we need the whole upgrade</td></tr>
<tr><td class="h"><a name="4741"></a>4741</td><td></td><td></td><td></td><td></td><td class="s">    # chain, since there might be multiple levels of upgrading. E.g., class A</td></tr>
<tr><td class="h"><a name="4742"></a>4742</td><td></td><td></td><td></td><td></td><td class="s">    # upgrades to class B, which upgrades to class C. Delay getting the chain</td></tr>
<tr><td class="h"><a name="4743"></a>4743</td><td></td><td></td><td></td><td></td><td class="s">    # until we actually need it.</td></tr>
<tr><td class="h"><a name="4744"></a>4744</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4745"></a>4745</td><td></td><td></td><td></td><td></td><td class="s">    my @upg = ();</td></tr>
<tr><td class="h"><a name="4746"></a>4746</td><td></td><td></td><td></td><td></td><td class="s">    my $have_upgrade_chain = 0;</td></tr>
<tr><td class="h"><a name="4747"></a>4747</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4748"></a>4748</td><td></td><td></td><td></td><td></td><td class="s">    # Disable downgrading, because Math::BigFloat -&gt; foo('1.0', '2.0') needs</td></tr>
<tr><td class="h"><a name="4749"></a>4749</td><td></td><td></td><td></td><td></td><td class="s">    # floats.</td></tr>
<tr><td class="h"><a name="4750"></a>4750</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4751"></a>4751</td><td></td><td></td><td></td><td></td><td class="s">    my $down;</td></tr>
<tr><td class="h"><a name="4752"></a>4752</td><td></td><td></td><td></td><td></td><td class="s">    if (defined ${&quot;$a[0]::downgrade&quot;}) {</td></tr>
<tr><td class="h"><a name="4753"></a>4753</td><td></td><td></td><td></td><td></td><td class="s">        $down = ${&quot;$a[0]::downgrade&quot;};</td></tr>
<tr><td class="h"><a name="4754"></a>4754</td><td></td><td></td><td></td><td></td><td class="s">        ${&quot;$a[0]::downgrade&quot;} = undef;</td></tr>
<tr><td class="h"><a name="4755"></a>4755</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4756"></a>4756</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4757"></a>4757</td><td></td><td></td><td></td><td></td><td class="s">  ARG: for my $i (1 .. $count) {</td></tr>
<tr><td class="h"><a name="4758"></a>4758</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4759"></a>4759</td><td></td><td></td><td></td><td></td><td class="s">        my $ref = ref $a[$i];</td></tr>
<tr><td class="h"><a name="4760"></a>4760</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4761"></a>4761</td><td></td><td></td><td></td><td></td><td class="s">        # Perl scalars are fed to the appropriate constructor.</td></tr>
<tr><td class="h"><a name="4762"></a>4762</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4763"></a>4763</td><td></td><td></td><td></td><td></td><td class="s">        unless ($ref) {</td></tr>
<tr><td class="h"><a name="4764"></a>4764</td><td></td><td></td><td></td><td></td><td class="s">            $a[$i] = $a[0] -&gt; new($a[$i]);</td></tr>
<tr><td class="h"><a name="4765"></a>4765</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4766"></a>4766</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4767"></a>4767</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4768"></a>4768</td><td></td><td></td><td></td><td></td><td class="s">        # If it is an object of the right class, all is fine.</td></tr>
<tr><td class="h"><a name="4769"></a>4769</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4770"></a>4770</td><td></td><td></td><td></td><td></td><td class="s">        next if $ref -&gt; isa($a[0]);</td></tr>
<tr><td class="h"><a name="4771"></a>4771</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4772"></a>4772</td><td></td><td></td><td></td><td></td><td class="s">        # Upgrading is OK, so skip further tests if the argument is upgraded,</td></tr>
<tr><td class="h"><a name="4773"></a>4773</td><td></td><td></td><td></td><td></td><td class="s">        # but first get the whole upgrade chain if we haven't got it yet.</td></tr>
<tr><td class="h"><a name="4774"></a>4774</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4775"></a>4775</td><td></td><td></td><td></td><td></td><td class="s">        unless ($have_upgrade_chain) {</td></tr>
<tr><td class="h"><a name="4776"></a>4776</td><td></td><td></td><td></td><td></td><td class="s">            my $cls = $class;</td></tr>
<tr><td class="h"><a name="4777"></a>4777</td><td></td><td></td><td></td><td></td><td class="s">            my $upg = $cls -&gt; upgrade();</td></tr>
<tr><td class="h"><a name="4778"></a>4778</td><td></td><td></td><td></td><td></td><td class="s">            while (defined $upg) {</td></tr>
<tr><td class="h"><a name="4779"></a>4779</td><td></td><td></td><td></td><td></td><td class="s">                last if $upg eq $cls;</td></tr>
<tr><td class="h"><a name="4780"></a>4780</td><td></td><td></td><td></td><td></td><td class="s">                push @upg, $upg;</td></tr>
<tr><td class="h"><a name="4781"></a>4781</td><td></td><td></td><td></td><td></td><td class="s">                $cls = $upg;</td></tr>
<tr><td class="h"><a name="4782"></a>4782</td><td></td><td></td><td></td><td></td><td class="s">                $upg = $cls -&gt; upgrade();</td></tr>
<tr><td class="h"><a name="4783"></a>4783</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4784"></a>4784</td><td></td><td></td><td></td><td></td><td class="s">            $have_upgrade_chain = 1;</td></tr>
<tr><td class="h"><a name="4785"></a>4785</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4786"></a>4786</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4787"></a>4787</td><td></td><td></td><td></td><td></td><td class="s">        for my $upg (@upg) {</td></tr>
<tr><td class="h"><a name="4788"></a>4788</td><td></td><td></td><td></td><td></td><td class="s">            next ARG if $ref -&gt; isa($upg);</td></tr>
<tr><td class="h"><a name="4789"></a>4789</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4790"></a>4790</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4791"></a>4791</td><td></td><td></td><td></td><td></td><td class="s">        # See if we can call one of the as_xxx() methods. We don't know whether</td></tr>
<tr><td class="h"><a name="4792"></a>4792</td><td></td><td></td><td></td><td></td><td class="s">        # the as_xxx() method returns an object or a scalar, so re-check</td></tr>
<tr><td class="h"><a name="4793"></a>4793</td><td></td><td></td><td></td><td></td><td class="s">        # afterwards.</td></tr>
<tr><td class="h"><a name="4794"></a>4794</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4795"></a>4795</td><td></td><td></td><td></td><td></td><td class="s">        my $recheck = 0;</td></tr>
<tr><td class="h"><a name="4796"></a>4796</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4797"></a>4797</td><td></td><td></td><td></td><td></td><td class="s">        if ($a[0] -&gt; isa('Math::BigInt')) {</td></tr>
<tr><td class="h"><a name="4798"></a>4798</td><td></td><td></td><td></td><td></td><td class="s">            if ($a[$i] -&gt; can('as_int')) {</td></tr>
<tr><td class="h"><a name="4799"></a>4799</td><td></td><td></td><td></td><td></td><td class="s">                $a[$i] = $a[$i] -&gt; as_int();</td></tr>
<tr><td class="h"><a name="4800"></a>4800</td><td></td><td></td><td></td><td></td><td class="s">                $recheck = 1;</td></tr>
<tr><td class="h"><a name="4801"></a>4801</td><td></td><td></td><td></td><td></td><td class="s">            } elsif ($a[$i] -&gt; can('as_number')) {</td></tr>
<tr><td class="h"><a name="4802"></a>4802</td><td></td><td></td><td></td><td></td><td class="s">                $a[$i] = $a[$i] -&gt; as_number();</td></tr>
<tr><td class="h"><a name="4803"></a>4803</td><td></td><td></td><td></td><td></td><td class="s">                $recheck = 1;</td></tr>
<tr><td class="h"><a name="4804"></a>4804</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4805"></a>4805</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4806"></a>4806</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4807"></a>4807</td><td></td><td></td><td></td><td></td><td class="s">        elsif ($a[0] -&gt; isa('Math::BigFloat')) {</td></tr>
<tr><td class="h"><a name="4808"></a>4808</td><td></td><td></td><td></td><td></td><td class="s">            if ($a[$i] -&gt; can('as_float')) {</td></tr>
<tr><td class="h"><a name="4809"></a>4809</td><td></td><td></td><td></td><td></td><td class="s">                $a[$i] = $a[$i] -&gt; as_float();</td></tr>
<tr><td class="h"><a name="4810"></a>4810</td><td></td><td></td><td></td><td></td><td class="s">                $recheck = $1;</td></tr>
<tr><td class="h"><a name="4811"></a>4811</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4812"></a>4812</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4813"></a>4813</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4814"></a>4814</td><td></td><td></td><td></td><td></td><td class="s">        # If we called one of the as_xxx() methods, recheck.</td></tr>
<tr><td class="h"><a name="4815"></a>4815</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4816"></a>4816</td><td></td><td></td><td></td><td></td><td class="s">        if ($recheck) {</td></tr>
<tr><td class="h"><a name="4817"></a>4817</td><td></td><td></td><td></td><td></td><td class="s">            $ref = ref($a[$i]);</td></tr>
<tr><td class="h"><a name="4818"></a>4818</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4819"></a>4819</td><td></td><td></td><td></td><td></td><td class="s">            # Perl scalars are fed to the appropriate constructor.</td></tr>
<tr><td class="h"><a name="4820"></a>4820</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4821"></a>4821</td><td></td><td></td><td></td><td></td><td class="s">            unless ($ref) {</td></tr>
<tr><td class="h"><a name="4822"></a>4822</td><td></td><td></td><td></td><td></td><td class="s">                $a[$i] = $a[0] -&gt; new($a[$i]);</td></tr>
<tr><td class="h"><a name="4823"></a>4823</td><td></td><td></td><td></td><td></td><td class="s">                next;</td></tr>
<tr><td class="h"><a name="4824"></a>4824</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4825"></a>4825</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4826"></a>4826</td><td></td><td></td><td></td><td></td><td class="s">            # If it is an object of the right class, all is fine.</td></tr>
<tr><td class="h"><a name="4827"></a>4827</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4828"></a>4828</td><td></td><td></td><td></td><td></td><td class="s">            next if $ref -&gt; isa($a[0]);</td></tr>
<tr><td class="h"><a name="4829"></a>4829</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4830"></a>4830</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4831"></a>4831</td><td></td><td></td><td></td><td></td><td class="s">        # Last resort.</td></tr>
<tr><td class="h"><a name="4832"></a>4832</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4833"></a>4833</td><td></td><td></td><td></td><td></td><td class="s">        $a[$i] = $a[0] -&gt; new($a[$i]);</td></tr>
<tr><td class="h"><a name="4834"></a>4834</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="4835"></a>4835</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4836"></a>4836</td><td></td><td></td><td></td><td></td><td class="s">    # Reset the downgrading.</td></tr>
<tr><td class="h"><a name="4837"></a>4837</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4838"></a>4838</td><td></td><td></td><td></td><td></td><td class="s">    ${&quot;$a[0]::downgrade&quot;} = $down;</td></tr>
<tr><td class="h"><a name="4839"></a>4839</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4840"></a>4840</td><td></td><td></td><td></td><td></td><td class="s">    return @a;</td></tr>
<tr><td class="h"><a name="4841"></a>4841</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="4842"></a>4842</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4843"></a>4843</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 19.7ms (9.92+9.75) within Math::BigInt::import which was called:
#    once (9.92ms+9.75ms) by Advent::Days::Day5::BEGIN@7 at <a href="Day5-pm-24-line.html#7">line 7 of /Users/gbuck/GitHub/Advent-of-Code-2023---Perl/lib/Advent/Days/Day5.pm</a></div></div>sub import {</td></tr>
<tr><td class="h"><a name="4844"></a>4844</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="4845"></a>4845</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">    $IMPORT++;                  # remember we did import()</td></tr>
<tr><td class="h"><a name="4846"></a>4846</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">    my @a;                      # unrecognized arguments</td></tr>
<tr><td class="h"><a name="4847"></a>4847</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4848"></a>4848</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">    while (@_) {</td></tr>
<tr><td class="h"><a name="4849"></a>4849</td><td></td><td></td><td></td><td></td><td class="s">        my $param = shift;</td></tr>
<tr><td class="h"><a name="4850"></a>4850</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4851"></a>4851</td><td></td><td></td><td></td><td></td><td class="s">        # Enable overloading of constants.</td></tr>
<tr><td class="h"><a name="4852"></a>4852</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4853"></a>4853</td><td></td><td></td><td></td><td></td><td class="s">        if ($param eq ':constant') {</td></tr>
<tr><td class="h"><a name="4854"></a>4854</td><td></td><td></td><td></td><td></td><td class="s">            overload::constant</td></tr>
<tr><td class="h"><a name="4855"></a>4855</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4856"></a>4856</td><td></td><td></td><td></td><td></td><td class="s">                integer =&gt; sub {</td></tr>
<tr><td class="h"><a name="4857"></a>4857</td><td></td><td></td><td></td><td></td><td class="s">                    $class -&gt; new(shift);</td></tr>
<tr><td class="h"><a name="4858"></a>4858</td><td></td><td></td><td></td><td></td><td class="s">                },</td></tr>
<tr><td class="h"><a name="4859"></a>4859</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4860"></a>4860</td><td></td><td></td><td></td><td></td><td class="s">                float   =&gt; sub {</td></tr>
<tr><td class="h"><a name="4861"></a>4861</td><td></td><td></td><td></td><td></td><td class="s">                    $class -&gt; new(shift);</td></tr>
<tr><td class="h"><a name="4862"></a>4862</td><td></td><td></td><td></td><td></td><td class="s">                },</td></tr>
<tr><td class="h"><a name="4863"></a>4863</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4864"></a>4864</td><td></td><td></td><td></td><td></td><td class="s">                binary  =&gt; sub {</td></tr>
<tr><td class="h"><a name="4865"></a>4865</td><td></td><td></td><td></td><td></td><td class="s">                    # E.g., a literal 0377 shall result in an object whose value</td></tr>
<tr><td class="h"><a name="4866"></a>4866</td><td></td><td></td><td></td><td></td><td class="s">                    # is decimal 255, but new(&quot;0377&quot;) returns decimal 377.</td></tr>
<tr><td class="h"><a name="4867"></a>4867</td><td></td><td></td><td></td><td></td><td class="s">                    return $class -&gt; from_oct($_[0]) if $_[0] =~ /^0_*[0-7]/;</td></tr>
<tr><td class="h"><a name="4868"></a>4868</td><td></td><td></td><td></td><td></td><td class="s">                    $class -&gt; new(shift);</td></tr>
<tr><td class="h"><a name="4869"></a>4869</td><td></td><td></td><td></td><td></td><td class="s">                };</td></tr>
<tr><td class="h"><a name="4870"></a>4870</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4871"></a>4871</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4872"></a>4872</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4873"></a>4873</td><td></td><td></td><td></td><td></td><td class="s">        # Upgrading.</td></tr>
<tr><td class="h"><a name="4874"></a>4874</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4875"></a>4875</td><td></td><td></td><td></td><td></td><td class="s">        if ($param eq 'upgrade') {</td></tr>
<tr><td class="h"><a name="4876"></a>4876</td><td></td><td></td><td></td><td></td><td class="s">            $class -&gt; upgrade(shift);</td></tr>
<tr><td class="h"><a name="4877"></a>4877</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4878"></a>4878</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4879"></a>4879</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4880"></a>4880</td><td></td><td></td><td></td><td></td><td class="s">        # Downgrading.</td></tr>
<tr><td class="h"><a name="4881"></a>4881</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4882"></a>4882</td><td></td><td></td><td></td><td></td><td class="s">        if ($param eq 'downgrade') {</td></tr>
<tr><td class="h"><a name="4883"></a>4883</td><td></td><td></td><td></td><td></td><td class="s">            $class -&gt; downgrade(shift);</td></tr>
<tr><td class="h"><a name="4884"></a>4884</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4885"></a>4885</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4886"></a>4886</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4887"></a>4887</td><td></td><td></td><td></td><td></td><td class="s">        # Accuracy.</td></tr>
<tr><td class="h"><a name="4888"></a>4888</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4889"></a>4889</td><td></td><td></td><td></td><td></td><td class="s">        if ($param eq 'accuracy') {</td></tr>
<tr><td class="h"><a name="4890"></a>4890</td><td></td><td></td><td></td><td></td><td class="s">            $class -&gt; accuracy(shift);</td></tr>
<tr><td class="h"><a name="4891"></a>4891</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4892"></a>4892</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4893"></a>4893</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4894"></a>4894</td><td></td><td></td><td></td><td></td><td class="s">        # Precision.</td></tr>
<tr><td class="h"><a name="4895"></a>4895</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4896"></a>4896</td><td></td><td></td><td></td><td></td><td class="s">        if ($param eq 'precision') {</td></tr>
<tr><td class="h"><a name="4897"></a>4897</td><td></td><td></td><td></td><td></td><td class="s">            $class -&gt; precision(shift);</td></tr>
<tr><td class="h"><a name="4898"></a>4898</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4899"></a>4899</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4900"></a>4900</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4901"></a>4901</td><td></td><td></td><td></td><td></td><td class="s">        # Rounding mode.</td></tr>
<tr><td class="h"><a name="4902"></a>4902</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4903"></a>4903</td><td></td><td></td><td></td><td></td><td class="s">        if ($param eq 'round_mode') {</td></tr>
<tr><td class="h"><a name="4904"></a>4904</td><td></td><td></td><td></td><td></td><td class="s">            $class -&gt; round_mode(shift);</td></tr>
<tr><td class="h"><a name="4905"></a>4905</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="4906"></a>4906</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="4907"></a>4907</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4908"></a>4908</td><td></td><td></td><td></td><td></td><td class="s">        # Backend library.</td></tr>
<tr><td class="h"><a name="4909"></a>4909</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4910"></a>4910</td><td></td><td></td><td></td><td></td><td class="s">        if ($param =~ /^(lib|try|only)\z/) {</td></tr>
<tr><td class="h"><a name="4911"></a>4911</td><td></td><td></td><td></td><td></td><td class="s">            # try  =&gt; 0 (no warn if unavailable module)</td></tr>
<tr><td class="h"><a name="4912"></a>4912</td><td></td><td></td><td></td><td></td><td class="s">            # lib  =&gt; 1 (warn on fallback)</td></tr>
<tr><td class="h"><a name="4913"></a>4913</td><td></td><td></td><td></td><td></td><td class="s">            # only =&gt; 2 (die on fallback)</td></tr>
<tr><td class="h"><a name="4914"></a>4914</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4915"></a>4915</td><td></td><td></td><td></td><td></td><td class="s">            # Get the list of user-specified libraries.</td></tr>
<tr><td class="h"><a name="4916"></a>4916</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4917"></a>4917</td><td></td><td></td><td></td><td></td><td class="s">            croak &quot;Library argument for import parameter '$param' is missing&quot;</td></tr>
<tr><td class="h"><a name="4918"></a>4918</td><td></td><td></td><td></td><td></td><td class="s">              unless @_;</td></tr>
<tr><td class="h"><a name="4919"></a>4919</td><td></td><td></td><td></td><td></td><td class="s">            my $libs = shift;</td></tr>
<tr><td class="h"><a name="4920"></a>4920</td><td></td><td></td><td></td><td></td><td class="s">            croak &quot;Library argument for import parameter '$param' is undefined&quot;</td></tr>
<tr><td class="h"><a name="4921"></a>4921</td><td></td><td></td><td></td><td></td><td class="s">              unless defined($libs);</td></tr>
<tr><td class="h"><a name="4922"></a>4922</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4923"></a>4923</td><td></td><td></td><td></td><td></td><td class="s">            # Check and clean up the list of user-specified libraries.</td></tr>
<tr><td class="h"><a name="4924"></a>4924</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4925"></a>4925</td><td></td><td></td><td></td><td></td><td class="s">            my @libs;</td></tr>
<tr><td class="h"><a name="4926"></a>4926</td><td></td><td></td><td></td><td></td><td class="s">            for my $lib (split /,/, $libs) {</td></tr>
<tr><td class="h"><a name="4927"></a>4927</td><td></td><td></td><td></td><td></td><td class="s">                $lib =~ s/^\s+//;</td></tr>
<tr><td class="h"><a name="4928"></a>4928</td><td></td><td></td><td></td><td></td><td class="s">                $lib =~ s/\s+$//;</td></tr>
<tr><td class="h"><a name="4929"></a>4929</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4930"></a>4930</td><td></td><td></td><td></td><td></td><td class="s">                if ($lib =~ /[^a-zA-Z0-9_:]/) {</td></tr>
<tr><td class="h"><a name="4931"></a>4931</td><td></td><td></td><td></td><td></td><td class="s">                    carp &quot;Library name '$lib' contains invalid characters&quot;;</td></tr>
<tr><td class="h"><a name="4932"></a>4932</td><td></td><td></td><td></td><td></td><td class="s">                    next;</td></tr>
<tr><td class="h"><a name="4933"></a>4933</td><td></td><td></td><td></td><td></td><td class="s">                }</td></tr>
<tr><td class="h"><a name="4934"></a>4934</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4935"></a>4935</td><td></td><td></td><td></td><td></td><td class="s">                if (! CORE::length $lib) {</td></tr>
<tr><td class="h"><a name="4936"></a>4936</td><td></td><td></td><td></td><td></td><td class="s">                    carp &quot;Library name is empty&quot;;</td></tr>
<tr><td class="h"><a name="4937"></a>4937</td><td></td><td></td><td></td><td></td><td class="s">                    next;</td></tr>
<tr><td class="h"><a name="4938"></a>4938</td><td></td><td></td><td></td><td></td><td class="s">                }</td></tr>
<tr><td class="h"><a name="4939"></a>4939</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4940"></a>4940</td><td></td><td></td><td></td><td></td><td class="s">                $lib = &quot;Math::BigInt::$lib&quot; if $lib !~ /^Math::BigInt::/i;</td></tr>
<tr><td class="h"><a name="4941"></a>4941</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4942"></a>4942</td><td></td><td></td><td></td><td></td><td class="s">                # If a library has already been loaded, that is OK only if the</td></tr>
<tr><td class="h"><a name="4943"></a>4943</td><td></td><td></td><td></td><td></td><td class="s">                # requested library is identical to the loaded one.</td></tr>
<tr><td class="h"><a name="4944"></a>4944</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4945"></a>4945</td><td></td><td></td><td></td><td></td><td class="s">                if (defined($LIB)) {</td></tr>
<tr><td class="h"><a name="4946"></a>4946</td><td></td><td></td><td></td><td></td><td class="s">                    if ($lib ne $LIB) {</td></tr>
<tr><td class="h"><a name="4947"></a>4947</td><td></td><td></td><td></td><td></td><td class="s">                        #carp &quot;Library '$LIB' has already been loaded, so&quot;,</td></tr>
<tr><td class="h"><a name="4948"></a>4948</td><td></td><td></td><td></td><td></td><td class="s">                        #  &quot; ignoring requested library '$lib'&quot;;</td></tr>
<tr><td class="h"><a name="4949"></a>4949</td><td></td><td></td><td></td><td></td><td class="s">                    }</td></tr>
<tr><td class="h"><a name="4950"></a>4950</td><td></td><td></td><td></td><td></td><td class="s">                    next;</td></tr>
<tr><td class="h"><a name="4951"></a>4951</td><td></td><td></td><td></td><td></td><td class="s">                }</td></tr>
<tr><td class="h"><a name="4952"></a>4952</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4953"></a>4953</td><td></td><td></td><td></td><td></td><td class="s">                push @libs, $lib;</td></tr>
<tr><td class="h"><a name="4954"></a>4954</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4955"></a>4955</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4956"></a>4956</td><td></td><td></td><td></td><td></td><td class="s">            next if defined $LIB;</td></tr>
<tr><td class="h"><a name="4957"></a>4957</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4958"></a>4958</td><td></td><td></td><td></td><td></td><td class="s">            croak &quot;Library list contains no valid libraries&quot; unless @libs;</td></tr>
<tr><td class="h"><a name="4959"></a>4959</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4960"></a>4960</td><td></td><td></td><td></td><td></td><td class="s">            # Try to load the specified libraries, if any.</td></tr>
<tr><td class="h"><a name="4961"></a>4961</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4962"></a>4962</td><td></td><td></td><td></td><td></td><td class="s">            for (my $i = 0 ; $i &lt;= $#libs ; $i++) {</td></tr>
<tr><td class="h"><a name="4963"></a>4963</td><td></td><td></td><td></td><td></td><td class="s">                my $lib = $libs[$i];</td></tr>
<tr><td class="h"><a name="4964"></a>4964</td><td></td><td></td><td></td><td></td><td class="s">                eval &quot;require $lib&quot;;</td></tr>
<tr><td class="h"><a name="4965"></a>4965</td><td></td><td></td><td></td><td></td><td class="s">                unless ($@) {</td></tr>
<tr><td class="h"><a name="4966"></a>4966</td><td></td><td></td><td></td><td></td><td class="s">                    $LIB = $lib;</td></tr>
<tr><td class="h"><a name="4967"></a>4967</td><td></td><td></td><td></td><td></td><td class="s">                    last;</td></tr>
<tr><td class="h"><a name="4968"></a>4968</td><td></td><td></td><td></td><td></td><td class="s">                }</td></tr>
<tr><td class="h"><a name="4969"></a>4969</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4970"></a>4970</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4971"></a>4971</td><td></td><td></td><td></td><td></td><td class="s">            next if defined $LIB;</td></tr>
<tr><td class="h"><a name="4972"></a>4972</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4973"></a>4973</td><td></td><td></td><td></td><td></td><td class="s">            # No library has been loaded, and none of the requested libraries</td></tr>
<tr><td class="h"><a name="4974"></a>4974</td><td></td><td></td><td></td><td></td><td class="s">            # could be loaded, and fallback and the user doesn't allow fallback.</td></tr>
<tr><td class="h"><a name="4975"></a>4975</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4976"></a>4976</td><td></td><td></td><td></td><td></td><td class="s">            if ($param eq 'only') {</td></tr>
<tr><td class="h"><a name="4977"></a>4977</td><td></td><td></td><td></td><td></td><td class="s">                croak &quot;Couldn't load the specified math lib(s) &quot;,</td></tr>
<tr><td class="h"><a name="4978"></a>4978</td><td></td><td></td><td></td><td></td><td class="s">                  join(&quot;, &quot;, map &quot;'$_'&quot;, @libs),</td></tr>
<tr><td class="h"><a name="4979"></a>4979</td><td></td><td></td><td></td><td></td><td class="s">                  &quot;, and fallback to '$DEFAULT_LIB' is not allowed&quot;;</td></tr>
<tr><td class="h"><a name="4980"></a>4980</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4981"></a>4981</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4982"></a>4982</td><td></td><td></td><td></td><td></td><td class="s">            # No library has been loaded, and none of the requested libraries</td></tr>
<tr><td class="h"><a name="4983"></a>4983</td><td></td><td></td><td></td><td></td><td class="s">            # could be loaded, but the user accepts the use of a fallback</td></tr>
<tr><td class="h"><a name="4984"></a>4984</td><td></td><td></td><td></td><td></td><td class="s">            # library, so try to load it.</td></tr>
<tr><td class="h"><a name="4985"></a>4985</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4986"></a>4986</td><td></td><td></td><td></td><td></td><td class="s">            eval &quot;require $DEFAULT_LIB&quot;;</td></tr>
<tr><td class="h"><a name="4987"></a>4987</td><td></td><td></td><td></td><td></td><td class="s">            if ($@) {</td></tr>
<tr><td class="h"><a name="4988"></a>4988</td><td></td><td></td><td></td><td></td><td class="s">                croak &quot;Couldn't load the specified math lib(s) &quot;,</td></tr>
<tr><td class="h"><a name="4989"></a>4989</td><td></td><td></td><td></td><td></td><td class="s">                  join(&quot;, &quot;, map &quot;'$_'&quot;, @libs),</td></tr>
<tr><td class="h"><a name="4990"></a>4990</td><td></td><td></td><td></td><td></td><td class="s">                  &quot;, not even the fallback lib '$DEFAULT_LIB'&quot;;</td></tr>
<tr><td class="h"><a name="4991"></a>4991</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="4992"></a>4992</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4993"></a>4993</td><td></td><td></td><td></td><td></td><td class="s">            # The fallback library was successfully loaded, but the user</td></tr>
<tr><td class="h"><a name="4994"></a>4994</td><td></td><td></td><td></td><td></td><td class="s">            # might want to know that we are using the fallback.</td></tr>
<tr><td class="h"><a name="4995"></a>4995</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="4996"></a>4996</td><td></td><td></td><td></td><td></td><td class="s">            if ($param eq 'lib') {</td></tr>
<tr><td class="h"><a name="4997"></a>4997</td><td></td><td></td><td></td><td></td><td class="s">                carp &quot;Couldn't load the specified math lib(s) &quot;,</td></tr>
<tr><td class="h"><a name="4998"></a>4998</td><td></td><td></td><td></td><td></td><td class="s">                  join(&quot;, &quot;, map &quot;'$_'&quot;, @libs),</td></tr>
<tr><td class="h"><a name="4999"></a>4999</td><td></td><td></td><td></td><td></td><td class="s">                  &quot;, so using fallback lib '$DEFAULT_LIB'&quot;;</td></tr>
<tr><td class="h"><a name="5000"></a>5000</td><td></td><td></td><td></td><td></td><td class="s">            }</td></tr>
<tr><td class="h"><a name="5001"></a>5001</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5002"></a>5002</td><td></td><td></td><td></td><td></td><td class="s">            next;</td></tr>
<tr><td class="h"><a name="5003"></a>5003</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="5004"></a>5004</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5005"></a>5005</td><td></td><td></td><td></td><td></td><td class="s">        # Unrecognized parameter.</td></tr>
<tr><td class="h"><a name="5006"></a>5006</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5007"></a>5007</td><td></td><td></td><td></td><td></td><td class="s">        push @a, $param;</td></tr>
<tr><td class="h"><a name="5008"></a>5008</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5009"></a>5009</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5010"></a>5010</td><td></td><td></td><td></td><td></td><td class="s">    # Any non-':constant' stuff is handled by our parent, Exporter</td></tr>
<tr><td class="h"><a name="5011"></a>5011</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5012"></a>5012</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">    if (@a) {</td></tr>
<tr><td class="h"><a name="5013"></a>5013</td><td></td><td></td><td></td><td></td><td class="s">        $class-&gt;SUPER::import(@a);              # need it for subclasses</td></tr>
<tr><td class="h"><a name="5014"></a>5014</td><td></td><td></td><td></td><td></td><td class="s">        $class-&gt;export_to_level(1, $class, @a); # need it for Math::BigFloat</td></tr>
<tr><td class="h"><a name="5015"></a>5015</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5016"></a>5016</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5017"></a>5017</td><td></td><td></td><td></td><td></td><td class="s">    # We might not have loaded any backend library yet, either because the user</td></tr>
<tr><td class="h"><a name="5018"></a>5018</td><td></td><td></td><td></td><td></td><td class="s">    # didn't specify any, or because the specified libraries failed to load and</td></tr>
<tr><td class="h"><a name="5019"></a>5019</td><td></td><td></td><td></td><td></td><td class="s">    # the user allows the use of a fallback library.</td></tr>
<tr><td class="h"><a name="5020"></a>5020</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5021"></a>5021</td><td class="c3">1</td><td class="c1"><span title="Avg 12Âµs">12Âµs</span></td><td></td><td></td><td class="s">    unless (defined $LIB) {</td></tr>
<tr><td class="h"><a name="5022"></a>5022</td><td class="c3">1</td><td class="c0"><span title="Avg 29Âµs">29Âµs</span></td><td></td><td></td><td class="s">        eval &quot;require $DEFAULT_LIB&quot;;<div class="calls"><div class="calls_out">        # spent   303Âµs executing statements in <a href="(eval 5)[Math-BigInt-pm-5022]-29-line.html">string eval</a></div></div></td></tr>
<tr><td class="h"><a name="5023"></a>5023</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">        if ($@) {</td></tr>
<tr><td class="h"><a name="5024"></a>5024</td><td></td><td></td><td></td><td></td><td class="s">            croak &quot;No lib specified, and couldn't load the default&quot;,</td></tr>
<tr><td class="h"><a name="5025"></a>5025</td><td></td><td></td><td></td><td></td><td class="s">              &quot; lib '$DEFAULT_LIB'&quot;;</td></tr>
<tr><td class="h"><a name="5026"></a>5026</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="5027"></a>5027</td><td class="c3">1</td><td class="c3"><span title="Avg 1Âµs">1Âµs</span></td><td></td><td></td><td class="s">        $LIB = $DEFAULT_LIB;</td></tr>
<tr><td class="h"><a name="5028"></a>5028</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5029"></a>5029</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5030"></a>5030</td><td></td><td></td><td></td><td></td><td class="s">    # import done</td></tr>
<tr><td class="h"><a name="5031"></a>5031</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5032"></a>5032</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5033"></a>5033</td><td></td><td></td><td></td><td></td><td class="s">sub _trailing_zeros {</td></tr>
<tr><td class="h"><a name="5034"></a>5034</td><td></td><td></td><td></td><td></td><td class="s">    # return the amount of trailing zeros in $x (as scalar)</td></tr>
<tr><td class="h"><a name="5035"></a>5035</td><td></td><td></td><td></td><td></td><td class="s">    my $x = shift;</td></tr>
<tr><td class="h"><a name="5036"></a>5036</td><td></td><td></td><td></td><td></td><td class="s">    $x = __PACKAGE__-&gt;new($x) unless ref $x;</td></tr>
<tr><td class="h"><a name="5037"></a>5037</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5038"></a>5038</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $x-&gt;{sign} !~ /^[+-]$/; # NaN, inf, -inf etc</td></tr>
<tr><td class="h"><a name="5039"></a>5039</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5040"></a>5040</td><td></td><td></td><td></td><td></td><td class="s">    $LIB-&gt;_zeros($x-&gt;{value}); # must handle odd values, 0 etc</td></tr>
<tr><td class="h"><a name="5041"></a>5041</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5042"></a>5042</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5043"></a>5043</td><td></td><td></td><td></td><td></td><td class="s">sub _scan_for_nonzero {</td></tr>
<tr><td class="h"><a name="5044"></a>5044</td><td></td><td></td><td></td><td></td><td class="s">    # internal, used by bround() to scan for non-zeros after a '5'</td></tr>
<tr><td class="h"><a name="5045"></a>5045</td><td></td><td></td><td></td><td></td><td class="s">    my ($x, $pad, $xs, $len) = @_;</td></tr>
<tr><td class="h"><a name="5046"></a>5046</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5047"></a>5047</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $len == 1;      # &quot;5&quot; is trailed by invisible zeros</td></tr>
<tr><td class="h"><a name="5048"></a>5048</td><td></td><td></td><td></td><td></td><td class="s">    my $follow = $pad - 1;</td></tr>
<tr><td class="h"><a name="5049"></a>5049</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if $follow &gt; $len || $follow &lt; 1;</td></tr>
<tr><td class="h"><a name="5050"></a>5050</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5051"></a>5051</td><td></td><td></td><td></td><td></td><td class="s">    # use the string form to check whether only '0's follow or not</td></tr>
<tr><td class="h"><a name="5052"></a>5052</td><td></td><td></td><td></td><td></td><td class="s">    substr ($xs, -$follow) =~ /[^0]/ ? 1 : 0;</td></tr>
<tr><td class="h"><a name="5053"></a>5053</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5054"></a>5054</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5055"></a>5055</td><td></td><td></td><td></td><td></td><td class="s">sub _find_round_parameters {</td></tr>
<tr><td class="h"><a name="5056"></a>5056</td><td></td><td></td><td></td><td></td><td class="s">    # After any operation or when calling round(), the result is rounded by</td></tr>
<tr><td class="h"><a name="5057"></a>5057</td><td></td><td></td><td></td><td></td><td class="s">    # regarding the A &amp; P from arguments, local parameters, or globals.</td></tr>
<tr><td class="h"><a name="5058"></a>5058</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5059"></a>5059</td><td></td><td></td><td></td><td></td><td class="s">    # !!!!!!! If you change this, remember to change round(), too! !!!!!!!!!!</td></tr>
<tr><td class="h"><a name="5060"></a>5060</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5061"></a>5061</td><td></td><td></td><td></td><td></td><td class="s">    # This procedure finds the round parameters, but it is for speed reasons</td></tr>
<tr><td class="h"><a name="5062"></a>5062</td><td></td><td></td><td></td><td></td><td class="s">    # duplicated in round. Otherwise, it is tested by the testsuite and used</td></tr>
<tr><td class="h"><a name="5063"></a>5063</td><td></td><td></td><td></td><td></td><td class="s">    # by bdiv().</td></tr>
<tr><td class="h"><a name="5064"></a>5064</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5065"></a>5065</td><td></td><td></td><td></td><td></td><td class="s">    # returns ($self) or ($self, $a, $p, $r) - sets $self to NaN of both A and P</td></tr>
<tr><td class="h"><a name="5066"></a>5066</td><td></td><td></td><td></td><td></td><td class="s">    # were requested/defined (locally or globally or both)</td></tr>
<tr><td class="h"><a name="5067"></a>5067</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5068"></a>5068</td><td></td><td></td><td></td><td></td><td class="s">    my ($self, $a, $p, $r, @args) = @_;</td></tr>
<tr><td class="h"><a name="5069"></a>5069</td><td></td><td></td><td></td><td></td><td class="s">    # $a accuracy, if given by caller</td></tr>
<tr><td class="h"><a name="5070"></a>5070</td><td></td><td></td><td></td><td></td><td class="s">    # $p precision, if given by caller</td></tr>
<tr><td class="h"><a name="5071"></a>5071</td><td></td><td></td><td></td><td></td><td class="s">    # $r round_mode, if given by caller</td></tr>
<tr><td class="h"><a name="5072"></a>5072</td><td></td><td></td><td></td><td></td><td class="s">    # @args all 'other' arguments (0 for unary, 1 for binary ops)</td></tr>
<tr><td class="h"><a name="5073"></a>5073</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5074"></a>5074</td><td></td><td></td><td></td><td></td><td class="s">    my $class = ref($self);       # find out class of argument(s)</td></tr>
<tr><td class="h"><a name="5075"></a>5075</td><td class="c1">2</td><td class="c0"><span title="Avg 279Âµs">557Âµs</span></td><td class="c3">2</td><td class="c2">28Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 20Âµs (12+8) within Math::BigInt::BEGIN@5075 which was called:
#    once (12Âµs+8Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#5075">line 5075</a></div></div>    no strict 'refs';<div class="calls"><div class="calls_out">    # spent    20Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#5075">Math::BigInt::BEGIN@5075</a>
    # spent     8Âµs making 1 call to <a href="strict-pm-34-line.html#65">strict::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="5076"></a>5076</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5077"></a>5077</td><td></td><td></td><td></td><td></td><td class="s">    # convert to normal scalar for speed and correctness in inner parts</td></tr>
<tr><td class="h"><a name="5078"></a>5078</td><td></td><td></td><td></td><td></td><td class="s">    $a = $a-&gt;can('numify') ? $a-&gt;numify() : &quot;$a&quot; if defined $a &amp;&amp; ref($a);</td></tr>
<tr><td class="h"><a name="5079"></a>5079</td><td></td><td></td><td></td><td></td><td class="s">    $p = $p-&gt;can('numify') ? $p-&gt;numify() : &quot;$p&quot; if defined $p &amp;&amp; ref($p);</td></tr>
<tr><td class="h"><a name="5080"></a>5080</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5081"></a>5081</td><td></td><td></td><td></td><td></td><td class="s">    # now pick $a or $p, but only if we have got &quot;arguments&quot;</td></tr>
<tr><td class="h"><a name="5082"></a>5082</td><td></td><td></td><td></td><td></td><td class="s">    if (!defined $a) {</td></tr>
<tr><td class="h"><a name="5083"></a>5083</td><td></td><td></td><td></td><td></td><td class="s">        foreach ($self, @args) {</td></tr>
<tr><td class="h"><a name="5084"></a>5084</td><td></td><td></td><td></td><td></td><td class="s">            # take the defined one, or if both defined, the one that is smaller</td></tr>
<tr><td class="h"><a name="5085"></a>5085</td><td></td><td></td><td></td><td></td><td class="s">            $a = $_-&gt;{_a}</td></tr>
<tr><td class="h"><a name="5086"></a>5086</td><td></td><td></td><td></td><td></td><td class="s">              if (defined $_-&gt;{_a}) &amp;&amp; (!defined $a || $_-&gt;{_a} &lt; $a);</td></tr>
<tr><td class="h"><a name="5087"></a>5087</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="5088"></a>5088</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5089"></a>5089</td><td></td><td></td><td></td><td></td><td class="s">    if (!defined $p) {</td></tr>
<tr><td class="h"><a name="5090"></a>5090</td><td></td><td></td><td></td><td></td><td class="s">        # even if $a is defined, take $p, to signal error for both defined</td></tr>
<tr><td class="h"><a name="5091"></a>5091</td><td></td><td></td><td></td><td></td><td class="s">        foreach ($self, @args) {</td></tr>
<tr><td class="h"><a name="5092"></a>5092</td><td></td><td></td><td></td><td></td><td class="s">            # take the defined one, or if both defined, the one that is bigger</td></tr>
<tr><td class="h"><a name="5093"></a>5093</td><td></td><td></td><td></td><td></td><td class="s">            # -2 &gt; -3, and 3 &gt; 2</td></tr>
<tr><td class="h"><a name="5094"></a>5094</td><td></td><td></td><td></td><td></td><td class="s">            $p = $_-&gt;{_p}</td></tr>
<tr><td class="h"><a name="5095"></a>5095</td><td></td><td></td><td></td><td></td><td class="s">              if (defined $_-&gt;{_p}) &amp;&amp; (!defined $p || $_-&gt;{_p} &gt; $p);</td></tr>
<tr><td class="h"><a name="5096"></a>5096</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="5097"></a>5097</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5098"></a>5098</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5099"></a>5099</td><td></td><td></td><td></td><td></td><td class="s">    # if still none defined, use globals (#2)</td></tr>
<tr><td class="h"><a name="5100"></a>5100</td><td></td><td></td><td></td><td></td><td class="s">    $a = ${&quot;$class\::accuracy&quot;}  unless defined $a;</td></tr>
<tr><td class="h"><a name="5101"></a>5101</td><td></td><td></td><td></td><td></td><td class="s">    $p = ${&quot;$class\::precision&quot;} unless defined $p;</td></tr>
<tr><td class="h"><a name="5102"></a>5102</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5103"></a>5103</td><td></td><td></td><td></td><td></td><td class="s">    # A == 0 is useless, so undef it to signal no rounding</td></tr>
<tr><td class="h"><a name="5104"></a>5104</td><td></td><td></td><td></td><td></td><td class="s">    $a = undef if defined $a &amp;&amp; $a == 0;</td></tr>
<tr><td class="h"><a name="5105"></a>5105</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5106"></a>5106</td><td></td><td></td><td></td><td></td><td class="s">    # no rounding today?</td></tr>
<tr><td class="h"><a name="5107"></a>5107</td><td></td><td></td><td></td><td></td><td class="s">    return ($self) unless defined $a || defined $p; # early out</td></tr>
<tr><td class="h"><a name="5108"></a>5108</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5109"></a>5109</td><td></td><td></td><td></td><td></td><td class="s">    # set A and set P is an fatal error</td></tr>
<tr><td class="h"><a name="5110"></a>5110</td><td></td><td></td><td></td><td></td><td class="s">    return ($self-&gt;bnan()) if defined $a &amp;&amp; defined $p; # error</td></tr>
<tr><td class="h"><a name="5111"></a>5111</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5112"></a>5112</td><td></td><td></td><td></td><td></td><td class="s">    $r = ${&quot;$class\::round_mode&quot;} unless defined $r;</td></tr>
<tr><td class="h"><a name="5113"></a>5113</td><td></td><td></td><td></td><td></td><td class="s">    if ($r !~ /^(even|odd|[+-]inf|zero|trunc|common)$/) {</td></tr>
<tr><td class="h"><a name="5114"></a>5114</td><td></td><td></td><td></td><td></td><td class="s">        croak(&quot;Unknown round mode '$r'&quot;);</td></tr>
<tr><td class="h"><a name="5115"></a>5115</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5116"></a>5116</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5117"></a>5117</td><td></td><td></td><td></td><td></td><td class="s">    $a = int($a) if defined $a;</td></tr>
<tr><td class="h"><a name="5118"></a>5118</td><td></td><td></td><td></td><td></td><td class="s">    $p = int($p) if defined $p;</td></tr>
<tr><td class="h"><a name="5119"></a>5119</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5120"></a>5120</td><td></td><td></td><td></td><td></td><td class="s">    ($self, $a, $p, $r);</td></tr>
<tr><td class="h"><a name="5121"></a>5121</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5122"></a>5122</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5123"></a>5123</td><td></td><td></td><td></td><td></td><td class="s"># Return true if the input is numeric and false if it is a string.</td></tr>
<tr><td class="h"><a name="5124"></a>5124</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5125"></a>5125</td><td></td><td></td><td></td><td></td><td class="s">sub _is_numeric {</td></tr>
<tr><td class="h"><a name="5126"></a>5126</td><td></td><td></td><td></td><td></td><td class="s">    shift;              # class name</td></tr>
<tr><td class="h"><a name="5127"></a>5127</td><td></td><td></td><td></td><td></td><td class="s">    my $value = shift;</td></tr>
<tr><td class="h"><a name="5128"></a>5128</td><td class="c1">2</td><td class="c0"><span title="Avg 1.39ms">2.78ms</span></td><td class="c3">2</td><td class="c0">92Âµs</td><td class="s"><div class="calls"><div class="calls_in"># spent 53Âµs (14+39) within Math::BigInt::BEGIN@5128 which was called:
#    once (14Âµs+39Âµs) by Advent::Days::Day5::BEGIN@7 at <a href="Math-BigInt-pm-25-line.html#5128">line 5128</a></div></div>    no warnings 'numeric';<div class="calls"><div class="calls_out">    # spent    53Âµs making 1 call to <a href="Math-BigInt-pm-25-line.html#5128">Math::BigInt::BEGIN@5128</a>
    # spent    39Âµs making 1 call to <a href="warnings-pm-2-line.html#405">warnings::unimport</a></div></div></td></tr>
<tr><td class="h"><a name="5129"></a>5129</td><td></td><td></td><td></td><td></td><td class="s">    # detect numbers</td></tr>
<tr><td class="h"><a name="5130"></a>5130</td><td></td><td></td><td></td><td></td><td class="s">    # string &amp; &quot;&quot; -&gt; &quot;&quot;</td></tr>
<tr><td class="h"><a name="5131"></a>5131</td><td></td><td></td><td></td><td></td><td class="s">    # number &amp; &quot;&quot; -&gt; 0 (with warning)</td></tr>
<tr><td class="h"><a name="5132"></a>5132</td><td></td><td></td><td></td><td></td><td class="s">    # nan and inf can detect as numbers, so check with * 0</td></tr>
<tr><td class="h"><a name="5133"></a>5133</td><td></td><td></td><td></td><td></td><td class="s">    return unless CORE::length((my $dummy = &quot;&quot;) &amp; $value);</td></tr>
<tr><td class="h"><a name="5134"></a>5134</td><td></td><td></td><td></td><td></td><td class="s">    return unless 0 + $value eq $value;</td></tr>
<tr><td class="h"><a name="5135"></a>5135</td><td></td><td></td><td></td><td></td><td class="s">    return 1 if $value * 0 == 0;</td></tr>
<tr><td class="h"><a name="5136"></a>5136</td><td></td><td></td><td></td><td></td><td class="s">    return -1;          # Inf/NaN</td></tr>
<tr><td class="h"><a name="5137"></a>5137</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5138"></a>5138</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5139"></a>5139</td><td></td><td></td><td></td><td></td><td class="s"># Trims the sign of the significand, the (absolute value of the) significand,</td></tr>
<tr><td class="h"><a name="5140"></a>5140</td><td></td><td></td><td></td><td></td><td class="s"># the sign of the exponent, and the (absolute value of the) exponent. The</td></tr>
<tr><td class="h"><a name="5141"></a>5141</td><td></td><td></td><td></td><td></td><td class="s"># returned values have no underscores (&quot;_&quot;) or unnecessary leading or trailing</td></tr>
<tr><td class="h"><a name="5142"></a>5142</td><td></td><td></td><td></td><td></td><td class="s"># zeros.</td></tr>
<tr><td class="h"><a name="5143"></a>5143</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5144"></a>5144</td><td></td><td></td><td></td><td></td><td class="s">sub _trim_split_parts {</td></tr>
<tr><td class="h"><a name="5145"></a>5145</td><td></td><td></td><td></td><td></td><td class="s">    shift;               # class name</td></tr>
<tr><td class="h"><a name="5146"></a>5146</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5147"></a>5147</td><td></td><td></td><td></td><td></td><td class="s">    my $sig_sgn = shift() || '+';</td></tr>
<tr><td class="h"><a name="5148"></a>5148</td><td></td><td></td><td></td><td></td><td class="s">    my $sig_str = shift() || '0';</td></tr>
<tr><td class="h"><a name="5149"></a>5149</td><td></td><td></td><td></td><td></td><td class="s">    my $exp_sgn = shift() || '+';</td></tr>
<tr><td class="h"><a name="5150"></a>5150</td><td></td><td></td><td></td><td></td><td class="s">    my $exp_str = shift() || '0';</td></tr>
<tr><td class="h"><a name="5151"></a>5151</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5152"></a>5152</td><td></td><td></td><td></td><td></td><td class="s">    $sig_str =~ tr/_//d;                        # &quot;1.0_0_0&quot; -&gt; &quot;1.000&quot;</td></tr>
<tr><td class="h"><a name="5153"></a>5153</td><td></td><td></td><td></td><td></td><td class="s">    $sig_str =~ s/^0+//;                        # &quot;01.000&quot; -&gt; &quot;1.000&quot;</td></tr>
<tr><td class="h"><a name="5154"></a>5154</td><td></td><td></td><td></td><td></td><td class="s">    $sig_str =~ s/\.0*$//                       # &quot;1.000&quot; -&gt; &quot;1&quot;</td></tr>
<tr><td class="h"><a name="5155"></a>5155</td><td></td><td></td><td></td><td></td><td class="s">      || $sig_str =~ s/(\..*[^0])0+$/$1/;       # &quot;1.010&quot; -&gt; &quot;1.01&quot;</td></tr>
<tr><td class="h"><a name="5156"></a>5156</td><td></td><td></td><td></td><td></td><td class="s">    $sig_str = '0' unless CORE::length($sig_str);</td></tr>
<tr><td class="h"><a name="5157"></a>5157</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5158"></a>5158</td><td></td><td></td><td></td><td></td><td class="s">    return '+', '0', '+', '0' if $sig_str eq '0';</td></tr>
<tr><td class="h"><a name="5159"></a>5159</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5160"></a>5160</td><td></td><td></td><td></td><td></td><td class="s">    $exp_str =~ tr/_//d;                        # &quot;01_234&quot; -&gt; &quot;01234&quot;</td></tr>
<tr><td class="h"><a name="5161"></a>5161</td><td></td><td></td><td></td><td></td><td class="s">    $exp_str =~ s/^0+//;                        # &quot;01234&quot; -&gt; &quot;1234&quot;</td></tr>
<tr><td class="h"><a name="5162"></a>5162</td><td></td><td></td><td></td><td></td><td class="s">    $exp_str = '0' unless CORE::length($exp_str);</td></tr>
<tr><td class="h"><a name="5163"></a>5163</td><td></td><td></td><td></td><td></td><td class="s">    $exp_sgn = '+' if $exp_str eq '0';          # &quot;+3e-0&quot; -&gt; &quot;+3e+0&quot;</td></tr>
<tr><td class="h"><a name="5164"></a>5164</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5165"></a>5165</td><td></td><td></td><td></td><td></td><td class="s">    return $sig_sgn, $sig_str, $exp_sgn, $exp_str;</td></tr>
<tr><td class="h"><a name="5166"></a>5166</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5167"></a>5167</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5168"></a>5168</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid decimal number and splits it into four</td></tr>
<tr><td class="h"><a name="5169"></a>5169</td><td></td><td></td><td></td><td></td><td class="s"># strings: the sign of the significand, the absolute value of the significand,</td></tr>
<tr><td class="h"><a name="5170"></a>5170</td><td></td><td></td><td></td><td></td><td class="s"># the sign of the exponent, and the absolute value of the exponent. Both the</td></tr>
<tr><td class="h"><a name="5171"></a>5171</td><td></td><td></td><td></td><td></td><td class="s"># significand and the exponent are in base 10.</td></tr>
<tr><td class="h"><a name="5172"></a>5172</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5173"></a>5173</td><td></td><td></td><td></td><td></td><td class="s"># Perl accepts literals like the following. The value is 100.1.</td></tr>
<tr><td class="h"><a name="5174"></a>5174</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5175"></a>5175</td><td></td><td></td><td></td><td></td><td class="s">#   1__0__.__0__1__e+0__1__     (prints &quot;Misplaced _ in number&quot;)</td></tr>
<tr><td class="h"><a name="5176"></a>5176</td><td></td><td></td><td></td><td></td><td class="s">#   1_0.0_1e+0_1</td></tr>
<tr><td class="h"><a name="5177"></a>5177</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5178"></a>5178</td><td></td><td></td><td></td><td></td><td class="s"># Strings representing decimal numbers do not allow underscores, so only the</td></tr>
<tr><td class="h"><a name="5179"></a>5179</td><td></td><td></td><td></td><td></td><td class="s"># following is valid</td></tr>
<tr><td class="h"><a name="5180"></a>5180</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5181"></a>5181</td><td></td><td></td><td></td><td></td><td class="s">#   &quot;10.01e+01&quot;</td></tr>
<tr><td class="h"><a name="5182"></a>5182</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5183"></a>5183</td><td></td><td></td><td></td><td></td><td class="s">sub _dec_str_to_dec_str_parts {</td></tr>
<tr><td class="h"><a name="5184"></a>5184</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5185"></a>5185</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5186"></a>5186</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5187"></a>5187</td><td></td><td></td><td></td><td></td><td class="s">    if ($str =~ /</td></tr>
<tr><td class="h"><a name="5188"></a>5188</td><td></td><td></td><td></td><td></td><td class="s">                    ^</td></tr>
<tr><td class="h"><a name="5189"></a>5189</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5190"></a>5190</td><td></td><td></td><td></td><td></td><td class="s">                    # optional leading whitespace</td></tr>
<tr><td class="h"><a name="5191"></a>5191</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5192"></a>5192</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5193"></a>5193</td><td></td><td></td><td></td><td></td><td class="s">                    # optional sign</td></tr>
<tr><td class="h"><a name="5194"></a>5194</td><td></td><td></td><td></td><td></td><td class="s">                    ( [+-]? )</td></tr>
<tr><td class="h"><a name="5195"></a>5195</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5196"></a>5196</td><td></td><td></td><td></td><td></td><td class="s">                    # significand</td></tr>
<tr><td class="h"><a name="5197"></a>5197</td><td></td><td></td><td></td><td></td><td class="s">                    (</td></tr>
<tr><td class="h"><a name="5198"></a>5198</td><td></td><td></td><td></td><td></td><td class="s">                        # integer part and optional fraction part ...</td></tr>
<tr><td class="h"><a name="5199"></a>5199</td><td></td><td></td><td></td><td></td><td class="s">                        \d+ (?: _+ \d+ )* _*</td></tr>
<tr><td class="h"><a name="5200"></a>5200</td><td></td><td></td><td></td><td></td><td class="s">                        (?:</td></tr>
<tr><td class="h"><a name="5201"></a>5201</td><td></td><td></td><td></td><td></td><td class="s">                            \.</td></tr>
<tr><td class="h"><a name="5202"></a>5202</td><td></td><td></td><td></td><td></td><td class="s">                            (?: _* \d+ (?: _+ \d+ )* _* )?</td></tr>
<tr><td class="h"><a name="5203"></a>5203</td><td></td><td></td><td></td><td></td><td class="s">                        )?</td></tr>
<tr><td class="h"><a name="5204"></a>5204</td><td></td><td></td><td></td><td></td><td class="s">                    |</td></tr>
<tr><td class="h"><a name="5205"></a>5205</td><td></td><td></td><td></td><td></td><td class="s">                        # ... or mandatory fraction part</td></tr>
<tr><td class="h"><a name="5206"></a>5206</td><td></td><td></td><td></td><td></td><td class="s">                        \.</td></tr>
<tr><td class="h"><a name="5207"></a>5207</td><td></td><td></td><td></td><td></td><td class="s">                        \d+ (?: _+ \d+ )* _*</td></tr>
<tr><td class="h"><a name="5208"></a>5208</td><td></td><td></td><td></td><td></td><td class="s">                    )</td></tr>
<tr><td class="h"><a name="5209"></a>5209</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5210"></a>5210</td><td></td><td></td><td></td><td></td><td class="s">                    # optional exponent</td></tr>
<tr><td class="h"><a name="5211"></a>5211</td><td></td><td></td><td></td><td></td><td class="s">                    (?:</td></tr>
<tr><td class="h"><a name="5212"></a>5212</td><td></td><td></td><td></td><td></td><td class="s">                        [Ee]</td></tr>
<tr><td class="h"><a name="5213"></a>5213</td><td></td><td></td><td></td><td></td><td class="s">                        ( [+-]? )</td></tr>
<tr><td class="h"><a name="5214"></a>5214</td><td></td><td></td><td></td><td></td><td class="s">                        ( \d+ (?: _+ \d+ )* _* )</td></tr>
<tr><td class="h"><a name="5215"></a>5215</td><td></td><td></td><td></td><td></td><td class="s">                    )?</td></tr>
<tr><td class="h"><a name="5216"></a>5216</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5217"></a>5217</td><td></td><td></td><td></td><td></td><td class="s">                    # optional trailing whitespace</td></tr>
<tr><td class="h"><a name="5218"></a>5218</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5219"></a>5219</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5220"></a>5220</td><td></td><td></td><td></td><td></td><td class="s">                    $</td></tr>
<tr><td class="h"><a name="5221"></a>5221</td><td></td><td></td><td></td><td></td><td class="s">                /x)</td></tr>
<tr><td class="h"><a name="5222"></a>5222</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="5223"></a>5223</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _trim_split_parts($1, $2, $3, $4);</td></tr>
<tr><td class="h"><a name="5224"></a>5224</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5225"></a>5225</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5226"></a>5226</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5227"></a>5227</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5228"></a>5228</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5229"></a>5229</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid hexadecimal number and splits it into</td></tr>
<tr><td class="h"><a name="5230"></a>5230</td><td></td><td></td><td></td><td></td><td class="s"># four strings: the sign of the significand, the absolute value of the</td></tr>
<tr><td class="h"><a name="5231"></a>5231</td><td></td><td></td><td></td><td></td><td class="s"># significand, the sign of the exponent, and the absolute value of the exponent.</td></tr>
<tr><td class="h"><a name="5232"></a>5232</td><td></td><td></td><td></td><td></td><td class="s"># The significand is in base 16, and the exponent is in base 2.</td></tr>
<tr><td class="h"><a name="5233"></a>5233</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5234"></a>5234</td><td></td><td></td><td></td><td></td><td class="s"># Perl accepts literals like the following. The &quot;x&quot; might be a capital &quot;X&quot;. The</td></tr>
<tr><td class="h"><a name="5235"></a>5235</td><td></td><td></td><td></td><td></td><td class="s"># value is 32.0078125.</td></tr>
<tr><td class="h"><a name="5236"></a>5236</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5237"></a>5237</td><td></td><td></td><td></td><td></td><td class="s">#   0x__1__0__.0__1__p+0__1__   (prints &quot;Misplaced _ in number&quot;)</td></tr>
<tr><td class="h"><a name="5238"></a>5238</td><td></td><td></td><td></td><td></td><td class="s">#   0x1_0.0_1p+0_1</td></tr>
<tr><td class="h"><a name="5239"></a>5239</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5240"></a>5240</td><td></td><td></td><td></td><td></td><td class="s"># The CORE::hex() function does not accept floating point accepts</td></tr>
<tr><td class="h"><a name="5241"></a>5241</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5242"></a>5242</td><td></td><td></td><td></td><td></td><td class="s">#   &quot;0x_1_0&quot;</td></tr>
<tr><td class="h"><a name="5243"></a>5243</td><td></td><td></td><td></td><td></td><td class="s">#   &quot;x_1_0&quot;</td></tr>
<tr><td class="h"><a name="5244"></a>5244</td><td></td><td></td><td></td><td></td><td class="s">#   &quot;_1_0&quot;</td></tr>
<tr><td class="h"><a name="5245"></a>5245</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5246"></a>5246</td><td></td><td></td><td></td><td></td><td class="s">sub _hex_str_to_hex_str_parts {</td></tr>
<tr><td class="h"><a name="5247"></a>5247</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5248"></a>5248</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5249"></a>5249</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5250"></a>5250</td><td></td><td></td><td></td><td></td><td class="s">    if ($str =~ /</td></tr>
<tr><td class="h"><a name="5251"></a>5251</td><td></td><td></td><td></td><td></td><td class="s">                    ^</td></tr>
<tr><td class="h"><a name="5252"></a>5252</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5253"></a>5253</td><td></td><td></td><td></td><td></td><td class="s">                    # optional leading whitespace</td></tr>
<tr><td class="h"><a name="5254"></a>5254</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5255"></a>5255</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5256"></a>5256</td><td></td><td></td><td></td><td></td><td class="s">                    # optional sign</td></tr>
<tr><td class="h"><a name="5257"></a>5257</td><td></td><td></td><td></td><td></td><td class="s">                    ( [+-]? )</td></tr>
<tr><td class="h"><a name="5258"></a>5258</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5259"></a>5259</td><td></td><td></td><td></td><td></td><td class="s">                    # optional hex prefix</td></tr>
<tr><td class="h"><a name="5260"></a>5260</td><td></td><td></td><td></td><td></td><td class="s">                    (?: 0? [Xx] _* )?</td></tr>
<tr><td class="h"><a name="5261"></a>5261</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5262"></a>5262</td><td></td><td></td><td></td><td></td><td class="s">                    # significand using the hex digits 0..9 and a..f</td></tr>
<tr><td class="h"><a name="5263"></a>5263</td><td></td><td></td><td></td><td></td><td class="s">                    (</td></tr>
<tr><td class="h"><a name="5264"></a>5264</td><td></td><td></td><td></td><td></td><td class="s">                        # integer part and optional fraction part ...</td></tr>
<tr><td class="h"><a name="5265"></a>5265</td><td></td><td></td><td></td><td></td><td class="s">                        [0-9a-fA-F]+ (?: _+ [0-9a-fA-F]+ )* _*</td></tr>
<tr><td class="h"><a name="5266"></a>5266</td><td></td><td></td><td></td><td></td><td class="s">                        (?:</td></tr>
<tr><td class="h"><a name="5267"></a>5267</td><td></td><td></td><td></td><td></td><td class="s">                            \.</td></tr>
<tr><td class="h"><a name="5268"></a>5268</td><td></td><td></td><td></td><td></td><td class="s">                            (?: _* [0-9a-fA-F]+ (?: _+ [0-9a-fA-F]+ )* _* )?</td></tr>
<tr><td class="h"><a name="5269"></a>5269</td><td></td><td></td><td></td><td></td><td class="s">                        )?</td></tr>
<tr><td class="h"><a name="5270"></a>5270</td><td></td><td></td><td></td><td></td><td class="s">                    |</td></tr>
<tr><td class="h"><a name="5271"></a>5271</td><td></td><td></td><td></td><td></td><td class="s">                        # ... or mandatory fraction part</td></tr>
<tr><td class="h"><a name="5272"></a>5272</td><td></td><td></td><td></td><td></td><td class="s">                        \.</td></tr>
<tr><td class="h"><a name="5273"></a>5273</td><td></td><td></td><td></td><td></td><td class="s">                        [0-9a-fA-F]+ (?: _+ [0-9a-fA-F]+ )* _*</td></tr>
<tr><td class="h"><a name="5274"></a>5274</td><td></td><td></td><td></td><td></td><td class="s">                    )</td></tr>
<tr><td class="h"><a name="5275"></a>5275</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5276"></a>5276</td><td></td><td></td><td></td><td></td><td class="s">                    # optional exponent (power of 2) using decimal digits</td></tr>
<tr><td class="h"><a name="5277"></a>5277</td><td></td><td></td><td></td><td></td><td class="s">                    (?:</td></tr>
<tr><td class="h"><a name="5278"></a>5278</td><td></td><td></td><td></td><td></td><td class="s">                        [Pp]</td></tr>
<tr><td class="h"><a name="5279"></a>5279</td><td></td><td></td><td></td><td></td><td class="s">                        ( [+-]? )</td></tr>
<tr><td class="h"><a name="5280"></a>5280</td><td></td><td></td><td></td><td></td><td class="s">                        ( \d+ (?: _+ \d+ )* _* )</td></tr>
<tr><td class="h"><a name="5281"></a>5281</td><td></td><td></td><td></td><td></td><td class="s">                    )?</td></tr>
<tr><td class="h"><a name="5282"></a>5282</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5283"></a>5283</td><td></td><td></td><td></td><td></td><td class="s">                    # optional trailing whitespace</td></tr>
<tr><td class="h"><a name="5284"></a>5284</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5285"></a>5285</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5286"></a>5286</td><td></td><td></td><td></td><td></td><td class="s">                    $</td></tr>
<tr><td class="h"><a name="5287"></a>5287</td><td></td><td></td><td></td><td></td><td class="s">                /x)</td></tr>
<tr><td class="h"><a name="5288"></a>5288</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="5289"></a>5289</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _trim_split_parts($1, $2, $3, $4);</td></tr>
<tr><td class="h"><a name="5290"></a>5290</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5291"></a>5291</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5292"></a>5292</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5293"></a>5293</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5294"></a>5294</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5295"></a>5295</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid octal number and splits it into four</td></tr>
<tr><td class="h"><a name="5296"></a>5296</td><td></td><td></td><td></td><td></td><td class="s"># strings: the sign of the significand, the absolute value of the significand,</td></tr>
<tr><td class="h"><a name="5297"></a>5297</td><td></td><td></td><td></td><td></td><td class="s"># the sign of the exponent, and the absolute value of the exponent. The</td></tr>
<tr><td class="h"><a name="5298"></a>5298</td><td></td><td></td><td></td><td></td><td class="s"># significand is in base 8, and the exponent is in base 2.</td></tr>
<tr><td class="h"><a name="5299"></a>5299</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5300"></a>5300</td><td></td><td></td><td></td><td></td><td class="s">sub _oct_str_to_oct_str_parts {</td></tr>
<tr><td class="h"><a name="5301"></a>5301</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5302"></a>5302</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5303"></a>5303</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5304"></a>5304</td><td></td><td></td><td></td><td></td><td class="s">    if ($str =~ /</td></tr>
<tr><td class="h"><a name="5305"></a>5305</td><td></td><td></td><td></td><td></td><td class="s">                    ^</td></tr>
<tr><td class="h"><a name="5306"></a>5306</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5307"></a>5307</td><td></td><td></td><td></td><td></td><td class="s">                    # optional leading whitespace</td></tr>
<tr><td class="h"><a name="5308"></a>5308</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5309"></a>5309</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5310"></a>5310</td><td></td><td></td><td></td><td></td><td class="s">                    # optional sign</td></tr>
<tr><td class="h"><a name="5311"></a>5311</td><td></td><td></td><td></td><td></td><td class="s">                    ( [+-]? )</td></tr>
<tr><td class="h"><a name="5312"></a>5312</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5313"></a>5313</td><td></td><td></td><td></td><td></td><td class="s">                    # optional octal prefix</td></tr>
<tr><td class="h"><a name="5314"></a>5314</td><td></td><td></td><td></td><td></td><td class="s">                    (?: 0? [Oo] _* )?</td></tr>
<tr><td class="h"><a name="5315"></a>5315</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5316"></a>5316</td><td></td><td></td><td></td><td></td><td class="s">                    # significand using the octal digits 0..7</td></tr>
<tr><td class="h"><a name="5317"></a>5317</td><td></td><td></td><td></td><td></td><td class="s">                    (</td></tr>
<tr><td class="h"><a name="5318"></a>5318</td><td></td><td></td><td></td><td></td><td class="s">                        # integer part and optional fraction part ...</td></tr>
<tr><td class="h"><a name="5319"></a>5319</td><td></td><td></td><td></td><td></td><td class="s">                        [0-7]+ (?: _+ [0-7]+ )* _*</td></tr>
<tr><td class="h"><a name="5320"></a>5320</td><td></td><td></td><td></td><td></td><td class="s">                        (?:</td></tr>
<tr><td class="h"><a name="5321"></a>5321</td><td></td><td></td><td></td><td></td><td class="s">                            \.</td></tr>
<tr><td class="h"><a name="5322"></a>5322</td><td></td><td></td><td></td><td></td><td class="s">                            (?: _* [0-7]+ (?: _+ [0-7]+ )* _* )?</td></tr>
<tr><td class="h"><a name="5323"></a>5323</td><td></td><td></td><td></td><td></td><td class="s">                        )?</td></tr>
<tr><td class="h"><a name="5324"></a>5324</td><td></td><td></td><td></td><td></td><td class="s">                    |</td></tr>
<tr><td class="h"><a name="5325"></a>5325</td><td></td><td></td><td></td><td></td><td class="s">                        # ... or mandatory fraction part</td></tr>
<tr><td class="h"><a name="5326"></a>5326</td><td></td><td></td><td></td><td></td><td class="s">                        \.</td></tr>
<tr><td class="h"><a name="5327"></a>5327</td><td></td><td></td><td></td><td></td><td class="s">                        [0-7]+ (?: _+ [0-7]+ )* _*</td></tr>
<tr><td class="h"><a name="5328"></a>5328</td><td></td><td></td><td></td><td></td><td class="s">                    )</td></tr>
<tr><td class="h"><a name="5329"></a>5329</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5330"></a>5330</td><td></td><td></td><td></td><td></td><td class="s">                    # optional exponent (power of 2) using decimal digits</td></tr>
<tr><td class="h"><a name="5331"></a>5331</td><td></td><td></td><td></td><td></td><td class="s">                    (?:</td></tr>
<tr><td class="h"><a name="5332"></a>5332</td><td></td><td></td><td></td><td></td><td class="s">                        [Pp]</td></tr>
<tr><td class="h"><a name="5333"></a>5333</td><td></td><td></td><td></td><td></td><td class="s">                        ( [+-]? )</td></tr>
<tr><td class="h"><a name="5334"></a>5334</td><td></td><td></td><td></td><td></td><td class="s">                        ( \d+ (?: _+ \d+ )* _* )</td></tr>
<tr><td class="h"><a name="5335"></a>5335</td><td></td><td></td><td></td><td></td><td class="s">                    )?</td></tr>
<tr><td class="h"><a name="5336"></a>5336</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5337"></a>5337</td><td></td><td></td><td></td><td></td><td class="s">                    # optional trailing whitespace</td></tr>
<tr><td class="h"><a name="5338"></a>5338</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5339"></a>5339</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5340"></a>5340</td><td></td><td></td><td></td><td></td><td class="s">                    $</td></tr>
<tr><td class="h"><a name="5341"></a>5341</td><td></td><td></td><td></td><td></td><td class="s">                /x)</td></tr>
<tr><td class="h"><a name="5342"></a>5342</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="5343"></a>5343</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _trim_split_parts($1, $2, $3, $4);</td></tr>
<tr><td class="h"><a name="5344"></a>5344</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5345"></a>5345</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5346"></a>5346</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5347"></a>5347</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5348"></a>5348</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5349"></a>5349</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid binary number and splits it into four</td></tr>
<tr><td class="h"><a name="5350"></a>5350</td><td></td><td></td><td></td><td></td><td class="s"># strings: the sign of the significand, the absolute value of the significand,</td></tr>
<tr><td class="h"><a name="5351"></a>5351</td><td></td><td></td><td></td><td></td><td class="s"># the sign of the exponent, and the absolute value of the exponent. The</td></tr>
<tr><td class="h"><a name="5352"></a>5352</td><td></td><td></td><td></td><td></td><td class="s"># significand is in base 2, and the exponent is in base 2.</td></tr>
<tr><td class="h"><a name="5353"></a>5353</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5354"></a>5354</td><td></td><td></td><td></td><td></td><td class="s">sub _bin_str_to_bin_str_parts {</td></tr>
<tr><td class="h"><a name="5355"></a>5355</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5356"></a>5356</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5357"></a>5357</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5358"></a>5358</td><td></td><td></td><td></td><td></td><td class="s">    if ($str =~ /</td></tr>
<tr><td class="h"><a name="5359"></a>5359</td><td></td><td></td><td></td><td></td><td class="s">                    ^</td></tr>
<tr><td class="h"><a name="5360"></a>5360</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5361"></a>5361</td><td></td><td></td><td></td><td></td><td class="s">                    # optional leading whitespace</td></tr>
<tr><td class="h"><a name="5362"></a>5362</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5363"></a>5363</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5364"></a>5364</td><td></td><td></td><td></td><td></td><td class="s">                    # optional sign</td></tr>
<tr><td class="h"><a name="5365"></a>5365</td><td></td><td></td><td></td><td></td><td class="s">                    ( [+-]? )</td></tr>
<tr><td class="h"><a name="5366"></a>5366</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5367"></a>5367</td><td></td><td></td><td></td><td></td><td class="s">                    # optional binary prefix</td></tr>
<tr><td class="h"><a name="5368"></a>5368</td><td></td><td></td><td></td><td></td><td class="s">                    (?: 0? [Bb] _* )?</td></tr>
<tr><td class="h"><a name="5369"></a>5369</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5370"></a>5370</td><td></td><td></td><td></td><td></td><td class="s">                    # significand using the binary digits 0 and 1</td></tr>
<tr><td class="h"><a name="5371"></a>5371</td><td></td><td></td><td></td><td></td><td class="s">                    (</td></tr>
<tr><td class="h"><a name="5372"></a>5372</td><td></td><td></td><td></td><td></td><td class="s">                        # integer part and optional fraction part ...</td></tr>
<tr><td class="h"><a name="5373"></a>5373</td><td></td><td></td><td></td><td></td><td class="s">                        [01]+ (?: _+ [01]+ )* _*</td></tr>
<tr><td class="h"><a name="5374"></a>5374</td><td></td><td></td><td></td><td></td><td class="s">                        (?:</td></tr>
<tr><td class="h"><a name="5375"></a>5375</td><td></td><td></td><td></td><td></td><td class="s">                            \.</td></tr>
<tr><td class="h"><a name="5376"></a>5376</td><td></td><td></td><td></td><td></td><td class="s">                            (?: _* [01]+ (?: _+ [01]+ )* _* )?</td></tr>
<tr><td class="h"><a name="5377"></a>5377</td><td></td><td></td><td></td><td></td><td class="s">                        )?</td></tr>
<tr><td class="h"><a name="5378"></a>5378</td><td></td><td></td><td></td><td></td><td class="s">                    |</td></tr>
<tr><td class="h"><a name="5379"></a>5379</td><td></td><td></td><td></td><td></td><td class="s">                        # ... or mandatory fraction part</td></tr>
<tr><td class="h"><a name="5380"></a>5380</td><td></td><td></td><td></td><td></td><td class="s">                        \.</td></tr>
<tr><td class="h"><a name="5381"></a>5381</td><td></td><td></td><td></td><td></td><td class="s">                        [01]+ (?: _+ [01]+ )* _*</td></tr>
<tr><td class="h"><a name="5382"></a>5382</td><td></td><td></td><td></td><td></td><td class="s">                    )</td></tr>
<tr><td class="h"><a name="5383"></a>5383</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5384"></a>5384</td><td></td><td></td><td></td><td></td><td class="s">                    # optional exponent (power of 2) using decimal digits</td></tr>
<tr><td class="h"><a name="5385"></a>5385</td><td></td><td></td><td></td><td></td><td class="s">                    (?:</td></tr>
<tr><td class="h"><a name="5386"></a>5386</td><td></td><td></td><td></td><td></td><td class="s">                        [Pp]</td></tr>
<tr><td class="h"><a name="5387"></a>5387</td><td></td><td></td><td></td><td></td><td class="s">                        ( [+-]? )</td></tr>
<tr><td class="h"><a name="5388"></a>5388</td><td></td><td></td><td></td><td></td><td class="s">                        ( \d+ (?: _+ \d+ )* _* )</td></tr>
<tr><td class="h"><a name="5389"></a>5389</td><td></td><td></td><td></td><td></td><td class="s">                    )?</td></tr>
<tr><td class="h"><a name="5390"></a>5390</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5391"></a>5391</td><td></td><td></td><td></td><td></td><td class="s">                    # optional trailing whitespace</td></tr>
<tr><td class="h"><a name="5392"></a>5392</td><td></td><td></td><td></td><td></td><td class="s">                    \s*</td></tr>
<tr><td class="h"><a name="5393"></a>5393</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5394"></a>5394</td><td></td><td></td><td></td><td></td><td class="s">                    $</td></tr>
<tr><td class="h"><a name="5395"></a>5395</td><td></td><td></td><td></td><td></td><td class="s">                /x)</td></tr>
<tr><td class="h"><a name="5396"></a>5396</td><td></td><td></td><td></td><td></td><td class="s">    {</td></tr>
<tr><td class="h"><a name="5397"></a>5397</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _trim_split_parts($1, $2, $3, $4);</td></tr>
<tr><td class="h"><a name="5398"></a>5398</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5399"></a>5399</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5400"></a>5400</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5401"></a>5401</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5402"></a>5402</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5403"></a>5403</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid decimal number and splits it into four</td></tr>
<tr><td class="h"><a name="5404"></a>5404</td><td></td><td></td><td></td><td></td><td class="s"># parts: the sign of the significand, the absolute value of the significand as a</td></tr>
<tr><td class="h"><a name="5405"></a>5405</td><td></td><td></td><td></td><td></td><td class="s"># libray thingy, the sign of the exponent, and the absolute value of the</td></tr>
<tr><td class="h"><a name="5406"></a>5406</td><td></td><td></td><td></td><td></td><td class="s"># exponent as a library thingy.</td></tr>
<tr><td class="h"><a name="5407"></a>5407</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5408"></a>5408</td><td></td><td></td><td></td><td></td><td class="s">sub _dec_str_parts_to_flt_lib_parts {</td></tr>
<tr><td class="h"><a name="5409"></a>5409</td><td></td><td></td><td></td><td></td><td class="s">    shift;               # class name</td></tr>
<tr><td class="h"><a name="5410"></a>5410</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5411"></a>5411</td><td></td><td></td><td></td><td></td><td class="s">    my ($sig_sgn, $sig_str, $exp_sgn, $exp_str) = @_;</td></tr>
<tr><td class="h"><a name="5412"></a>5412</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5413"></a>5413</td><td></td><td></td><td></td><td></td><td class="s">    # Handle zero.</td></tr>
<tr><td class="h"><a name="5414"></a>5414</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5415"></a>5415</td><td></td><td></td><td></td><td></td><td class="s">    if ($sig_str eq '0') {</td></tr>
<tr><td class="h"><a name="5416"></a>5416</td><td></td><td></td><td></td><td></td><td class="s">        return '+', $LIB -&gt; _zero(), '+', $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="5417"></a>5417</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5418"></a>5418</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5419"></a>5419</td><td></td><td></td><td></td><td></td><td class="s">    # Absolute value of exponent as library &quot;object&quot;.</td></tr>
<tr><td class="h"><a name="5420"></a>5420</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5421"></a>5421</td><td></td><td></td><td></td><td></td><td class="s">    my $exp_lib = $LIB -&gt; _new($exp_str);</td></tr>
<tr><td class="h"><a name="5422"></a>5422</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5423"></a>5423</td><td></td><td></td><td></td><td></td><td class="s">    # If there is a dot in the significand, remove it so the significand</td></tr>
<tr><td class="h"><a name="5424"></a>5424</td><td></td><td></td><td></td><td></td><td class="s">    # becomes an integer and adjust the exponent accordingly. Also remove</td></tr>
<tr><td class="h"><a name="5425"></a>5425</td><td></td><td></td><td></td><td></td><td class="s">    # leading zeros which might now appear in the significand. E.g.,</td></tr>
<tr><td class="h"><a name="5426"></a>5426</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="5427"></a>5427</td><td></td><td></td><td></td><td></td><td class="s">    #     12.345e-2  -&gt;  12345e-5</td></tr>
<tr><td class="h"><a name="5428"></a>5428</td><td></td><td></td><td></td><td></td><td class="s">    #     12.345e+2  -&gt;  12345e-1</td></tr>
<tr><td class="h"><a name="5429"></a>5429</td><td></td><td></td><td></td><td></td><td class="s">    #     0.0123e+5  -&gt;  00123e+1  -&gt;  123e+1</td></tr>
<tr><td class="h"><a name="5430"></a>5430</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5431"></a>5431</td><td></td><td></td><td></td><td></td><td class="s">    my $idx = index $sig_str, '.';</td></tr>
<tr><td class="h"><a name="5432"></a>5432</td><td></td><td></td><td></td><td></td><td class="s">    if ($idx &gt;= 0) {</td></tr>
<tr><td class="h"><a name="5433"></a>5433</td><td></td><td></td><td></td><td></td><td class="s">        substr($sig_str, $idx, 1) = '';</td></tr>
<tr><td class="h"><a name="5434"></a>5434</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5435"></a>5435</td><td></td><td></td><td></td><td></td><td class="s">        # delta = length - index</td></tr>
<tr><td class="h"><a name="5436"></a>5436</td><td></td><td></td><td></td><td></td><td class="s">        my $delta = $LIB -&gt; _new(CORE::length($sig_str));</td></tr>
<tr><td class="h"><a name="5437"></a>5437</td><td></td><td></td><td></td><td></td><td class="s">        $delta = $LIB -&gt; _sub($delta, $LIB -&gt; _new($idx));</td></tr>
<tr><td class="h"><a name="5438"></a>5438</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5439"></a>5439</td><td></td><td></td><td></td><td></td><td class="s">        # exponent - delta</td></tr>
<tr><td class="h"><a name="5440"></a>5440</td><td></td><td></td><td></td><td></td><td class="s">        ($exp_lib, $exp_sgn) = $LIB -&gt; _ssub($exp_lib, $exp_sgn, $delta, '+');</td></tr>
<tr><td class="h"><a name="5441"></a>5441</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5442"></a>5442</td><td></td><td></td><td></td><td></td><td class="s">        $sig_str =~ s/^0+//;</td></tr>
<tr><td class="h"><a name="5443"></a>5443</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5444"></a>5444</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5445"></a>5445</td><td></td><td></td><td></td><td></td><td class="s">    # If there are trailing zeros in the significand, remove them and</td></tr>
<tr><td class="h"><a name="5446"></a>5446</td><td></td><td></td><td></td><td></td><td class="s">    # adjust the exponent. E.g.,</td></tr>
<tr><td class="h"><a name="5447"></a>5447</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="5448"></a>5448</td><td></td><td></td><td></td><td></td><td class="s">    #     12340e-5  -&gt;  1234e-4</td></tr>
<tr><td class="h"><a name="5449"></a>5449</td><td></td><td></td><td></td><td></td><td class="s">    #     12340e-1  -&gt;  1234e0</td></tr>
<tr><td class="h"><a name="5450"></a>5450</td><td></td><td></td><td></td><td></td><td class="s">    #     12340e+3  -&gt;  1234e4</td></tr>
<tr><td class="h"><a name="5451"></a>5451</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5452"></a>5452</td><td></td><td></td><td></td><td></td><td class="s">    if ($sig_str =~ s/(0+)\z//) {</td></tr>
<tr><td class="h"><a name="5453"></a>5453</td><td></td><td></td><td></td><td></td><td class="s">        my $len = CORE::length($1);</td></tr>
<tr><td class="h"><a name="5454"></a>5454</td><td></td><td></td><td></td><td></td><td class="s">        ($exp_lib, $exp_sgn) =</td></tr>
<tr><td class="h"><a name="5455"></a>5455</td><td></td><td></td><td></td><td></td><td class="s">          $LIB -&gt; _sadd($exp_lib, $exp_sgn, $LIB -&gt; _new($len), '+');</td></tr>
<tr><td class="h"><a name="5456"></a>5456</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5457"></a>5457</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5458"></a>5458</td><td></td><td></td><td></td><td></td><td class="s">    # At this point, the significand is empty or an integer with no trailing</td></tr>
<tr><td class="h"><a name="5459"></a>5459</td><td></td><td></td><td></td><td></td><td class="s">    # zeros. The exponent is in base 10.</td></tr>
<tr><td class="h"><a name="5460"></a>5460</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5461"></a>5461</td><td></td><td></td><td></td><td></td><td class="s">    unless (CORE::length $sig_str) {</td></tr>
<tr><td class="h"><a name="5462"></a>5462</td><td></td><td></td><td></td><td></td><td class="s">        return '+', $LIB -&gt; _zero(), '+', $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="5463"></a>5463</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5464"></a>5464</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5465"></a>5465</td><td></td><td></td><td></td><td></td><td class="s">    # Absolute value of significand as library &quot;object&quot;.</td></tr>
<tr><td class="h"><a name="5466"></a>5466</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5467"></a>5467</td><td></td><td></td><td></td><td></td><td class="s">    my $sig_lib = $LIB -&gt; _new($sig_str);</td></tr>
<tr><td class="h"><a name="5468"></a>5468</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5469"></a>5469</td><td></td><td></td><td></td><td></td><td class="s">    return $sig_sgn, $sig_lib, $exp_sgn, $exp_lib;</td></tr>
<tr><td class="h"><a name="5470"></a>5470</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5471"></a>5471</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5472"></a>5472</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid binary number and splits it into four</td></tr>
<tr><td class="h"><a name="5473"></a>5473</td><td></td><td></td><td></td><td></td><td class="s"># parts: the sign of the significand, the absolute value of the significand as a</td></tr>
<tr><td class="h"><a name="5474"></a>5474</td><td></td><td></td><td></td><td></td><td class="s"># libray thingy, the sign of the exponent, and the absolute value of the</td></tr>
<tr><td class="h"><a name="5475"></a>5475</td><td></td><td></td><td></td><td></td><td class="s"># exponent as a library thingy.</td></tr>
<tr><td class="h"><a name="5476"></a>5476</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5477"></a>5477</td><td></td><td></td><td></td><td></td><td class="s">sub _bin_str_parts_to_flt_lib_parts {</td></tr>
<tr><td class="h"><a name="5478"></a>5478</td><td></td><td></td><td></td><td></td><td class="s">    shift;               # class name</td></tr>
<tr><td class="h"><a name="5479"></a>5479</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5480"></a>5480</td><td></td><td></td><td></td><td></td><td class="s">    my ($sig_sgn, $sig_str, $exp_sgn, $exp_str, $bpc) = @_;</td></tr>
<tr><td class="h"><a name="5481"></a>5481</td><td></td><td></td><td></td><td></td><td class="s">    my $bpc_lib = $LIB -&gt; _new($bpc);</td></tr>
<tr><td class="h"><a name="5482"></a>5482</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5483"></a>5483</td><td></td><td></td><td></td><td></td><td class="s">    # Handle zero.</td></tr>
<tr><td class="h"><a name="5484"></a>5484</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5485"></a>5485</td><td></td><td></td><td></td><td></td><td class="s">    if ($sig_str eq '0') {</td></tr>
<tr><td class="h"><a name="5486"></a>5486</td><td></td><td></td><td></td><td></td><td class="s">        return '+', $LIB -&gt; _zero(), '+', $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="5487"></a>5487</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5488"></a>5488</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5489"></a>5489</td><td></td><td></td><td></td><td></td><td class="s">    # Absolute value of exponent as library &quot;object&quot;.</td></tr>
<tr><td class="h"><a name="5490"></a>5490</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5491"></a>5491</td><td></td><td></td><td></td><td></td><td class="s">    my $exp_lib = $LIB -&gt; _new($exp_str);</td></tr>
<tr><td class="h"><a name="5492"></a>5492</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5493"></a>5493</td><td></td><td></td><td></td><td></td><td class="s">    # If there is a dot in the significand, remove it so the significand</td></tr>
<tr><td class="h"><a name="5494"></a>5494</td><td></td><td></td><td></td><td></td><td class="s">    # becomes an integer and adjust the exponent accordingly. Also remove</td></tr>
<tr><td class="h"><a name="5495"></a>5495</td><td></td><td></td><td></td><td></td><td class="s">    # leading zeros which might now appear in the significand. E.g., with</td></tr>
<tr><td class="h"><a name="5496"></a>5496</td><td></td><td></td><td></td><td></td><td class="s">    # hexadecimal numbers</td></tr>
<tr><td class="h"><a name="5497"></a>5497</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="5498"></a>5498</td><td></td><td></td><td></td><td></td><td class="s">    #     12.345p-2  -&gt;  12345p-14</td></tr>
<tr><td class="h"><a name="5499"></a>5499</td><td></td><td></td><td></td><td></td><td class="s">    #     12.345p+2  -&gt;  12345p-10</td></tr>
<tr><td class="h"><a name="5500"></a>5500</td><td></td><td></td><td></td><td></td><td class="s">    #     0.0123p+5  -&gt;  00123p-11  -&gt;  123p-11</td></tr>
<tr><td class="h"><a name="5501"></a>5501</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5502"></a>5502</td><td></td><td></td><td></td><td></td><td class="s">    my $idx = index $sig_str, '.';</td></tr>
<tr><td class="h"><a name="5503"></a>5503</td><td></td><td></td><td></td><td></td><td class="s">    if ($idx &gt;= 0) {</td></tr>
<tr><td class="h"><a name="5504"></a>5504</td><td></td><td></td><td></td><td></td><td class="s">        substr($sig_str, $idx, 1) = '';</td></tr>
<tr><td class="h"><a name="5505"></a>5505</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5506"></a>5506</td><td></td><td></td><td></td><td></td><td class="s">        # delta = (length - index) * bpc</td></tr>
<tr><td class="h"><a name="5507"></a>5507</td><td></td><td></td><td></td><td></td><td class="s">        my $delta = $LIB -&gt; _new(CORE::length($sig_str));</td></tr>
<tr><td class="h"><a name="5508"></a>5508</td><td></td><td></td><td></td><td></td><td class="s">        $delta = $LIB -&gt; _sub($delta, $LIB -&gt; _new($idx));</td></tr>
<tr><td class="h"><a name="5509"></a>5509</td><td></td><td></td><td></td><td></td><td class="s">        $delta = $LIB -&gt; _mul($delta, $bpc_lib) if $bpc != 1;</td></tr>
<tr><td class="h"><a name="5510"></a>5510</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5511"></a>5511</td><td></td><td></td><td></td><td></td><td class="s">        # exponent - delta</td></tr>
<tr><td class="h"><a name="5512"></a>5512</td><td></td><td></td><td></td><td></td><td class="s">        ($exp_lib, $exp_sgn) = $LIB -&gt; _ssub($exp_lib, $exp_sgn, $delta, '+');</td></tr>
<tr><td class="h"><a name="5513"></a>5513</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5514"></a>5514</td><td></td><td></td><td></td><td></td><td class="s">        $sig_str =~ s/^0+//;</td></tr>
<tr><td class="h"><a name="5515"></a>5515</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5516"></a>5516</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5517"></a>5517</td><td></td><td></td><td></td><td></td><td class="s">    # If there are trailing zeros in the significand, remove them and</td></tr>
<tr><td class="h"><a name="5518"></a>5518</td><td></td><td></td><td></td><td></td><td class="s">    # adjust the exponent accordingly. E.g., with hexadecimal numbers</td></tr>
<tr><td class="h"><a name="5519"></a>5519</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="5520"></a>5520</td><td></td><td></td><td></td><td></td><td class="s">    #     12340p-5  -&gt;  1234p-1</td></tr>
<tr><td class="h"><a name="5521"></a>5521</td><td></td><td></td><td></td><td></td><td class="s">    #     12340p-1  -&gt;  1234p+3</td></tr>
<tr><td class="h"><a name="5522"></a>5522</td><td></td><td></td><td></td><td></td><td class="s">    #     12340p+3  -&gt;  1234p+7</td></tr>
<tr><td class="h"><a name="5523"></a>5523</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5524"></a>5524</td><td></td><td></td><td></td><td></td><td class="s">    if ($sig_str =~ s/(0+)\z//) {</td></tr>
<tr><td class="h"><a name="5525"></a>5525</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5526"></a>5526</td><td></td><td></td><td></td><td></td><td class="s">        # delta = length * bpc</td></tr>
<tr><td class="h"><a name="5527"></a>5527</td><td></td><td></td><td></td><td></td><td class="s">        my $delta = $LIB -&gt; _new(CORE::length($1));</td></tr>
<tr><td class="h"><a name="5528"></a>5528</td><td></td><td></td><td></td><td></td><td class="s">        $delta = $LIB -&gt; _mul($delta, $bpc_lib) if $bpc != 1;</td></tr>
<tr><td class="h"><a name="5529"></a>5529</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5530"></a>5530</td><td></td><td></td><td></td><td></td><td class="s">        # exponent + delta</td></tr>
<tr><td class="h"><a name="5531"></a>5531</td><td></td><td></td><td></td><td></td><td class="s">        ($exp_lib, $exp_sgn) = $LIB -&gt; _sadd($exp_lib, $exp_sgn, $delta, '+');</td></tr>
<tr><td class="h"><a name="5532"></a>5532</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5533"></a>5533</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5534"></a>5534</td><td></td><td></td><td></td><td></td><td class="s">    # At this point, the significand is empty or an integer with no leading</td></tr>
<tr><td class="h"><a name="5535"></a>5535</td><td></td><td></td><td></td><td></td><td class="s">    # or trailing zeros. The exponent is in base 2.</td></tr>
<tr><td class="h"><a name="5536"></a>5536</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5537"></a>5537</td><td></td><td></td><td></td><td></td><td class="s">    unless (CORE::length $sig_str) {</td></tr>
<tr><td class="h"><a name="5538"></a>5538</td><td></td><td></td><td></td><td></td><td class="s">        return '+', $LIB -&gt; _zero(), '+', $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="5539"></a>5539</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5540"></a>5540</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5541"></a>5541</td><td></td><td></td><td></td><td></td><td class="s">    # Absolute value of significand as library &quot;object&quot;.</td></tr>
<tr><td class="h"><a name="5542"></a>5542</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5543"></a>5543</td><td></td><td></td><td></td><td></td><td class="s">    my $sig_lib = $bpc == 1 ? $LIB -&gt; _from_bin('0b' . $sig_str)</td></tr>
<tr><td class="h"><a name="5544"></a>5544</td><td></td><td></td><td></td><td></td><td class="s">                : $bpc == 3 ? $LIB -&gt; _from_oct('0'  . $sig_str)</td></tr>
<tr><td class="h"><a name="5545"></a>5545</td><td></td><td></td><td></td><td></td><td class="s">                : $bpc == 4 ? $LIB -&gt; _from_hex('0x' . $sig_str)</td></tr>
<tr><td class="h"><a name="5546"></a>5546</td><td></td><td></td><td></td><td></td><td class="s">                : die &quot;internal error: invalid exponent multiplier&quot;;</td></tr>
<tr><td class="h"><a name="5547"></a>5547</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5548"></a>5548</td><td></td><td></td><td></td><td></td><td class="s">    # If the exponent (in base 2) is positive or zero ...</td></tr>
<tr><td class="h"><a name="5549"></a>5549</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5550"></a>5550</td><td></td><td></td><td></td><td></td><td class="s">    if ($exp_sgn eq '+') {</td></tr>
<tr><td class="h"><a name="5551"></a>5551</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5552"></a>5552</td><td></td><td></td><td></td><td></td><td class="s">        if (!$LIB -&gt; _is_zero($exp_lib)) {</td></tr>
<tr><td class="h"><a name="5553"></a>5553</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5554"></a>5554</td><td></td><td></td><td></td><td></td><td class="s">            # Multiply significand by 2 raised to the exponent.</td></tr>
<tr><td class="h"><a name="5555"></a>5555</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5556"></a>5556</td><td></td><td></td><td></td><td></td><td class="s">            my $p = $LIB -&gt; _pow($LIB -&gt; _two(), $exp_lib);</td></tr>
<tr><td class="h"><a name="5557"></a>5557</td><td></td><td></td><td></td><td></td><td class="s">            $sig_lib = $LIB -&gt; _mul($sig_lib, $p);</td></tr>
<tr><td class="h"><a name="5558"></a>5558</td><td></td><td></td><td></td><td></td><td class="s">            $exp_lib = $LIB -&gt; _zero();</td></tr>
<tr><td class="h"><a name="5559"></a>5559</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="5560"></a>5560</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5561"></a>5561</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5562"></a>5562</td><td></td><td></td><td></td><td></td><td class="s">    # ... else if the exponent is negative ...</td></tr>
<tr><td class="h"><a name="5563"></a>5563</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5564"></a>5564</td><td></td><td></td><td></td><td></td><td class="s">    else {</td></tr>
<tr><td class="h"><a name="5565"></a>5565</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5566"></a>5566</td><td></td><td></td><td></td><td></td><td class="s">        # Rather than dividing the significand by 2 raised to the absolute</td></tr>
<tr><td class="h"><a name="5567"></a>5567</td><td></td><td></td><td></td><td></td><td class="s">        # value of the exponent, multiply the significand by 5 raised to the</td></tr>
<tr><td class="h"><a name="5568"></a>5568</td><td></td><td></td><td></td><td></td><td class="s">        # absolute value of the exponent and let the exponent be in base 10:</td></tr>
<tr><td class="h"><a name="5569"></a>5569</td><td></td><td></td><td></td><td></td><td class="s">        #</td></tr>
<tr><td class="h"><a name="5570"></a>5570</td><td></td><td></td><td></td><td></td><td class="s">        # a * 2^(-b) = a * 5^b * 10^(-b) = c * 10^(-b), where c = a * 5^b</td></tr>
<tr><td class="h"><a name="5571"></a>5571</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5572"></a>5572</td><td></td><td></td><td></td><td></td><td class="s">        my $p = $LIB -&gt; _pow($LIB -&gt; _new(&quot;5&quot;), $exp_lib);</td></tr>
<tr><td class="h"><a name="5573"></a>5573</td><td></td><td></td><td></td><td></td><td class="s">        $sig_lib = $LIB -&gt; _mul($sig_lib, $p);</td></tr>
<tr><td class="h"><a name="5574"></a>5574</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5575"></a>5575</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5576"></a>5576</td><td></td><td></td><td></td><td></td><td class="s">    # Adjust for the case when the conversion to decimal introduced trailing</td></tr>
<tr><td class="h"><a name="5577"></a>5577</td><td></td><td></td><td></td><td></td><td class="s">    # zeros in the significand.</td></tr>
<tr><td class="h"><a name="5578"></a>5578</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5579"></a>5579</td><td></td><td></td><td></td><td></td><td class="s">    my $n = $LIB -&gt; _zeros($sig_lib);</td></tr>
<tr><td class="h"><a name="5580"></a>5580</td><td></td><td></td><td></td><td></td><td class="s">    if ($n) {</td></tr>
<tr><td class="h"><a name="5581"></a>5581</td><td></td><td></td><td></td><td></td><td class="s">        $n = $LIB -&gt; _new($n);</td></tr>
<tr><td class="h"><a name="5582"></a>5582</td><td></td><td></td><td></td><td></td><td class="s">        $sig_lib = $LIB -&gt; _rsft($sig_lib, $n, 10);</td></tr>
<tr><td class="h"><a name="5583"></a>5583</td><td></td><td></td><td></td><td></td><td class="s">        ($exp_lib, $exp_sgn) = $LIB -&gt; _sadd($exp_lib, $exp_sgn, $n, '+');</td></tr>
<tr><td class="h"><a name="5584"></a>5584</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5585"></a>5585</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5586"></a>5586</td><td></td><td></td><td></td><td></td><td class="s">    return $sig_sgn, $sig_lib, $exp_sgn, $exp_lib;</td></tr>
<tr><td class="h"><a name="5587"></a>5587</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5588"></a>5588</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5589"></a>5589</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid hexadecimal number and splits it into</td></tr>
<tr><td class="h"><a name="5590"></a>5590</td><td></td><td></td><td></td><td></td><td class="s"># four parts: the sign of the significand, the absolute value of the significand</td></tr>
<tr><td class="h"><a name="5591"></a>5591</td><td></td><td></td><td></td><td></td><td class="s"># as a libray thingy, the sign of the exponent, and the absolute value of the</td></tr>
<tr><td class="h"><a name="5592"></a>5592</td><td></td><td></td><td></td><td></td><td class="s"># exponent as a library thingy.</td></tr>
<tr><td class="h"><a name="5593"></a>5593</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5594"></a>5594</td><td></td><td></td><td></td><td></td><td class="s">sub _hex_str_to_flt_lib_parts {</td></tr>
<tr><td class="h"><a name="5595"></a>5595</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5596"></a>5596</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5597"></a>5597</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _hex_str_to_hex_str_parts($str)) {</td></tr>
<tr><td class="h"><a name="5598"></a>5598</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _bin_str_parts_to_flt_lib_parts(@parts, 4);  # 4 bits pr. chr</td></tr>
<tr><td class="h"><a name="5599"></a>5599</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5600"></a>5600</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5601"></a>5601</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5602"></a>5602</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5603"></a>5603</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid octal number and splits it into four</td></tr>
<tr><td class="h"><a name="5604"></a>5604</td><td></td><td></td><td></td><td></td><td class="s"># parts: the sign of the significand, the absolute value of the significand as a</td></tr>
<tr><td class="h"><a name="5605"></a>5605</td><td></td><td></td><td></td><td></td><td class="s"># libray thingy, the sign of the exponent, and the absolute value of the</td></tr>
<tr><td class="h"><a name="5606"></a>5606</td><td></td><td></td><td></td><td></td><td class="s"># exponent as a library thingy.</td></tr>
<tr><td class="h"><a name="5607"></a>5607</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5608"></a>5608</td><td></td><td></td><td></td><td></td><td class="s">sub _oct_str_to_flt_lib_parts {</td></tr>
<tr><td class="h"><a name="5609"></a>5609</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5610"></a>5610</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5611"></a>5611</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _oct_str_to_oct_str_parts($str)) {</td></tr>
<tr><td class="h"><a name="5612"></a>5612</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _bin_str_parts_to_flt_lib_parts(@parts, 3);  # 3 bits pr. chr</td></tr>
<tr><td class="h"><a name="5613"></a>5613</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5614"></a>5614</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5615"></a>5615</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5616"></a>5616</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5617"></a>5617</td><td></td><td></td><td></td><td></td><td class="s"># Takes any string representing a valid binary number and splits it into four</td></tr>
<tr><td class="h"><a name="5618"></a>5618</td><td></td><td></td><td></td><td></td><td class="s"># parts: the sign of the significand, the absolute value of the significand as a</td></tr>
<tr><td class="h"><a name="5619"></a>5619</td><td></td><td></td><td></td><td></td><td class="s"># libray thingy, the sign of the exponent, and the absolute value of the</td></tr>
<tr><td class="h"><a name="5620"></a>5620</td><td></td><td></td><td></td><td></td><td class="s"># exponent as a library thingy.</td></tr>
<tr><td class="h"><a name="5621"></a>5621</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5622"></a>5622</td><td></td><td></td><td></td><td></td><td class="s">sub _bin_str_to_flt_lib_parts {</td></tr>
<tr><td class="h"><a name="5623"></a>5623</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5624"></a>5624</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5625"></a>5625</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _bin_str_to_bin_str_parts($str)) {</td></tr>
<tr><td class="h"><a name="5626"></a>5626</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _bin_str_parts_to_flt_lib_parts(@parts, 1);  # 1 bit pr. chr</td></tr>
<tr><td class="h"><a name="5627"></a>5627</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5628"></a>5628</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5629"></a>5629</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5630"></a>5630</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5631"></a>5631</td><td></td><td></td><td></td><td></td><td class="s"># Decimal string is split into the sign of the signficant, the absolute value of</td></tr>
<tr><td class="h"><a name="5632"></a>5632</td><td></td><td></td><td></td><td></td><td class="s"># the significand as library thingy, the sign of the exponent, and the absolute</td></tr>
<tr><td class="h"><a name="5633"></a>5633</td><td></td><td></td><td></td><td></td><td class="s"># value of the exponent as a a library thingy.</td></tr>
<tr><td class="h"><a name="5634"></a>5634</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5635"></a>5635</td><td></td><td></td><td></td><td></td><td class="s">sub _dec_str_to_flt_lib_parts {</td></tr>
<tr><td class="h"><a name="5636"></a>5636</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5637"></a>5637</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5638"></a>5638</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _dec_str_to_dec_str_parts($str)) {</td></tr>
<tr><td class="h"><a name="5639"></a>5639</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _dec_str_parts_to_flt_lib_parts(@parts);</td></tr>
<tr><td class="h"><a name="5640"></a>5640</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5641"></a>5641</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5642"></a>5642</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5643"></a>5643</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5644"></a>5644</td><td></td><td></td><td></td><td></td><td class="s"># Hexdecimal string to a string using decimal floating point notation.</td></tr>
<tr><td class="h"><a name="5645"></a>5645</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5646"></a>5646</td><td></td><td></td><td></td><td></td><td class="s">sub hex_str_to_dec_flt_str {</td></tr>
<tr><td class="h"><a name="5647"></a>5647</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5648"></a>5648</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5649"></a>5649</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _hex_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5650"></a>5650</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_flt_str(@parts);</td></tr>
<tr><td class="h"><a name="5651"></a>5651</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5652"></a>5652</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5653"></a>5653</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5654"></a>5654</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5655"></a>5655</td><td></td><td></td><td></td><td></td><td class="s"># Octal string to a string using decimal floating point notation.</td></tr>
<tr><td class="h"><a name="5656"></a>5656</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5657"></a>5657</td><td></td><td></td><td></td><td></td><td class="s">sub oct_str_to_dec_flt_str {</td></tr>
<tr><td class="h"><a name="5658"></a>5658</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5659"></a>5659</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5660"></a>5660</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _oct_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5661"></a>5661</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_flt_str(@parts);</td></tr>
<tr><td class="h"><a name="5662"></a>5662</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5663"></a>5663</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5664"></a>5664</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5665"></a>5665</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5666"></a>5666</td><td></td><td></td><td></td><td></td><td class="s"># Binary string to a string decimal floating point notation.</td></tr>
<tr><td class="h"><a name="5667"></a>5667</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5668"></a>5668</td><td></td><td></td><td></td><td></td><td class="s">sub bin_str_to_dec_flt_str {</td></tr>
<tr><td class="h"><a name="5669"></a>5669</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5670"></a>5670</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5671"></a>5671</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _bin_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5672"></a>5672</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_flt_str(@parts);</td></tr>
<tr><td class="h"><a name="5673"></a>5673</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5674"></a>5674</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5675"></a>5675</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5676"></a>5676</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5677"></a>5677</td><td></td><td></td><td></td><td></td><td class="s"># Decimal string to a string using decimal floating point notation.</td></tr>
<tr><td class="h"><a name="5678"></a>5678</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5679"></a>5679</td><td></td><td></td><td></td><td></td><td class="s">sub dec_str_to_dec_flt_str {</td></tr>
<tr><td class="h"><a name="5680"></a>5680</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5681"></a>5681</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5682"></a>5682</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _dec_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5683"></a>5683</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_flt_str(@parts);</td></tr>
<tr><td class="h"><a name="5684"></a>5684</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5685"></a>5685</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5686"></a>5686</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5687"></a>5687</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5688"></a>5688</td><td></td><td></td><td></td><td></td><td class="s"># Hexdecimal string to decimal notation (no exponent).</td></tr>
<tr><td class="h"><a name="5689"></a>5689</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5690"></a>5690</td><td></td><td></td><td></td><td></td><td class="s">sub hex_str_to_dec_str {</td></tr>
<tr><td class="h"><a name="5691"></a>5691</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5692"></a>5692</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5693"></a>5693</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _dec_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5694"></a>5694</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_dec_str(@parts);</td></tr>
<tr><td class="h"><a name="5695"></a>5695</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5696"></a>5696</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5697"></a>5697</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5698"></a>5698</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5699"></a>5699</td><td></td><td></td><td></td><td></td><td class="s"># Octal string to decimal notation (no exponent).</td></tr>
<tr><td class="h"><a name="5700"></a>5700</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5701"></a>5701</td><td></td><td></td><td></td><td></td><td class="s">sub oct_str_to_dec_str {</td></tr>
<tr><td class="h"><a name="5702"></a>5702</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5703"></a>5703</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5704"></a>5704</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _oct_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5705"></a>5705</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_dec_str(@parts);</td></tr>
<tr><td class="h"><a name="5706"></a>5706</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5707"></a>5707</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5708"></a>5708</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5709"></a>5709</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5710"></a>5710</td><td></td><td></td><td></td><td></td><td class="s"># Binary string to decimal notation (no exponent).</td></tr>
<tr><td class="h"><a name="5711"></a>5711</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5712"></a>5712</td><td></td><td></td><td></td><td></td><td class="s">sub bin_str_to_dec_str {</td></tr>
<tr><td class="h"><a name="5713"></a>5713</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5714"></a>5714</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5715"></a>5715</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _bin_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5716"></a>5716</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_dec_str(@parts);</td></tr>
<tr><td class="h"><a name="5717"></a>5717</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5718"></a>5718</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5719"></a>5719</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5720"></a>5720</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5721"></a>5721</td><td></td><td></td><td></td><td></td><td class="s"># Decimal string to decimal notation (no exponent).</td></tr>
<tr><td class="h"><a name="5722"></a>5722</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5723"></a>5723</td><td></td><td></td><td></td><td></td><td class="s">sub dec_str_to_dec_str {</td></tr>
<tr><td class="h"><a name="5724"></a>5724</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5725"></a>5725</td><td></td><td></td><td></td><td></td><td class="s">    my $str   = shift;</td></tr>
<tr><td class="h"><a name="5726"></a>5726</td><td></td><td></td><td></td><td></td><td class="s">    if (my @parts = $class -&gt; _dec_str_to_flt_lib_parts($str)) {</td></tr>
<tr><td class="h"><a name="5727"></a>5727</td><td></td><td></td><td></td><td></td><td class="s">        return $class -&gt; _flt_lib_parts_to_dec_str(@parts);</td></tr>
<tr><td class="h"><a name="5728"></a>5728</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5729"></a>5729</td><td></td><td></td><td></td><td></td><td class="s">    return;</td></tr>
<tr><td class="h"><a name="5730"></a>5730</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5731"></a>5731</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5732"></a>5732</td><td></td><td></td><td></td><td></td><td class="s">sub _flt_lib_parts_to_flt_str {</td></tr>
<tr><td class="h"><a name="5733"></a>5733</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5734"></a>5734</td><td></td><td></td><td></td><td></td><td class="s">    my @parts = @_;</td></tr>
<tr><td class="h"><a name="5735"></a>5735</td><td></td><td></td><td></td><td></td><td class="s">    return $parts[0] . $LIB -&gt; _str($parts[1])</td></tr>
<tr><td class="h"><a name="5736"></a>5736</td><td></td><td></td><td></td><td></td><td class="s">      . 'e' . $parts[2] . $LIB -&gt; _str($parts[3]);</td></tr>
<tr><td class="h"><a name="5737"></a>5737</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5738"></a>5738</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5739"></a>5739</td><td></td><td></td><td></td><td></td><td class="s">sub _flt_lib_parts_to_dec_str {</td></tr>
<tr><td class="h"><a name="5740"></a>5740</td><td></td><td></td><td></td><td></td><td class="s">    my $class = shift;</td></tr>
<tr><td class="h"><a name="5741"></a>5741</td><td></td><td></td><td></td><td></td><td class="s">    my @parts = @_;</td></tr>
<tr><td class="h"><a name="5742"></a>5742</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5743"></a>5743</td><td></td><td></td><td></td><td></td><td class="s">    # The number is an integer iff the exponent is non-negative.</td></tr>
<tr><td class="h"><a name="5744"></a>5744</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5745"></a>5745</td><td></td><td></td><td></td><td></td><td class="s">    if ($parts[2] eq '+') {</td></tr>
<tr><td class="h"><a name="5746"></a>5746</td><td></td><td></td><td></td><td></td><td class="s">        my $str = $parts[0]</td></tr>
<tr><td class="h"><a name="5747"></a>5747</td><td></td><td></td><td></td><td></td><td class="s">          . $LIB -&gt; _str($LIB -&gt; _lsft($parts[1], $parts[3], 10));</td></tr>
<tr><td class="h"><a name="5748"></a>5748</td><td></td><td></td><td></td><td></td><td class="s">        return $str;</td></tr>
<tr><td class="h"><a name="5749"></a>5749</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5750"></a>5750</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5751"></a>5751</td><td></td><td></td><td></td><td></td><td class="s">    # If it is not an integer, add a decimal point.</td></tr>
<tr><td class="h"><a name="5752"></a>5752</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5753"></a>5753</td><td></td><td></td><td></td><td></td><td class="s">    else {</td></tr>
<tr><td class="h"><a name="5754"></a>5754</td><td></td><td></td><td></td><td></td><td class="s">        my $mant     = $LIB -&gt; _str($parts[1]);</td></tr>
<tr><td class="h"><a name="5755"></a>5755</td><td></td><td></td><td></td><td></td><td class="s">        my $mant_len = CORE::length($mant);</td></tr>
<tr><td class="h"><a name="5756"></a>5756</td><td></td><td></td><td></td><td></td><td class="s">        my $expo     = $LIB -&gt; _num($parts[3]);</td></tr>
<tr><td class="h"><a name="5757"></a>5757</td><td></td><td></td><td></td><td></td><td class="s">        my $len_cmp = $mant_len &lt;=&gt; $expo;</td></tr>
<tr><td class="h"><a name="5758"></a>5758</td><td></td><td></td><td></td><td></td><td class="s">        if ($len_cmp &lt;= 0) {</td></tr>
<tr><td class="h"><a name="5759"></a>5759</td><td></td><td></td><td></td><td></td><td class="s">            return $parts[0] . '0.' . '0' x ($expo - $mant_len) . $mant;</td></tr>
<tr><td class="h"><a name="5760"></a>5760</td><td></td><td></td><td></td><td></td><td class="s">        } else {</td></tr>
<tr><td class="h"><a name="5761"></a>5761</td><td></td><td></td><td></td><td></td><td class="s">            substr $mant, $mant_len - $expo, 0, '.';</td></tr>
<tr><td class="h"><a name="5762"></a>5762</td><td></td><td></td><td></td><td></td><td class="s">            return $parts[0] . $mant;</td></tr>
<tr><td class="h"><a name="5763"></a>5763</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="5764"></a>5764</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5765"></a>5765</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5766"></a>5766</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5767"></a>5767</td><td></td><td></td><td></td><td></td><td class="s"># Takes four arguments, the sign of the significand, the absolute value of the</td></tr>
<tr><td class="h"><a name="5768"></a>5768</td><td></td><td></td><td></td><td></td><td class="s"># significand as a libray thingy, the sign of the exponent, and the absolute</td></tr>
<tr><td class="h"><a name="5769"></a>5769</td><td></td><td></td><td></td><td></td><td class="s"># value of the exponent as a library thingy, and returns three parts: the sign</td></tr>
<tr><td class="h"><a name="5770"></a>5770</td><td></td><td></td><td></td><td></td><td class="s"># of the rational number, the absolute value of the numerator as a libray</td></tr>
<tr><td class="h"><a name="5771"></a>5771</td><td></td><td></td><td></td><td></td><td class="s"># thingy, and the absolute value of the denominator as a library thingy.</td></tr>
<tr><td class="h"><a name="5772"></a>5772</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5773"></a>5773</td><td></td><td></td><td></td><td></td><td class="s"># For example, to convert data representing the value &quot;+12e-2&quot;, then</td></tr>
<tr><td class="h"><a name="5774"></a>5774</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5775"></a>5775</td><td></td><td></td><td></td><td></td><td class="s">#   $sm = &quot;+&quot;;</td></tr>
<tr><td class="h"><a name="5776"></a>5776</td><td></td><td></td><td></td><td></td><td class="s">#   $m  = $LIB -&gt; _new(&quot;12&quot;);</td></tr>
<tr><td class="h"><a name="5777"></a>5777</td><td></td><td></td><td></td><td></td><td class="s">#   $se = &quot;-&quot;;</td></tr>
<tr><td class="h"><a name="5778"></a>5778</td><td></td><td></td><td></td><td></td><td class="s">#   $e  = $LIB -&gt; _new(&quot;2&quot;);</td></tr>
<tr><td class="h"><a name="5779"></a>5779</td><td></td><td></td><td></td><td></td><td class="s">#   ($sr, $n, $d) = $class -&gt; _flt_lib_parts_to_rat_lib_parts($sm, $m, $se, $e);</td></tr>
<tr><td class="h"><a name="5780"></a>5780</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5781"></a>5781</td><td></td><td></td><td></td><td></td><td class="s"># returns data representing the same value written as the fraction &quot;+3/25&quot;</td></tr>
<tr><td class="h"><a name="5782"></a>5782</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5783"></a>5783</td><td></td><td></td><td></td><td></td><td class="s">#   $sr = &quot;+&quot;</td></tr>
<tr><td class="h"><a name="5784"></a>5784</td><td></td><td></td><td></td><td></td><td class="s">#   $n  = $LIB -&gt; _new(&quot;3&quot;);</td></tr>
<tr><td class="h"><a name="5785"></a>5785</td><td></td><td></td><td></td><td></td><td class="s">#   $d  = $LIB -&gt; _new(&quot;12&quot;);</td></tr>
<tr><td class="h"><a name="5786"></a>5786</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5787"></a>5787</td><td></td><td></td><td></td><td></td><td class="s">sub _flt_lib_parts_to_rat_lib_parts {</td></tr>
<tr><td class="h"><a name="5788"></a>5788</td><td></td><td></td><td></td><td></td><td class="s">    my $self = shift;</td></tr>
<tr><td class="h"><a name="5789"></a>5789</td><td></td><td></td><td></td><td></td><td class="s">    my ($msgn, $mabs, $esgn, $eabs) = @_;</td></tr>
<tr><td class="h"><a name="5790"></a>5790</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5791"></a>5791</td><td></td><td></td><td></td><td></td><td class="s">    if ($esgn eq '-') {                 # &quot;12e-2&quot; -&gt; &quot;12/100&quot; -&gt; &quot;3/25&quot;</td></tr>
<tr><td class="h"><a name="5792"></a>5792</td><td></td><td></td><td></td><td></td><td class="s">        my $num_lib = $LIB -&gt; _copy($mabs);</td></tr>
<tr><td class="h"><a name="5793"></a>5793</td><td></td><td></td><td></td><td></td><td class="s">        my $den_lib = $LIB -&gt; _1ex($LIB -&gt; _num($eabs));</td></tr>
<tr><td class="h"><a name="5794"></a>5794</td><td></td><td></td><td></td><td></td><td class="s">        my $gcd_lib = $LIB -&gt; _gcd($LIB -&gt; _copy($num_lib), $den_lib);</td></tr>
<tr><td class="h"><a name="5795"></a>5795</td><td></td><td></td><td></td><td></td><td class="s">        $num_lib = $LIB -&gt; _div($LIB -&gt; _copy($num_lib), $gcd_lib);</td></tr>
<tr><td class="h"><a name="5796"></a>5796</td><td></td><td></td><td></td><td></td><td class="s">        $den_lib = $LIB -&gt; _div($den_lib, $gcd_lib);</td></tr>
<tr><td class="h"><a name="5797"></a>5797</td><td></td><td></td><td></td><td></td><td class="s">        return $msgn, $num_lib, $den_lib;</td></tr>
<tr><td class="h"><a name="5798"></a>5798</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5799"></a>5799</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5800"></a>5800</td><td></td><td></td><td></td><td></td><td class="s">    elsif (!$LIB -&gt; _is_zero($eabs)) {  # &quot;12e+2&quot; -&gt; &quot;1200&quot; -&gt; &quot;1200/1&quot;</td></tr>
<tr><td class="h"><a name="5801"></a>5801</td><td></td><td></td><td></td><td></td><td class="s">        return $msgn, $LIB -&gt; _lsft($LIB -&gt; _copy($mabs), $eabs, 10),</td></tr>
<tr><td class="h"><a name="5802"></a>5802</td><td></td><td></td><td></td><td></td><td class="s">                      $LIB -&gt; _one();</td></tr>
<tr><td class="h"><a name="5803"></a>5803</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5804"></a>5804</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5805"></a>5805</td><td></td><td></td><td></td><td></td><td class="s">    else {                              # &quot;12e+0&quot; -&gt; &quot;12&quot; -&gt; &quot;12/1&quot;</td></tr>
<tr><td class="h"><a name="5806"></a>5806</td><td></td><td></td><td></td><td></td><td class="s">        return $msgn, $mabs, $LIB -&gt; _one();</td></tr>
<tr><td class="h"><a name="5807"></a>5807</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="5808"></a>5808</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="5809"></a>5809</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5810"></a>5810</td><td></td><td></td><td></td><td></td><td class="s"># Add the function _register_callback() to Math::BigInt. It is provided for</td></tr>
<tr><td class="h"><a name="5811"></a>5811</td><td></td><td></td><td></td><td></td><td class="s"># backwards compabibility so that old version of Math::BigRat etc. don't</td></tr>
<tr><td class="h"><a name="5812"></a>5812</td><td></td><td></td><td></td><td></td><td class="s"># complain about missing it.</td></tr>
<tr><td class="h"><a name="5813"></a>5813</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5814"></a>5814</td><td></td><td></td><td></td><td></td><td class="s">sub _register_callback { }</td></tr>
<tr><td class="h"><a name="5815"></a>5815</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5816"></a>5816</td><td></td><td></td><td></td><td></td><td class="s">###############################################################################</td></tr>
<tr><td class="h"><a name="5817"></a>5817</td><td></td><td></td><td></td><td></td><td class="s"># this method returns 0 if the object can be modified, or 1 if not.</td></tr>
<tr><td class="h"><a name="5818"></a>5818</td><td></td><td></td><td></td><td></td><td class="s"># We use a fast constant sub() here, to avoid costly calls. Subclasses</td></tr>
<tr><td class="h"><a name="5819"></a>5819</td><td></td><td></td><td></td><td></td><td class="s"># may override it with special code (f.i. Math::BigInt::Constant does so)</td></tr>
<tr><td class="h"><a name="5820"></a>5820</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5821"></a>5821</td><td></td><td></td><td></td><td></td><td class="s">sub modify () { 0; }</td></tr>
<tr><td class="h"><a name="5822"></a>5822</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5823"></a>5823</td><td class="c3">1</td><td class="c1"><span title="Avg 10Âµs">10Âµs</span></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h"><a name="5824"></a>5824</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="5825"></a>5825</td><td></td><td></td><td></td><td></td><td class="s">__END__</td></tr>
<tr><td class="s"><a name=""></a>&nbsp;</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="Math__BigInt__CORE_match"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 5Âµs within Math::BigInt::CORE:match which was called:
#    once (5Âµs+0s) by Math::BigInt::round_mode at <a href="Math-BigInt-pm-25-line.html#282">line 282</a></div></div>sub Math::BigInt::CORE:match; # opcode<br />        </td></tr>
</tbody></table></div>
        
            <script type="text/javascript">
              $(document).ready(function() { 

        $("#subs_table").tablesorter({
            sortList: [[3,1]],
            headers: {
                3: { sorter: 'fmt_time' },
                4: { sorter: 'fmt_time' }
            }
        });
        $(".floatHeaders").each( function(){ $(this).floatThead(); } );

        show_fragment_target();
        $(window).on('hashchange', function(e){
          show_fragment_target();
        });

    
 } );
            </script>
        
        <div class="footer">Report produced by the
        <a href="http://metacpan.org/release/Devel-NYTProf/">NYTProf 6.14</a>
        Perl profiler, developed by
        <a href="http://www.linkedin.com/in/timbunce">Tim Bunce</a> based on
        work by Adam Kaplan and Salvador FandiÃ±o GarcÃ­a.
        </div>
        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    </body></html>